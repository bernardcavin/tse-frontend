import{q as _e,f as J,u as X,a as se,s as Oe,j as e,U as Qe,c as ie,t as ne,v as Ce,w as Ke,I as Se,x as he,B as Q,y as Ie,z as K,g as W,A as we,C as Pe,D as We,R as Ye,E as Ze,F as Je,G as Xe,H as ea,J as aa,K as xe,M as ta,N as oa,O as be,r as _,l as sa,Q as M,V as ia,T as Y,W as z,X as ke,Y as na,Z as ra,_ as h,$ as q,a0 as te,a1 as je,a2 as la,a3 as ca,a4 as da,a5 as ua,a6 as pa,a7 as Z,S as V,a8 as ma,P as ha,a9 as $,aa as xa,e as Re,h as ba,m as U}from"./index-ioEK-4XP.js";import{Q as ja,M as va,T as ga,a as fa,L as ya}from"./index-C269ZYjD.js";import{g as _a,a as Ca,C as Sa,u as ze,F as Fe,I as Ia,b as wa}from"./file-upload-DOw4et-C.js";import{A as Pa}from"./Anchor-Bg8v4PKs.js";import{F as v,S as ka}from"./form-section-DQj-gf8s.js";import{F as Ra}from"./facility-wpSrsTYn.js";import{d as B,f as N}from"./date-D_Z6dzan.js";import{I as za,a as Fa,G as i,C as Aa}from"./DatePickerInput-qvCH1aaf.js";import{P as Da}from"./Popup-Dy4kaUOm.js";import{u as Ae,z as De}from"./use-form-XMJ4QpLH.js";import{g as Ta,a as Ma}from"./facilities-DwPCjzoj.js";import{u as Te,h as Me,F as Le,g as La}from"./form-BRCnMiQz.js";import{S as O,T as ve,N as G,D as H,a as oe}from"./text-area-B0mF0arf.js";import{T}from"./text-input-BfzCVHBl.js";import{I as Ea,a as qa}from"./IconPlus-EWM4KJgB.js";const[Ba,Ee]=_e(),[Na,Ga]=_e();var qe={card:"m_9dc8ae12"};const Ha={withBorder:!0},Ua=ie((t,{radius:s})=>({card:{"--card-radius":ne(s)}})),re=J((t,s)=>{const o=X("RadioCard",Ha,t),{classNames:a,className:r,style:d,styles:n,unstyled:c,vars:u,checked:p,mod:g,withBorder:f,value:C,onClick:k,name:I,onKeyDown:S,...E}=o,F=se({name:"RadioCard",classes:qe,props:o,className:r,style:d,classNames:a,styles:n,unstyled:c,vars:u,varsResolver:Ua,rootSelector:"card"}),{dir:w}=Oe(),x=Ee(),P=typeof p=="boolean"?p:(x==null?void 0:x.value)===C||!1,A=I||(x==null?void 0:x.name),de=m=>{if(S==null||S(m),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(m.nativeEvent.code)){m.preventDefault();const j=Array.from(document.querySelectorAll(`[role="radio"][name="${A||"__mantine"}"]`)),D=j.findIndex(ee=>ee===m.target),y=D+1>=j.length?0:D+1,b=D-1<0?j.length-1:D-1;m.nativeEvent.code==="ArrowDown"&&(j[y].focus(),j[y].click()),m.nativeEvent.code==="ArrowUp"&&(j[b].focus(),j[b].click()),m.nativeEvent.code==="ArrowLeft"&&(j[w==="ltr"?b:y].focus(),j[w==="ltr"?b:y].click()),m.nativeEvent.code==="ArrowRight"&&(j[w==="ltr"?y:b].focus(),j[w==="ltr"?y:b].click())}};return e.jsx(Na,{value:{checked:P},children:e.jsx(Qe,{ref:s,mod:[{"with-border":f,checked:P},g],...F("card"),...E,role:"radio","aria-checked":P,name:A,onClick:m=>{k==null||k(m),x==null||x.onChange(C||"")},onKeyDown:de})})});re.displayName="@mantine/core/RadioCard";re.classes=qe;const Va={},le=J((t,s)=>{const{value:o,defaultValue:a,onChange:r,size:d,wrapperProps:n,children:c,name:u,readOnly:p,...g}=X("RadioGroup",Va,t),f=Ce(u),[C,k]=Ke({value:o,defaultValue:a,finalValue:"",onChange:r}),I=S=>!p&&k(typeof S=="string"?S:S.currentTarget.value);return e.jsx(Ba,{value:{value:C,onChange:I,size:d,name:f},children:e.jsx(Se.Wrapper,{size:d,ref:s,...n,...g,labelElement:"div",__staticSelector:"RadioGroup",children:e.jsx(za,{role:"radiogroup",children:c})})})});le.classes=Se.Wrapper.classes;le.displayName="@mantine/core/RadioGroup";function Be({size:t,style:s,...o}){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:he(t),height:he(t),...s},"aria-hidden":!0,...o,children:e.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var Ne={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const $a={icon:Be},Oa=ie((t,{radius:s,color:o,size:a,iconColor:r,variant:d,autoContrast:n})=>{const c=Ie({color:o||t.primaryColor,theme:t}),u=c.isThemeColor&&c.shade===void 0?`var(--mantine-color-${c.color}-outline)`:c.color;return{indicator:{"--radio-size":K(a,"radio-size"),"--radio-radius":s===void 0?void 0:ne(s),"--radio-color":d==="outline"?u:W(o,t),"--radio-icon-size":K(a,"radio-icon-size"),"--radio-icon-color":r?W(r,t):we(n,t)?Pe({color:o,theme:t,autoContrast:n}):void 0}}}),ce=J((t,s)=>{const o=X("RadioIndicator",$a,t),{classNames:a,className:r,style:d,styles:n,unstyled:c,vars:u,icon:p,radius:g,color:f,iconColor:C,autoContrast:k,checked:I,mod:S,variant:E,disabled:F,...w}=o,x=se({name:"RadioIndicator",classes:Ne,props:o,className:r,style:d,classNames:a,styles:n,unstyled:c,vars:u,varsResolver:Oa,rootSelector:"indicator"}),P=Ga(),A=typeof I=="boolean"?I:(P==null?void 0:P.checked)||!1;return e.jsx(Q,{ref:s,...x("indicator",{variant:E}),variant:E,mod:[{checked:A,disabled:F},S],...w,children:e.jsx(p,{...x("icon")})})});ce.displayName="@mantine/core/RadioIndicator";ce.classes=Ne;var Ge={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const Qa={labelPosition:"right"},Ka=ie((t,{size:s,radius:o,color:a,iconColor:r,variant:d,autoContrast:n})=>{const c=Ie({color:a||t.primaryColor,theme:t}),u=c.isThemeColor&&c.shade===void 0?`var(--mantine-color-${c.color}-outline)`:c.color;return{root:{"--radio-size":K(s,"radio-size"),"--radio-radius":o===void 0?void 0:ne(o),"--radio-color":d==="outline"?u:W(a,t),"--radio-icon-color":r?W(r,t):we(n,t)?Pe({color:a,theme:t,autoContrast:n}):void 0,"--radio-icon-size":K(s,"radio-icon-size")}}}),R=J((t,s)=>{const o=X("Radio",Qa,t),{classNames:a,className:r,style:d,styles:n,unstyled:c,vars:u,id:p,size:g,label:f,labelPosition:C,description:k,error:I,radius:S,color:E,variant:F,disabled:w,wrapperProps:x,icon:P=Be,rootRef:A,iconColor:de,onChange:m,mod:j,...D}=o,y=se({name:"Radio",classes:Ge,props:o,className:r,style:d,classNames:a,styles:n,unstyled:c,vars:u,varsResolver:Ka}),b=Ee(),ee=(b==null?void 0:b.size)??g,Ve=o.size?g:ee,{styleProps:$e,rest:ae}=We(D),ue=Ce(p),pe=b?{checked:b.value===ae.value,name:ae.name??b.name,onChange:me=>{b.onChange(me),m==null||m(me)}}:{};return e.jsx(Fa,{...y("root"),__staticSelector:"Radio",__stylesApiProps:o,id:ue,size:Ve,labelPosition:C,label:f,description:k,error:I,disabled:w,classNames:a,styles:n,unstyled:c,"data-checked":pe.checked||void 0,variant:F,ref:A,mod:j,...$e,...x,children:e.jsxs(Q,{...y("inner"),mod:{"label-position":C},children:[e.jsx(Q,{...y("radio",{focusable:!0,variant:F}),onChange:m,...ae,...pe,component:"input",mod:{error:!!I},ref:s,id:ue,disabled:w,type:"radio"}),e.jsx(P,{...y("icon"),"aria-hidden":!0})]})})});R.classes=Ge;R.displayName="@mantine/core/Radio";R.Group=le;R.Card=re;R.Indicator=ce;const Wa={"application/pdf":"pdf","application/json":"code","application/xml":"code","application/javascript":"code","application/octet-stream":"archive","audio/mpeg":"audio","audio/x-wav":"audio","image/jpeg":"image","image/png":"image","image/gif":"image","video/mp4":"video","video/webm":"video","text/plain":"text","text/html":"text","text/css":"text","text/javascript":"text","application/msword":"word","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"word","application/vnd.ms-excel":"excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"excel","application/vnd.ms-powerpoint":"presentation","application/vnd.openxmlformats-officedocument.presentationml.presentation":"presentation","application/zip":"archive","application/x-rar-compressed":"archive","application/x-tar":"archive",unknown:"file"},ge={text:e.jsx(Ze,{}),image:e.jsx(Je,{}),video:e.jsx(Xe,{}),audio:e.jsx(ea,{}),pdf:e.jsx(aa,{}),word:e.jsx(xe,{}),excel:e.jsx(xe,{}),archive:e.jsx(ta,{}),code:e.jsx(oa,{}),presentation:e.jsx(be,{}),file:e.jsx(be,{})},Ya=({mimeType:t,size:s=24,color:o="black"})=>{const a=Wa[t]||"unknown",r=ge[a]||ge.file;return Ye.cloneElement(r,{size:s,color:o})},fe=({label:t,handleDownload:s,isLoading:o=!1,mimeType:a="application/json"})=>{const r=sa();return e.jsx(M,{gap:"xs",children:e.jsx(ia,{label:"Download",children:e.jsx(Pa,{onClick:s,children:e.jsxs(M,{gap:5,align:"center",children:[e.jsx(Ya,{color:r.colors.blue[6],size:16,mimeType:a}),e.jsx(Y,{fz:"sm",children:t})]})})})})},ye=async({file_id:t})=>{try{const s=await Ca(t),o=document.createElement("a");o.href=s,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),z.show({title:"Berhasil",message:"File berhasil diunduh",color:"green"})}catch(s){z.show({message:"Download failed: "+s,color:"red"})}};function Za({file_id:t,withFileInfo:s}){const[o,a]=_.useState(null),[r,d]=_.useState(!1);return _.useEffect(()=>{s&&(d(!0),_a(t).then(n=>{a(n),d(!1)}))},[t]),s?e.jsx(fe,{label:`${o==null?void 0:o.filename} (${o!=null&&o.size?`${((o==null?void 0:o.size)/1024).toFixed(2)} KB`:"-"})`,handleDownload:()=>ye({file_id:t}),isLoading:r,mimeType:o==null?void 0:o.content_type}):e.jsx(fe,{label:"",handleDownload:()=>ye({file_id:t})})}function Ja({active:t,variant:s="filled",...o}){return e.jsx(ke,{color:t?"teal":"orange",variant:s,...o,children:t?"Active":"Inactive"})}function Xa({value:t,variant:s="filled",...o}){return e.jsx(ke,{color:t==="in_storage"?"teal":"orange",variant:s,...o,children:t==="in_storage"?"In Storage":"In Transit"})}const et=na(["in_storage","in_transit"]),L=ra({id:h().uuid().optional().nullable(),item_name:h(),item_description:h().optional().nullable(),item_category:h(),item_code:h(),manufacturer:h().optional().nullable(),supplier:h().optional().nullable(),quantity:q(),quantity_uom:h(),minimum_stock_level:q().default(0),reorder_level:q().optional().nullable(),storage_location_id:h().uuid(),storage_location:Ra.optional().nullable(),location_status:et,current_latitude:q().optional().nullable(),current_longitude:q().optional().nullable(),assigned_department:h().optional().nullable(),assigned_personnel:h().optional().nullable(),asset_tag:h().optional().nullable(),condition_status:h(),inspection_required:te().default(!1),last_inspection_date:B.optional().nullable(),next_inspection_due:B.optional().nullable(),certification_expiry_date:B.optional().nullable(),safety_data_sheet_available:te().default(!1),purchase_date:B.optional().nullable(),expiry_date:B.optional().nullable(),is_active:te().default(!0),photo_file_ids:je(h()).optional().nullable(),attachment_file_ids:je(h()).optional().nullable()}),_t=la({endpoint:"/inventory",dataSchema:L,rQueryParams:{queryKey:["inventory"]}}),He=da({endpoint:"/inventory/:id",responseSchema:L,rQueryParams:{queryKey:["inventory"]}}),at=ua({endpoint:"/inventory",bodySchema:L,rMutationParams:{onSuccess:t=>{z.show({title:"Berhasil",message:"Inventory berhasil dibuat",color:"green"})},onError:t=>{z.show({message:t.message,color:"red"})}},options:{isMultipart:!1}}),tt=pa({endpoint:"/inventory/:id",bodySchema:L,rMutationParams:{onSuccess:t=>{z.show({title:"Berhasil",message:"Inventory berhasil diubah",color:"green"})},onError:t=>{z.show({message:t.message,color:"red"})}}}),Ct=ca({endpoint:"/inventory/:id",rMutationParams:{onSuccess:t=>{z.show({title:"Berhasil",message:"Inventory berhasil dihapus",color:"green"})},onError:t=>{z.show({message:t.message,color:"red"})}}});function ot({id:t}){var d,n;const{data:s,isLoading:o}=He({route:{id:t}});if(o)return e.jsx(M,{justify:"center",py:"xl",children:e.jsx(Z,{size:"lg"})});if(!s)return e.jsx(Y,{c:"dimmed",ta:"center",py:"xl",children:"No inventory data found."});const a=s,r=a.current_latitude!==null&&a.current_longitude!==null;return e.jsxs(V,{gap:"lg",children:[a.photo_file_ids&&a.photo_file_ids.length>0&&e.jsx(v,{title:"Photos",withHide:!0,children:e.jsx(Sa,{file_ids:a.photo_file_ids})}),e.jsxs(v,{title:"Basic Information",withHide:!0,children:[a.id&&e.jsx(ma,{children:e.jsx(ha,{shadow:"xs",p:"md",withBorder:!0,children:e.jsx(ja,{value:a.id,size:200})})}),e.jsxs(i,{children:[e.jsxs(i.Col,{span:{base:12,sm:6},children:[e.jsx(l,{label:"Item Name",value:a.item_name}),e.jsx(l,{label:"Item Code",value:a.item_code}),e.jsx(l,{label:"Category",value:a.item_category}),e.jsx(l,{label:"Manufacturer",value:a.manufacturer}),e.jsx(l,{label:"Supplier",value:a.supplier})]}),e.jsxs(i.Col,{span:{base:12,sm:6},children:[e.jsx(l,{label:"Quantity",value:`${a.quantity} ${a.quantity_uom}`}),e.jsx(l,{label:"Minimum Stock Level",value:a.minimum_stock_level}),e.jsx(l,{label:"Reorder Level",value:a.reorder_level}),e.jsx(l,{label:"Storage Location",value:((d=a.storage_location)==null?void 0:d.facility_name)??"-"}),e.jsx(l,{label:"Location Status",value:e.jsx(Xa,{value:a.location_status})})]})]})]}),a.storage_location&&e.jsx(v,{title:"Storage Facility Details",withHide:!0,children:e.jsxs(i,{children:[e.jsxs(i.Col,{span:{base:12,sm:6},children:[e.jsx(l,{label:"Facility Type",value:a.storage_location.facility_type}),e.jsx(l,{label:"Address",value:a.storage_location.address}),e.jsx(l,{label:"City",value:a.storage_location.city}),e.jsx(l,{label:"Province",value:a.storage_location.province}),e.jsx(l,{label:"Country",value:a.storage_location.country})]}),e.jsxs(i.Col,{span:{base:12,sm:6},children:[e.jsx(l,{label:"Manager Name",value:a.storage_location.manager_name}),e.jsx(l,{label:"Contact Email",value:a.storage_location.contact_email}),e.jsx(l,{label:"Contact Phone",value:a.storage_location.contact_phone}),e.jsx(l,{label:"Owner Company",value:a.storage_location.owner_company})]})]})}),e.jsx(v,{title:"Assignment & Tracking",withHide:!0,children:e.jsxs(i,{children:[e.jsxs(i.Col,{span:{base:12,sm:6},children:[e.jsx(l,{label:"Assigned Department",value:a.assigned_department}),e.jsx(l,{label:"Assigned Personnel",value:a.assigned_personnel}),e.jsx(l,{label:"Asset Tag",value:a.asset_tag})]}),e.jsxs(i.Col,{span:{base:12,sm:6},children:[e.jsx(l,{label:"Condition Status",value:a.condition_status}),e.jsx(l,{label:"Inspection Required",value:a.inspection_required?"Yes âœ…":"No âŒ"}),e.jsx(l,{label:"Safety Data Sheet",value:a.safety_data_sheet_available?"Available ðŸ“„":"Not Available"})]})]})}),e.jsx(v,{title:"Key Dates",withHide:!0,children:e.jsxs(i,{children:[e.jsxs(i.Col,{span:{base:12,sm:6},children:[e.jsx(l,{label:"Purchase Date",value:N(a.purchase_date)}),e.jsx(l,{label:"Expiry Date",value:N(a.expiry_date)}),e.jsx(l,{label:"Last Inspection",value:N(a.last_inspection_date)})]}),e.jsxs(i.Col,{span:{base:12,sm:6},children:[e.jsx(l,{label:"Next Inspection Due",value:N(a.next_inspection_due)}),e.jsx(l,{label:"Certification Expiry",value:N(a.certification_expiry_date)}),e.jsx(l,{label:"Active",value:e.jsx(Ja,{active:a.is_active})})]})]})}),r&&e.jsx(v,{title:"Current Location",withHide:!0,children:e.jsx(Q,{style:{height:300,borderRadius:12,overflow:"hidden"},children:e.jsxs(va,{center:[a.current_latitude,a.current_longitude],zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!1,children:[e.jsx(ga,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"Â© OpenStreetMap contributors"}),e.jsx(fa,{position:[a.current_latitude,a.current_longitude],icon:ya.icon({iconUrl:"https://cdn-icons-png.flaticon.com/512/684/684908.png",iconSize:[30,30]}),children:e.jsxs(Da,{children:[e.jsx("strong",{children:a.item_name}),e.jsx("br",{}),((n=a.storage_location)==null?void 0:n.facility_name)??"Unknown facility"]})})]})})}),a.attachment_file_ids&&a.attachment_file_ids.length>0&&e.jsx(v,{title:"Attachments",withHide:!0,children:e.jsx($,{children:e.jsx($.Tbody,{children:a.attachment_file_ids.map(c=>e.jsx($.Tr,{children:e.jsx($.Td,{children:e.jsx(Za,{file_id:c,withFileInfo:!0})})},c))})})})]})}function l({label:t,value:s}){return e.jsxs(V,{gap:2,mb:"sm",children:[e.jsx(Y,{c:"dimmed",fz:"sm",children:t}),e.jsx(Y,{fw:500,style:{wordBreak:"break-word"},children:s??"-"}),e.jsx(xa,{my:4})]})}const st=_.forwardRef(({name:t,dataGetter:s,onChange:o,dependsOn:a,...r},d)=>{const n=Te();n.watch(t,({value:f})=>{o==null||o(f)});const[c,u]=_.useState([]),[p,g]=_.useState(!0);return _.useEffect(()=>{g(!0),s().then(f=>{u(f),g(!1)})},[a]),p?e.jsx(Z,{size:"xs"}):e.jsx(ka,{data:c,ref:d,searchable:!0,comboboxProps:{zIndex:2001},rightSection:p?e.jsx(Z,{size:"xs"}):null,disabled:p,...r,...n.getInputProps(t)},n.key(t))});function Ue(){const t=Te(),[s,o]=_.useState("in_storage"),[a,r]=_.useState(null);return t.watch("storage_location_id",({value:d})=>{r(d)}),_.useEffect(()=>{if(t.setFieldValue("location_status",s),s==="in_storage"){const d=La("storage_location_id",t);Ta(d).then(({latitude:n,longitude:c})=>{t.setFieldValue("current_latitude",n),t.setFieldValue("current_longitude",c)})}},[s,a]),e.jsxs(V,{gap:"md",children:[e.jsx(Ia,{name:"photo_file_ids",title:"Photos",multiple:!0,description:"Upload photos of the inventory item"}),e.jsx(v,{title:"Basic Information",children:e.jsxs(i,{children:[e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(T,{name:"item_name",label:"Inventory Name",placeholder:"e.g. Safety Helmet, Office Chair",required:!0,description:"The name of the inventory item"})}),e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(T,{name:"item_code",label:"Item Code",placeholder:"e.g. INV-2024-001",required:!0,description:"Unique identifier for this item"})}),e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(O,{name:"item_category",label:"Category",placeholder:"Select category",required:!0,description:"Item classification",data:["Safety Equipment","Office Supplies","Tools & Equipment","Furniture","Electronics","Consumables","Raw Materials","Maintenance Supplies","Medical Supplies","Other"],searchable:!0,comboboxProps:{zIndex:2e3}})}),e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(O,{name:"condition_status",label:"Condition",required:!0,placeholder:"Select condition",description:"Current physical state",comboboxProps:{zIndex:2e3},data:["New","Excellent","Good","Fair","Used","Refurbished","Damaged","Needs Repair","Obsolete"]})}),e.jsx(i.Col,{span:12,children:e.jsx(ve,{name:"item_description",label:"Description",placeholder:"Detailed description of the item, specifications, or notes",autosize:!0,minRows:2,description:"Include any relevant specifications or features"})})]})}),e.jsx(v,{title:"Stock Management",children:e.jsxs(i,{children:[e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(G,{name:"quantity",label:"Current Quantity",placeholder:"0",required:!0,min:0,description:"Current stock on hand"})}),e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(O,{name:"quantity_uom",label:"Unit of Measurement",placeholder:"Select unit",required:!0,description:"How this item is measured",comboboxProps:{zIndex:2e3},data:[{value:"pcs",label:"Pieces (pcs)"},{value:"box",label:"Box"},{value:"carton",label:"Carton"},{value:"kg",label:"Kilograms (kg)"},{value:"g",label:"Grams (g)"},{value:"L",label:"Liters (L)"},{value:"mL",label:"Milliliters (mL)"},{value:"m",label:"Meters (m)"},{value:"cm",label:"Centimeters (cm)"},{value:"set",label:"Set"},{value:"unit",label:"Unit"},{value:"roll",label:"Roll"},{value:"pack",label:"Pack"}],searchable:!0})}),e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(G,{name:"minimum_stock_level",required:!0,label:"Minimum Stock Level",placeholder:"0",min:0,description:"Alert when stock falls below this level"})}),e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(G,{name:"reorder_level",label:"Reorder Level",placeholder:"0",min:0,description:"Trigger reorder at this quantity"})})]})}),e.jsx(v,{title:"Location & Assignment",children:e.jsxs(i,{children:[e.jsxs(i.Col,{span:{base:12,sm:6},children:[e.jsx(st,{required:!0,name:"storage_location_id",label:"Storage Location",placeholder:"e.g. Warehouse A, Shelf 3B, Room 205",description:"Physical location where item is stored",dataGetter:Ma}),e.jsx(R.Group,{name:"location_status",value:s,onChange:d=>o(d),mt:"md",children:e.jsxs(M,{children:[e.jsx(R,{label:"In Storage",value:"in_storage",description:"Item is currently stored"}),e.jsx(R,{label:"In Transit",value:"in_transit",description:"Item is currently being transported"})]})}),e.jsx(Aa,{in:s==="in_transit",children:e.jsxs(ba,{cols:2,mt:"md",children:[e.jsx(G,{required:!0,name:"current_latitude",label:"Current Latitude",placeholder:"e.g. -6.2088",description:"Current latitude coordinate",decimalScale:6}),e.jsx(G,{required:!0,name:"current_longitude",label:"Current Longitude",placeholder:"e.g. 106.8456",description:"Current longitude coordinate",decimalScale:6})]})})]}),e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(T,{name:"asset_tag",label:"Asset Tag",placeholder:"e.g. AT-2024-001",description:"Physical tag or barcode number"})}),e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(O,{name:"assigned_department",label:"Assigned Department",placeholder:"Select department",description:"Department responsible for this item",comboboxProps:{zIndex:2e3},data:["Operations","Maintenance","Safety","Administration","HR","IT","Finance","Procurement","Warehouse","Production","Quality Control","Unassigned"],searchable:!0})}),e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(T,{name:"assigned_personnel",label:"Assigned Personnel",placeholder:"e.g. John Doe",description:"Person responsible for this item"})})]})}),e.jsx(v,{title:"Additional Information",withHide:!0,children:e.jsxs(i,{children:[e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(T,{name:"manufacturer",label:"Manufacturer",placeholder:"e.g. 3M, ABC Corporation",description:"Company that manufactured the item"})}),e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(T,{name:"supplier",label:"Supplier",placeholder:"e.g. XYZ Trading Co.",description:"Vendor or supplier"})}),e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(H,{name:"purchase_date",label:"Purchase Date",placeholder:"Select date",description:"Date item was purchased",popoverProps:{zIndex:2e3}})}),e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(H,{name:"expiry_date",label:"Expiry Date",placeholder:"Select date",description:"Expiration or warranty end date",popoverProps:{zIndex:2e3}})})]})}),e.jsx(v,{title:"Compliance & Safety",withHide:!0,children:e.jsxs(i,{children:[e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(oe,{name:"inspection_required",label:"Inspection Required",description:"Item requires periodic inspection"})}),e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(oe,{name:"safety_data_sheet_available",label:"Safety Data Sheet Available",description:"SDS or MSDS on file"})}),e.jsx(i.Col,{span:{base:12,sm:4},children:e.jsx(H,{name:"last_inspection_date",label:"Last Inspection Date",placeholder:"Select date",description:"Most recent inspection",popoverProps:{zIndex:2e3}})}),e.jsx(i.Col,{span:{base:12,sm:4},children:e.jsx(H,{name:"next_inspection_due",label:"Next Inspection Due",placeholder:"Select date",description:"Upcoming inspection date",popoverProps:{zIndex:2e3}})}),e.jsx(i.Col,{span:{base:12,sm:4},children:e.jsx(H,{name:"certification_expiry_date",label:"Certification Expiry",placeholder:"Select date",description:"Certification expiration",popoverProps:{zIndex:2e3}})})]})}),e.jsx(v,{title:"Additional Information",withHide:!0,children:e.jsxs(i,{children:[e.jsx(i.Col,{span:{base:12,sm:6},children:e.jsx(oe,{name:"is_active",label:"Active Status",description:"Item is currently available"})}),e.jsx(i.Col,{span:12,children:e.jsx(ve,{name:"remarks",label:"Remarks",placeholder:"Any additional notes, special handling instructions, or observations",autosize:!0,minRows:2,description:"Internal notes and comments"})})]})}),e.jsx(wa,{name:"attachment_file_ids",label:"Attachments",multiple:!0,description:"Upload related documents (invoices, certificates, manuals, etc.)"})]})}function it({onSubmit:t}){const{mutate:s,isPending:o}=at(),a=Ae({mode:"controlled",validate:De(L),initialValues:{location_status:"in_storage",minimum_stock_level:0,is_active:!0}}),r=ze(),{fileIds:d,updateFilesMetadata:n}=r,c=a.onSubmit(u=>{s({variables:u},{onError:p=>Me(a,p),onSuccess:()=>{t(),n()}})});return e.jsx(Le,{form:a,onSubmit:c,children:e.jsx(Fe,{fileIdManager:r,children:e.jsxs(V,{children:[e.jsx(Ue,{}),e.jsx(M,{justify:"flex-end",children:e.jsx(Re,{onClick:()=>console.log(a.errors),type:"submit",loading:o,mt:"md",leftSection:e.jsx(Ea,{size:16,stroke:5}),children:"Add"})})]})})})}function nt({onSubmit:t,id:s}){const{mutate:o,isPending:a}=tt({route:{id:s}}),{data:r,isLoading:d}=He({route:{id:s}}),n=Ae({mode:"controlled",validate:De(L)});_.useEffect(()=>{r&&n.setValues(r)},[r]);const c=ze(),{fileIds:u,updateFilesMetadata:p}=c,g=n.onSubmit(f=>{o({variables:f},{onError:C=>Me(n,C),onSuccess:()=>{t(),p()}})});return d?e.jsx(Z,{color:"blue",size:"xl"}):e.jsx(Le,{form:n,onSubmit:g,children:e.jsx(Fe,{fileIdManager:c,children:e.jsxs(V,{children:[e.jsx(Ue,{}),e.jsx(M,{justify:"flex-end",children:e.jsx(Re,{type:"submit",onClick:()=>console.log(n.errors),loading:a,mt:"md",leftSection:e.jsx(qa,{size:16,stroke:2}),children:"Save"})})]})})})}function St(t){U.open({title:"Add new inventory",children:e.jsx(it,{onSubmit:()=>{t(),U.closeAll()}}),size:"75rem",zIndex:2e3,withCloseButton:!1})}function It(t,s){U.open({title:"Edit inventory",children:e.jsx(nt,{id:t,onSubmit:()=>{s(),U.closeAll()}}),size:"75rem",zIndex:2e3,withCloseButton:!1})}function wt(t){U.open({title:"View inventory",children:e.jsx(ot,{id:t}),size:"75rem",zIndex:2e3,withCloseButton:!1})}export{Xa as L,Ct as a,It as b,wt as c,St as o,_t as u};
