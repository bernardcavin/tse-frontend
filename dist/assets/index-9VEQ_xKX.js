import{d as P,k as D,r as m,m as R,j as t,T as x,i as E,l as w,n as z,p as C,B as L,o as y}from"./index-Cs1QGpHj.js";import{P as B}from"./page-C_mVyzI-.js";import{P as O}from"./page-header-Pj85psDd.js";import{D as r,A as q}from"./index-CY8caaxm.js";import{M as F}from"./file-upload-BU9PyXL0.js";import{u as Q,a as N,L as W,b as $,c as G,o as H}from"./inventory-modals-DkaGORe0.js";import{f as S}from"./date-8jB_5Z2p.js";import{Q as K}from"./index-v_Gpp433.js";import{c as n}from"./createReactComponent-KmZb_Ioo.js";import{S as V}from"./form-section-VrU0Dt0a.js";import"./Title-D3LlNLx-.js";import"./Anchor-DRzwfr6X.js";import"./index-BXCM-1Cx.js";import"./DatePickerInput-CNbSh6cR.js";import"./form-Bq269LHv.js";import"./IconUpload-DjZKR-T_.js";import"./IconX-BxrwEbeq.js";import"./IconCheck-CSBuqxYM.js";import"./facility-BTOuyy7U.js";import"./Popup-CTVrjNv8.js";import"./use-form-Ck_5WgAX.js";import"./facilities-1Za9HfM4.js";import"./text-area-DB6Bqw7_.js";import"./text-input-6xXlG_4y.js";import"./IconPlus-CjtzH_3A.js";/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var J=n("outline","briefcase","IconBriefcase",[["path",{d:"M3 7m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2",key:"svg-1"}],["path",{d:"M12 12l0 .01",key:"svg-2"}],["path",{d:"M3 13a20 20 0 0 0 18 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var U=n("outline","building-warehouse","IconBuildingWarehouse",[["path",{d:"M3 21v-13l9 -4l9 4v13",key:"svg-0"}],["path",{d:"M13 13h4v8h-10v-6h6",key:"svg-1"}],["path",{d:"M13 21v-9a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1v3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var j=n("outline","category","IconCategory",[["path",{d:"M4 4h6v6h-6z",key:"svg-0"}],["path",{d:"M14 4h6v6h-6z",key:"svg-1"}],["path",{d:"M4 14h6v6h-6z",key:"svg-2"}],["path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var X=n("outline","device-desktop","IconDeviceDesktop",[["path",{d:"M3 5a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10z",key:"svg-0"}],["path",{d:"M7 20h10",key:"svg-1"}],["path",{d:"M9 16v4",key:"svg-2"}],["path",{d:"M15 16v4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y=n("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z=n("outline","first-aid-kit","IconFirstAidKit",[["path",{d:"M8 8v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2",key:"svg-0"}],["path",{d:"M4 8m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-1"}],["path",{d:"M10 14h4",key:"svg-2"}],["path",{d:"M12 12v4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _=n("outline","package","IconPackage",[["path",{d:"M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M16 5.25l-8 4.5",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ee=n("outline","shield-check","IconShieldCheck",[["path",{d:"M11.46 20.846a12 12 0 0 1 -7.96 -14.846a12 12 0 0 0 8.5 -3a12 12 0 0 0 8.5 3a12 12 0 0 1 -.09 7.06",key:"svg-0"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var te=n("outline","shopping-cart","IconShoppingCart",[["path",{d:"M6 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M17 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M17 17h-11v-14h-2",key:"svg-2"}],["path",{d:"M6 5l14 1l-1 7h-13",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ae=n("outline","sofa","IconSofa",[["path",{d:"M4 11a2 2 0 0 1 2 2v1h12v-1a2 2 0 1 1 4 0v5a1 1 0 0 1 -1 1h-18a1 1 0 0 1 -1 -1v-5a2 2 0 0 1 2 -2z",key:"svg-0"}],["path",{d:"M4 11v-3a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v3",key:"svg-1"}],["path",{d:"M12 5v9",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oe=n("outline","tool","IconTool",[["path",{d:"M7 10h3v-3l-3.5 -3.5a6 6 0 0 1 8 8l6 6a2 2 0 0 1 -3 3l-6 -6a6 6 0 0 1 -8 -8l3.5 3.5",key:"svg-0"}]]);function ne({category:o}){const{user:i}=P(),u=(i==null?void 0:i.role)==="MANAGER",{page:v,limit:p,setLimit:f,setPage:g}=D(),{filters:d,sort:l}=r.useDataTable({sortConfig:{direction:"asc",column:"item_name"}}),{data:s,isLoading:a,refetch:c}=Q({query:{page:v,limit:p,sort:l.query}}),k=m.useMemo(()=>s!=null&&s.data?o?s.data.filter(e=>e.item_category===o):s.data:[],[s==null?void 0:s.data,o]),{mutate:b}=N(),I=m.useCallback(e=>{R.openConfirmModal({title:"Delete Inventory",children:"Are you sure you want to delete this inventory?",confirmProps:{color:"red"},labels:{confirm:"Delete",cancel:"Cancel"},onConfirm:()=>{b({route:{id:e}}),c()}})},[b,c]),A=m.useMemo(()=>[{accessor:"photo_file_ids",title:"Photo",textAlign:"center",width:300,render:({photo_file_ids:e})=>e!=null&&e.length?t.jsx(F,{file_ids:e,alt:"Inventory Photo",thumbnailWidth:80,thumbnailHeight:80,enlarge:!1}):t.jsx(x,{children:"No Photo"})},{accessor:"item_name",title:"Inventory",sortable:!0},{accessor:"item_code",title:"Code",sortable:!0},{accessor:"manufacturer",title:"Manufacturer",sortable:!0},...o?[]:[{accessor:"item_category",title:"Category",sortable:!0}],{accessor:"quantity",title:"Quantity",sortable:!0,render:({quantity:e,quantity_uom:h})=>`${e} ${h}`},{accessor:"minimum_stock_level",title:"Min. Stock",sortable:!0,render:({quantity:e,minimum_stock_level:h})=>e<h?`${h} (Out of Stock)`:h},{accessor:"condition_status",title:"Condition",sortable:!0},{accessor:"last_inspection_date",title:"Last Inspection",sortable:!0,render:({last_inspection_date:e})=>e?S(e):"-"},{accessor:"next_inspection_due",title:"Next Inspection",sortable:!0,render:({next_inspection_due:e})=>e?S(e):"-"},{accessor:"storage_location",title:"Storage Location",sortable:!0,render:({storage_location:e})=>(e==null?void 0:e.facility_name)??"-"},{accessor:"location_status",title:"Status",width:120,render:({location_status:e})=>t.jsx(W,{value:e})},{accessor:"id",title:"QR Code",render:({id:e})=>e?t.jsx(K,{value:e}):t.jsx(x,{children:"No QR Code"})},{accessor:"actions",title:"Actions",textAlign:"right",width:130,render:e=>t.jsx(r.Actions,{onEdit:()=>$(e.id,c),onView:()=>G(e.id),onDelete:u?()=>I(e.id):void 0})}],[u,I,o]),T=E.inventory;return t.jsxs(r.Container,{children:[t.jsx(r.Title,{icon:t.jsx(T,{size:25}),title:o?`${o}`:"All Inventory",actions:t.jsx(q,{variant:"default",size:"xs",onClick:()=>H(c),children:"Add Inventory"})}),t.jsx(r.Filters,{filters:d.filters,onClear:d.clear}),t.jsx(r.Content,{children:t.jsx(r.Table,{striped:!0,minHeight:240,noRecordsText:r.noRecordsText("inventory"),recordsPerPageLabel:r.recordsPerPageLabel("inventory"),paginationText:r.paginationText("inventory"),page:v,records:k,fetching:a,onPageChange:g,recordsPerPage:p,totalRecords:k.length,onRecordsPerPageChange:f,recordsPerPageOptions:[5,15,30],sortStatus:l.status,onSortStatusChange:l.change,columns:A,pinLastColumn:!0,pinFirstColumn:!0,highlightOnHover:!0})})]})}const M=[{value:"all",label:"All Categories",icon:j},{value:"Safety Equipment",label:"Safety Equipment",icon:ee},{value:"Office Supplies",label:"Office Supplies",icon:J},{value:"Tools & Equipment",label:"Tools & Equipment",icon:oe},{value:"Furniture",label:"Furniture",icon:ae},{value:"Electronics",label:"Electronics",icon:X},{value:"Consumables",label:"Consumables",icon:te},{value:"Raw Materials",label:"Raw Materials",icon:_},{value:"Maintenance Supplies",label:"Maintenance",icon:U},{value:"Medical Supplies",label:"Medical Supplies",icon:Z},{value:"Other",label:"Other",icon:Y}];function De(){const{user:o}=P(),[i,u]=m.useState("all"),v=w(),p=z(`(max-width: ${v.breakpoints.md})`),g=[{label:"Inventory",href:(o==null?void 0:o.role)==="MANAGER"?C.manager.inventory:C.employee.inventory},{label:"List"}],d=a=>{a&&u(a)},l=M.find(a=>a.value===i),s=(l==null?void 0:l.icon)||j;return t.jsxs(B,{title:"Inventory",children:[t.jsx(O,{title:"Inventory",breadcrumbs:g}),p?t.jsx(L,{mb:"lg",children:t.jsx(V,{value:i,onChange:d,data:M.map(a=>({value:a.value,label:a.label})),leftSection:t.jsx(s,{size:18}),size:"md",styles:{input:{fontWeight:500}}})}):t.jsx(y,{value:i,onChange:d,variant:"pills",mb:"lg",styles:{root:{overflow:"auto",paddingBottom:"4px"},list:{flexWrap:"nowrap",gap:"0.5rem",paddingBottom:"4px"},tab:{transition:"all 0.2s ease","&[data-active]":{boxShadow:v.shadows.sm}}},children:t.jsx(y.List,{children:M.map(a=>{const c=a.icon;return t.jsx(y.Tab,{value:a.value,leftSection:t.jsx(c,{size:16}),children:a.label},a.value)})})}),t.jsx(ne,{category:i==="all"?void 0:i})]})}export{De as default};
