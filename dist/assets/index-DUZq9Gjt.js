import{aP as Z,R as g,aT as E,aR as Ut,aU as Gt,aV as qt,aW as Mr,aX as Hr,aY as oe,aZ as it,a_ as ee,a$ as M,b0 as Yt,b1 as ot,b2 as Se,r as $,b3 as Zt,b4 as Xt,b5 as te,b6 as se,b7 as Kr,b8 as Qt,b9 as Vr,ba as he,bb as Jt,bc as ge,bd as er,be as tr,bf as rr,bg as Wr,bh as Re,bi as Tt,bj as ze,bk as nr,bl as ar,bm as Ur,bn as Lt,bo as Gr,bp as ir,bq as or,br as Xe,bs as qr,bt as Yr,j as i,f as st,u as lt,M as sr,as as ct,a as lr,bu as cr,q as Zr,g as le,bv as Xr,B as ur,bw as dr,bx as Qr,by as Jr,bz as en,bA as pr,bB as fr,c as hr,t as Et,aO as mr,d as ut,S as I,h as tn,aE as ke,N as G,T as z,a6 as rn,bC as nn,e as dt,a5 as pt,aF as an,aA as Ze,m as ce,V as ve,k as on,i as sn,p as Dt}from"./index-CmhbjPjL.js";import{P as ln}from"./page-CiT-vqZS.js";import{P as cn}from"./page-header-BqsRdy4n.js";import{a as un,I as dn,b as pn,H as fn,c as hn,d as ft,e as mn,f as vn,g as bn,u as yn,h as gn}from"./hazard-observations--NcQb3vq.js";import{c as vr}from"./createReactComponent-THD73P8V.js";import{I as br}from"./IconCheck-JgPS92qM.js";import{G as N,D as xn,c as ie}from"./DatePickerInput-OySF6iNo.js";import{T as Ce}from"./Title-D6G9RZ3D.js";import{D as J,A as An}from"./index-DMEh2Hzu.js";import{F as B,T as Qe,S as jn}from"./form-section-GeMPp3r4.js";import{a as Pn}from"./facilities-CZL7g1Qg.js";import{h as ht,F as mt}from"./form-KjzP4TW-.js";import{n as On}from"./date-CvsIFdJd.js";import{u as vt,z as bt}from"./use-form-C-_z4Aq1.js";import{I as _n,a as kn,D as Sn}from"./facility-BQOUZ1Gj.js";import"./Anchor-BMd9EUmI.js";import"./index-CvD6Kpn8.js";var wn=["points","className","baseLinePoints","connectNulls"];function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},xe.apply(this,arguments)}function Tn(e,r){if(e==null)return{};var n=Ln(e,r),t,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function Ln(e,r){if(e==null)return{};var n={};for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){if(r.indexOf(t)>=0)continue;n[t]=e[t]}return n}function It(e){return Rn(e)||In(e)||Dn(e)||En()}function En(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dn(e,r){if(e){if(typeof e=="string")return Je(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,r)}}function In(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rn(e){if(Array.isArray(e))return Je(e)}function Je(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var Rt=function(r){return r&&r.x===+r.x&&r.y===+r.y},Cn=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return r.forEach(function(t){Rt(t)?n[n.length-1].push(t):n[n.length-1].length>0&&n.push([])}),Rt(r[0])&&n[n.length-1].push(r[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},we=function(r,n){var t=Cn(r);n&&(t=[t.reduce(function(s,o){return[].concat(It(s),It(o))},[])]);var a=t.map(function(s){return s.reduce(function(o,c,d){return"".concat(o).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return t.length===1?"".concat(a,"Z"):a},zn=function(r,n,t){var a=we(r,t);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(we(n.reverse(),t).slice(1))},$n=function(r){var n=r.points,t=r.className,a=r.baseLinePoints,s=r.connectNulls,o=Tn(r,wn);if(!n||!n.length)return null;var c=Z("recharts-polygon",t);if(a&&a.length){var d=o.stroke&&o.stroke!=="none",l=zn(n,a,s);return g.createElement("g",{className:c},g.createElement("path",xe({},E(o,!0),{fill:l.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:l})),d?g.createElement("path",xe({},E(o,!0),{fill:"none",d:we(n,s)})):null,d?g.createElement("path",xe({},E(o,!0),{fill:"none",d:we(a,s)})):null)}var f=we(n,s);return g.createElement("path",xe({},E(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:c,d:f}))},Nn=Gt,Fn=Mr,Bn=qt;function Mn(e,r){return e&&e.length?Nn(e,Bn(r),Fn):void 0}var Hn=Mn;const Kn=Ut(Hn);var Vn=Gt,Wn=qt,Un=Hr;function Gn(e,r){return e&&e.length?Vn(e,Wn(r),Un):void 0}var qn=Gn;const Yn=Ut(qn);var Zn=["cx","cy","angle","ticks","axisLine"],Xn=["ticks","tick","angle","tickFormatter","stroke"];function je(e){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},je(e)}function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},Te.apply(this,arguments)}function Ct(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,t)}return n}function pe(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Ct(Object(n),!0).forEach(function(t){He(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function zt(e,r){if(e==null)return{};var n=Qn(e,r),t,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function Qn(e,r){if(e==null)return{};var n={};for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){if(r.indexOf(t)>=0)continue;n[t]=e[t]}return n}function Jn(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function $t(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,gr(t.key),t)}}function ea(e,r,n){return r&&$t(e.prototype,r),n&&$t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ta(e,r,n){return r=Ne(r),ra(e,yr()?Reflect.construct(r,n||[],Ne(e).constructor):r.apply(e,n))}function ra(e,r){if(r&&(je(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return na(e)}function na(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yr=function(){return!!e})()}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ne(e)}function aa(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&et(e,r)}function et(e,r){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},et(e,r)}function He(e,r,n){return r=gr(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function gr(e){var r=ia(e,"string");return je(r)=="symbol"?r:r+""}function ia(e,r){if(je(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var t=n.call(e,r||"default");if(je(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Ke=function(e){function r(){return Jn(this,r),ta(this,r,arguments)}return aa(r,e),ea(r,[{key:"getTickValueCoord",value:function(t){var a=t.coordinate,s=this.props,o=s.angle,c=s.cx,d=s.cy;return ee(c,d,a,o)}},{key:"getTickTextAnchor",value:function(){var t=this.props.orientation,a;switch(t){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var t=this.props,a=t.cx,s=t.cy,o=t.angle,c=t.ticks,d=Kn(c,function(f){return f.coordinate||0}),l=Yn(c,function(f){return f.coordinate||0});return{cx:a,cy:s,startAngle:o,endAngle:o,innerRadius:l.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var t=this.props,a=t.cx,s=t.cy,o=t.angle,c=t.ticks,d=t.axisLine,l=zt(t,Zn),f=c.reduce(function(u,p){return[Math.min(u[0],p.coordinate),Math.max(u[1],p.coordinate)]},[1/0,-1/0]),h=ee(a,s,f[0],o),v=ee(a,s,f[1],o),y=pe(pe(pe({},E(l,!1)),{},{fill:"none"},E(d,!1)),{},{x1:h.x,y1:h.y,x2:v.x,y2:v.y});return g.createElement("line",Te({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var t=this,a=this.props,s=a.ticks,o=a.tick,c=a.angle,d=a.tickFormatter,l=a.stroke,f=zt(a,Xn),h=this.getTickTextAnchor(),v=E(f,!1),y=E(o,!1),u=s.map(function(p,x){var m=t.getTickValueCoord(p),b=pe(pe(pe(pe({textAnchor:h,transform:"rotate(".concat(90-c,", ").concat(m.x,", ").concat(m.y,")")},v),{},{stroke:"none",fill:l},y),{},{index:x},m),{},{payload:p});return g.createElement(M,Te({className:Z("recharts-polar-radius-axis-tick",Yt(o)),key:"tick-".concat(p.coordinate)},ot(t.props,p,x)),r.renderTickItem(o,b,d?d(p.value,x):p.value))});return g.createElement(M,{className:"recharts-polar-radius-axis-ticks"},u)}},{key:"render",value:function(){var t=this.props,a=t.ticks,s=t.axisLine,o=t.tick;return!a||!a.length?null:g.createElement(M,{className:Z("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Se.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(t,a,s){var o;return g.isValidElement(t)?o=g.cloneElement(t,a):oe(t)?o=t(a):o=g.createElement(it,Te({},a,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}($.PureComponent);He(Ke,"displayName","PolarRadiusAxis");He(Ke,"axisType","radiusAxis");He(Ke,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Pe(e){"@babel/helpers - typeof";return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Pe(e)}function me(){return me=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},me.apply(this,arguments)}function Nt(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,t)}return n}function fe(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Nt(Object(n),!0).forEach(function(t){Ve(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oa(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Ft(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,Ar(t.key),t)}}function sa(e,r,n){return r&&Ft(e.prototype,r),n&&Ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function la(e,r,n){return r=Fe(r),ca(e,xr()?Reflect.construct(r,n||[],Fe(e).constructor):r.apply(e,n))}function ca(e,r){if(r&&(Pe(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ua(e)}function ua(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xr=function(){return!!e})()}function Fe(e){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fe(e)}function da(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&tt(e,r)}function tt(e,r){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},tt(e,r)}function Ve(e,r,n){return r=Ar(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function Ar(e){var r=pa(e,"string");return Pe(r)=="symbol"?r:r+""}function pa(e,r){if(Pe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var t=n.call(e,r||"default");if(Pe(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var fa=Math.PI/180,Bt=1e-5,We=function(e){function r(){return oa(this,r),la(this,r,arguments)}return da(r,e),sa(r,[{key:"getTickLineCoord",value:function(t){var a=this.props,s=a.cx,o=a.cy,c=a.radius,d=a.orientation,l=a.tickSize,f=l||8,h=ee(s,o,c,t.coordinate),v=ee(s,o,c+(d==="inner"?-1:1)*f,t.coordinate);return{x1:h.x,y1:h.y,x2:v.x,y2:v.y}}},{key:"getTickTextAnchor",value:function(t){var a=this.props.orientation,s=Math.cos(-t.coordinate*fa),o;return s>Bt?o=a==="outer"?"start":"end":s<-Bt?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var t=this.props,a=t.cx,s=t.cy,o=t.radius,c=t.axisLine,d=t.axisLineType,l=fe(fe({},E(this.props,!1)),{},{fill:"none"},E(c,!1));if(d==="circle")return g.createElement(Zt,me({className:"recharts-polar-angle-axis-line"},l,{cx:a,cy:s,r:o}));var f=this.props.ticks,h=f.map(function(v){return ee(a,s,o,v.coordinate)});return g.createElement($n,me({className:"recharts-polar-angle-axis-line"},l,{points:h}))}},{key:"renderTicks",value:function(){var t=this,a=this.props,s=a.ticks,o=a.tick,c=a.tickLine,d=a.tickFormatter,l=a.stroke,f=E(this.props,!1),h=E(o,!1),v=fe(fe({},f),{},{fill:"none"},E(c,!1)),y=s.map(function(u,p){var x=t.getTickLineCoord(u),m=t.getTickTextAnchor(u),b=fe(fe(fe({textAnchor:m},f),{},{stroke:"none",fill:l},h),{},{index:p,payload:u,x:x.x2,y:x.y2});return g.createElement(M,me({className:Z("recharts-polar-angle-axis-tick",Yt(o)),key:"tick-".concat(u.coordinate)},ot(t.props,u,p)),c&&g.createElement("line",me({className:"recharts-polar-angle-axis-tick-line"},v,x)),o&&r.renderTickItem(o,b,d?d(u.value,p):u.value))});return g.createElement(M,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var t=this.props,a=t.ticks,s=t.radius,o=t.axisLine;return s<=0||!a||!a.length?null:g.createElement(M,{className:Z("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(t,a,s){var o;return g.isValidElement(t)?o=g.cloneElement(t,a):oe(t)?o=t(a):o=g.createElement(it,me({},a,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}($.PureComponent);Ve(We,"displayName","PolarAngleAxis");Ve(We,"axisType","angleAxis");Ve(We,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var $e;function Oe(e){"@babel/helpers - typeof";return Oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Oe(e)}function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},Ae.apply(this,arguments)}function Mt(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,t)}return n}function w(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Mt(Object(n),!0).forEach(function(t){q(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ha(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Ht(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,Pr(t.key),t)}}function ma(e,r,n){return r&&Ht(e.prototype,r),n&&Ht(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function va(e,r,n){return r=Be(r),ba(e,jr()?Reflect.construct(r,n||[],Be(e).constructor):r.apply(e,n))}function ba(e,r){if(r&&(Oe(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ya(e)}function ya(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jr=function(){return!!e})()}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Be(e)}function ga(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&rt(e,r)}function rt(e,r){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},rt(e,r)}function q(e,r,n){return r=Pr(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function Pr(e){var r=xa(e,"string");return Oe(r)=="symbol"?r:r+""}function xa(e,r){if(Oe(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var t=n.call(e,r||"default");if(Oe(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var re=function(e){function r(n){var t;return ha(this,r),t=va(this,r,[n]),q(t,"pieRef",null),q(t,"sectorRefs",[]),q(t,"id",nr("recharts-pie-")),q(t,"handleAnimationEnd",function(){var a=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),oe(a)&&a()}),q(t,"handleAnimationStart",function(){var a=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),oe(a)&&a()}),t.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},t}return ga(r,e),ma(r,[{key:"isActiveIndex",value:function(t){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(t)!==-1:t===a}},{key:"hasActiveIndex",value:function(){var t=this.props.activeIndex;return Array.isArray(t)?t.length!==0:t||t===0}},{key:"renderLabels",value:function(t){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,c=s.labelLine,d=s.dataKey,l=s.valueKey,f=E(this.props,!1),h=E(o,!1),v=E(c,!1),y=o&&o.offsetRadius||20,u=t.map(function(p,x){var m=(p.startAngle+p.endAngle)/2,b=ee(p.cx,p.cy,p.outerRadius+y,m),A=w(w(w(w({},f),p),{},{stroke:"none"},h),{},{index:x,textAnchor:r.getTextAnchor(b.x,p.cx)},b),O=w(w(w(w({},f),p),{},{fill:"none",stroke:p.fill},v),{},{index:x,points:[ee(p.cx,p.cy,p.outerRadius,m),b]}),j=d;return te(d)&&te(l)?j="value":te(d)&&(j=l),g.createElement(M,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},c&&r.renderLabelLineItem(c,O,"line"),r.renderLabelItem(o,A,se(p,j)))});return g.createElement(M,{className:"recharts-pie-labels"},u)}},{key:"renderSectorsStatically",value:function(t){var a=this,s=this.props,o=s.activeShape,c=s.blendStroke,d=s.inactiveShape;return t.map(function(l,f){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&t.length!==1)return null;var h=a.isActiveIndex(f),v=d&&a.hasActiveIndex()?d:null,y=h?o:v,u=w(w({},l),{},{stroke:c?l.fill:l.stroke,tabIndex:-1});return g.createElement(M,Ae({ref:function(x){x&&!a.sectorRefs.includes(x)&&a.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},ot(a.props,l,f),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(f)}),g.createElement(Kr,Ae({option:y,isActive:h,shapeType:"sector"},u)))})}},{key:"renderSectorsWithAnimation",value:function(){var t=this,a=this.props,s=a.sectors,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,l=a.animationEasing,f=a.animationId,h=this.state,v=h.prevSectors,y=h.prevIsAnimationActive;return g.createElement(Qt,{begin:c,duration:d,isActive:o,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(y),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(u){var p=u.t,x=[],m=s&&s[0],b=m.startAngle;return s.forEach(function(A,O){var j=v&&v[O],P=O>0?Vr(A,"paddingAngle",0):0;if(j){var k=he(j.endAngle-j.startAngle,A.endAngle-A.startAngle),_=w(w({},A),{},{startAngle:b+P,endAngle:b+k(p)+P});x.push(_),b=_.endAngle}else{var D=A.endAngle,L=A.startAngle,F=he(0,D-L),T=F(p),R=w(w({},A),{},{startAngle:b+P,endAngle:b+T+P});x.push(R),b=R.endAngle}}),g.createElement(M,null,t.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(t){var a=this;t.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var c=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[c].focus(),a.setState({sectorToFocus:c});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var t=this.props,a=t.sectors,s=t.isAnimationActive,o=this.state.prevSectors;return s&&a&&a.length&&(!o||!Jt(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var t=this,a=this.props,s=a.hide,o=a.sectors,c=a.className,d=a.label,l=a.cx,f=a.cy,h=a.innerRadius,v=a.outerRadius,y=a.isAnimationActive,u=this.state.isAnimationFinished;if(s||!o||!o.length||!ge(l)||!ge(f)||!ge(h)||!ge(v))return null;var p=Z("recharts-pie",c);return g.createElement(M,{tabIndex:this.props.rootTabIndex,className:p,ref:function(m){t.pieRef=m}},this.renderSectors(),d&&this.renderLabels(o),Se.renderCallByParent(this.props,null,!1),(!y||u)&&er.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(t,a){return a.prevIsAnimationActive!==t.isAnimationActive?{prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,curSectors:t.sectors,prevSectors:[],isAnimationFinished:!0}:t.isAnimationActive&&t.animationId!==a.prevAnimationId?{prevAnimationId:t.animationId,curSectors:t.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:t.sectors!==a.curSectors?{curSectors:t.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(t,a){return t>a?"start":t<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(t,a,s){if(g.isValidElement(t))return g.cloneElement(t,a);if(oe(t))return t(a);var o=Z("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return g.createElement(Xt,Ae({},a,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(t,a,s){if(g.isValidElement(t))return g.cloneElement(t,a);var o=s;if(oe(t)&&(o=t(a),g.isValidElement(o)))return o;var c=Z("recharts-pie-label-text",typeof t!="boolean"&&!oe(t)?t.className:"");return g.createElement(it,Ae({},a,{alignmentBaseline:"middle",className:c}),o)}}])}($.PureComponent);$e=re;q(re,"displayName","Pie");q(re,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!tr.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});q(re,"parseDeltaAngle",function(e,r){var n=ze(r-e),t=Math.min(Math.abs(r-e),360);return n*t});q(re,"getRealPieData",function(e){var r=e.data,n=e.children,t=E(e,!1),a=rr(n,ar);return r&&r.length?r.map(function(s,o){return w(w(w({payload:s},t),s),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(s){return w(w({},t),s.props)}):[]});q(re,"parseCoordinateOfPie",function(e,r){var n=r.top,t=r.left,a=r.width,s=r.height,o=Wr(a,s),c=t+Re(e.cx,a,a/2),d=n+Re(e.cy,s,s/2),l=Re(e.innerRadius,o,0),f=Re(e.outerRadius,o,o*.8),h=e.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:d,innerRadius:l,outerRadius:f,maxRadius:h}});q(re,"getComposedData",function(e){var r=e.item,n=e.offset,t=r.type.defaultProps!==void 0?w(w({},r.type.defaultProps),r.props):r.props,a=$e.getRealPieData(t);if(!a||!a.length)return null;var s=t.cornerRadius,o=t.startAngle,c=t.endAngle,d=t.paddingAngle,l=t.dataKey,f=t.nameKey,h=t.valueKey,v=t.tooltipType,y=Math.abs(t.minAngle),u=$e.parseCoordinateOfPie(t,n),p=$e.parseDeltaAngle(o,c),x=Math.abs(p),m=l;te(l)&&te(h)?(Tt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),m="value"):te(l)&&(Tt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),m=h);var b=a.filter(function(_){return se(_,m,0)!==0}).length,A=(x>=360?b:b-1)*d,O=x-b*y-A,j=a.reduce(function(_,D){var L=se(D,m,0);return _+(ge(L)?L:0)},0),P;if(j>0){var k;P=a.map(function(_,D){var L=se(_,m,0),F=se(_,f,D),T=(ge(L)?L:0)/j,R;D?R=k.endAngle+ze(p)*d*(L!==0?1:0):R=o;var V=R+ze(p)*((L!==0?y:0)+T*O),W=(R+V)/2,H=(u.innerRadius+u.outerRadius)/2,ue=[{name:F,value:L,payload:_,dataKey:m,type:v}],U=ee(u.cx,u.cy,H,W);return k=w(w(w({percent:T,cornerRadius:s,name:F,tooltipPayload:ue,midAngle:W,middleRadius:H,tooltipPosition:U},_),u),{},{value:se(_,m),startAngle:R,endAngle:V,payload:_,paddingAngle:ze(p)*d}),k})}return w(w({},u),{},{sectors:P,data:a})});var Aa=["type","layout","connectNulls","ref"],ja=["key"];function _e(e){"@babel/helpers - typeof";return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_e(e)}function Kt(e,r){if(e==null)return{};var n=Pa(e,r),t,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function Pa(e,r){if(e==null)return{};var n={};for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){if(r.indexOf(t)>=0)continue;n[t]=e[t]}return n}function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},Le.apply(this,arguments)}function Vt(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,t)}return n}function K(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Vt(Object(n),!0).forEach(function(t){Y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ye(e){return Sa(e)||ka(e)||_a(e)||Oa()}function Oa(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _a(e,r){if(e){if(typeof e=="string")return nt(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,r)}}function ka(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Sa(e){if(Array.isArray(e))return nt(e)}function nt(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function wa(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Wt(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,_r(t.key),t)}}function Ta(e,r,n){return r&&Wt(e.prototype,r),n&&Wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function La(e,r,n){return r=Me(r),Ea(e,Or()?Reflect.construct(r,n||[],Me(e).constructor):r.apply(e,n))}function Ea(e,r){if(r&&(_e(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Da(e)}function Da(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Or(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Or=function(){return!!e})()}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Me(e)}function Ia(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&at(e,r)}function at(e,r){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},at(e,r)}function Y(e,r,n){return r=_r(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function _r(e){var r=Ra(e,"string");return _e(r)=="symbol"?r:r+""}function Ra(e,r){if(_e(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var t=n.call(e,r||"default");if(_e(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Ee=function(e){function r(){var n;wa(this,r);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return n=La(this,r,[].concat(a)),Y(n,"state",{isAnimationFinished:!0,totalLength:0}),Y(n,"generateSimpleStrokeDasharray",function(o,c){return"".concat(c,"px ").concat(o-c,"px")}),Y(n,"getStrokeDasharray",function(o,c,d){var l=d.reduce(function(m,b){return m+b});if(!l)return n.generateSimpleStrokeDasharray(c,o);for(var f=Math.floor(o/l),h=o%l,v=c-o,y=[],u=0,p=0;u<d.length;p+=d[u],++u)if(p+d[u]>h){y=[].concat(ye(d.slice(0,u)),[h-p]);break}var x=y.length%2===0?[0,v]:[v];return[].concat(ye(r.repeat(d,f)),ye(y),x).map(function(m){return"".concat(m,"px")}).join(", ")}),Y(n,"id",nr("recharts-line-")),Y(n,"pathRef",function(o){n.mainCurve=o}),Y(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Y(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Ia(r,e),Ta(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var t=this.getTotalLength();this.setState({totalLength:t})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var t=this.getTotalLength();t!==this.state.totalLength&&this.setState({totalLength:t})}}},{key:"getTotalLength",value:function(){var t=this.mainCurve;try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(t,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,c=s.xAxis,d=s.yAxis,l=s.layout,f=s.children,h=rr(f,Gr);if(!h)return null;var v=function(p,x){return{x:p.x,y:p.y,value:p.value,errorVal:se(p.payload,x)}},y={clipPath:t?"url(#clipPath-".concat(a,")"):null};return g.createElement(M,y,h.map(function(u){return g.cloneElement(u,{key:"bar-".concat(u.props.dataKey),data:o,xAxis:c,yAxis:d,layout:l,dataPointFormatter:v})}))}},{key:"renderDots",value:function(t,a,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var c=this.props,d=c.dot,l=c.points,f=c.dataKey,h=E(this.props,!1),v=E(d,!0),y=l.map(function(p,x){var m=K(K(K({key:"dot-".concat(x),r:3},h),v),{},{value:p.value,dataKey:f,cx:p.x,cy:p.y,index:x,payload:p.payload});return r.renderDotItem(d,m)}),u={clipPath:t?"url(#clipPath-".concat(a?"":"dots-").concat(s,")"):null};return g.createElement(M,Le({className:"recharts-line-dots",key:"dots"},u),y)}},{key:"renderCurveStatically",value:function(t,a,s,o){var c=this.props,d=c.type,l=c.layout,f=c.connectNulls;c.ref;var h=Kt(c,Aa),v=K(K(K({},E(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(s,")"):null,points:t},o),{},{type:d,layout:l,connectNulls:f});return g.createElement(Xt,Le({},v,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(t,a){var s=this,o=this.props,c=o.points,d=o.strokeDasharray,l=o.isAnimationActive,f=o.animationBegin,h=o.animationDuration,v=o.animationEasing,y=o.animationId,u=o.animateNewValues,p=o.width,x=o.height,m=this.state,b=m.prevPoints,A=m.totalLength;return g.createElement(Qt,{begin:f,duration:h,isActive:l,easing:v,from:{t:0},to:{t:1},key:"line-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(O){var j=O.t;if(b){var P=b.length/c.length,k=c.map(function(T,R){var V=Math.floor(R*P);if(b[V]){var W=b[V],H=he(W.x,T.x),ue=he(W.y,T.y);return K(K({},T),{},{x:H(j),y:ue(j)})}if(u){var U=he(p*2,T.x),ne=he(x/2,T.y);return K(K({},T),{},{x:U(j),y:ne(j)})}return K(K({},T),{},{x:T.x,y:T.y})});return s.renderCurveStatically(k,t,a)}var _=he(0,A),D=_(j),L;if(d){var F="".concat(d).split(/[,\s]+/gim).map(function(T){return parseFloat(T)});L=s.getStrokeDasharray(D,A,F)}else L=s.generateSimpleStrokeDasharray(A,D);return s.renderCurveStatically(c,t,a,{strokeDasharray:L})})}},{key:"renderCurve",value:function(t,a){var s=this.props,o=s.points,c=s.isAnimationActive,d=this.state,l=d.prevPoints,f=d.totalLength;return c&&o&&o.length&&(!l&&f>0||!Jt(l,o))?this.renderCurveWithAnimation(t,a):this.renderCurveStatically(o,t,a)}},{key:"render",value:function(){var t,a=this.props,s=a.hide,o=a.dot,c=a.points,d=a.className,l=a.xAxis,f=a.yAxis,h=a.top,v=a.left,y=a.width,u=a.height,p=a.isAnimationActive,x=a.id;if(s||!c||!c.length)return null;var m=this.state.isAnimationFinished,b=c.length===1,A=Z("recharts-line",d),O=l&&l.allowDataOverflow,j=f&&f.allowDataOverflow,P=O||j,k=te(x)?this.id:x,_=(t=E(o,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},D=_.r,L=D===void 0?3:D,F=_.strokeWidth,T=F===void 0?2:F,R=Ur(o)?o:{},V=R.clipDot,W=V===void 0?!0:V,H=L*2+T;return g.createElement(M,{className:A},O||j?g.createElement("defs",null,g.createElement("clipPath",{id:"clipPath-".concat(k)},g.createElement("rect",{x:O?v:v-y/2,y:j?h:h-u/2,width:O?y:y*2,height:j?u:u*2})),!W&&g.createElement("clipPath",{id:"clipPath-dots-".concat(k)},g.createElement("rect",{x:v-H/2,y:h-H/2,width:y+H,height:u+H}))):null,!b&&this.renderCurve(P,k),this.renderErrorBar(P,k),(b||o)&&this.renderDots(P,W,k),(!p||m)&&er.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(t,a){return t.animationId!==a.prevAnimationId?{prevAnimationId:t.animationId,curPoints:t.points,prevPoints:a.curPoints}:t.points!==a.curPoints?{curPoints:t.points}:null}},{key:"repeat",value:function(t,a){for(var s=t.length%2!==0?[].concat(ye(t),[0]):t,o=[],c=0;c<a;++c)o=[].concat(ye(o),ye(s));return o}},{key:"renderDotItem",value:function(t,a){var s;if(g.isValidElement(t))s=g.cloneElement(t,a);else if(oe(t))s=t(a);else{var o=a.key,c=Kt(a,ja),d=Z("recharts-line-dot",typeof t!="boolean"?t.className:"");s=g.createElement(Zt,Le({key:o},c,{className:d}))}return s}}])}($.PureComponent);Y(Ee,"displayName","Line");Y(Ee,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!tr.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Y(Ee,"getComposedData",function(e){var r=e.props,n=e.xAxis,t=e.yAxis,a=e.xAxisTicks,s=e.yAxisTicks,o=e.dataKey,c=e.bandSize,d=e.displayedData,l=e.offset,f=r.layout,h=d.map(function(v,y){var u=se(v,o);return f==="horizontal"?{x:Lt({axis:n,ticks:a,bandSize:c,entry:v,index:y}),y:te(u)?null:t.scale(u),value:u,payload:v}:{x:te(u)?null:n.scale(u),y:Lt({axis:t,ticks:s,bandSize:c,entry:v,index:y}),value:u,payload:v}});return K({points:h,layout:f},l)});var Ca=ir({chartName:"LineChart",GraphicalChild:Ee,axisComponents:[{axisType:"xAxis",AxisComp:or},{axisType:"yAxis",AxisComp:Xe}],formatAxisMap:qr}),za=ir({chartName:"PieChart",GraphicalChild:re,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:We},{axisType:"radiusAxis",AxisComp:Ke}],formatAxisMap:Yr,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function $a({x:e,y:r,value:n,valueFormatter:t}){return i.jsx("g",{transform:`translate(${e},${r})`,children:i.jsx("text",{x:0,y:0,dy:-8,dx:-10,textAnchor:"top",fill:"var(--chart-text-color, var(--mantine-color-dimmed))",fontSize:8,children:t?t(n):n})})}const Na={withXAxis:!0,withYAxis:!0,withTooltip:!0,tooltipAnimationDuration:0,fillOpacity:1,tickLine:"y",strokeDasharray:"5 5",gridAxis:"x",withDots:!0,connectNulls:!0,strokeWidth:2,curveType:"monotone",gradientStops:[{offset:0,color:"red"},{offset:100,color:"blue"}]},Fa=hr((e,{textColor:r,gridColor:n})=>({root:{"--chart-text-color":r?le(r,e):void 0,"--chart-grid-color":n?le(n,e):void 0}})),yt=st((e,r)=>{const n=lt("LineChart",Na,e),{classNames:t,className:a,style:s,styles:o,unstyled:c,vars:d,data:l,withLegend:f,legendProps:h,series:v,onMouseLeave:y,dataKey:u,withTooltip:p,withXAxis:x,withYAxis:m,gridAxis:b,tickLine:A,xAxisProps:O,yAxisProps:j,unit:P,tooltipAnimationDuration:k,strokeDasharray:_,gridProps:D,tooltipProps:L,referenceLines:F,withDots:T,dotProps:R,activeDotProps:V,strokeWidth:W,lineChartProps:H,connectNulls:ue,fillOpacity:U,curveType:ne,orientation:be,dir:wr,valueFormatter:De,children:Tr,lineProps:Ue,xAxisLabel:Ge,yAxisLabel:Ie,type:ae,gradientStops:qe,withRightYAxis:Lr,rightYAxisLabel:jt,rightYAxisProps:Er,withPointLabels:Dr,...Ir}=n,Ye=sr(),Rr=b!=="none"&&(A==="x"||A==="xy"),Cr=b!=="none"&&(A==="y"||A==="xy"),[Pt,Ot]=$.useState(null),zr=Pt!==null,$r=S=>{Ot(null),y==null||y(S)},{resolvedClassNames:_t,resolvedStyles:kt}=ct({classNames:t,styles:o,props:n}),X=lr({name:"LineChart",classes:cr,props:n,className:a,style:s,classNames:t,styles:o,unstyled:c,vars:d,varsResolver:Fa}),St=`line-chart-gradient-${Zr()}`,Nr=qe==null?void 0:qe.map(S=>i.jsx("stop",{offset:`${S.offset}%`,stopColor:le(S.color,Ye)},S.color)),Fr=v.map(S=>{const Q=le(S.color,Ye),de=zr&&Pt!==S.name;return $.createElement(Ee,{...X("line"),key:S.name,name:S.name,dataKey:S.name,dot:T?{fillOpacity:de?0:1,strokeOpacity:de?0:1,strokeWidth:1,fill:ae==="gradient"?"var(--mantine-color-gray-7)":Q,stroke:ae==="gradient"?"white":Q,...R}:!1,activeDot:T?{fill:ae==="gradient"?"var(--mantine-color-gray-7)":Q,stroke:ae==="gradient"?"white":Q,...V}:!1,fill:Q,stroke:ae==="gradient"?`url(#${St})`:Q,strokeWidth:W,isAnimationActive:!1,fillOpacity:de?0:U,strokeOpacity:de?.5:U,connectNulls:ue,type:ne,strokeDasharray:S.strokeDasharray,yAxisId:S.yAxisId||"left",label:Dr?i.jsx($a,{valueFormatter:De}):void 0,...typeof Ue=="function"?Ue(S):Ue})}),Br=F==null?void 0:F.map((S,Q)=>{const de=le(S.color,Ye);return i.jsx(Xr,{stroke:S.color?de:"var(--chart-grid-color)",strokeWidth:1,yAxisId:S.yAxisId||"left",...S,label:{value:S.label,fill:S.color?de:"currentColor",fontSize:12,position:S.labelPosition??"insideBottomLeft"},...X("referenceLine")},Q)}),wt={axisLine:!1,...be==="vertical"?{dataKey:u,type:"category"}:{type:"number"},tickLine:Cr?{stroke:"currentColor"}:!1,allowDecimals:!0,unit:P,tickFormatter:be==="vertical"?void 0:De,...X("axis")};return i.jsx(ur,{ref:r,...X("root"),onMouseLeave:$r,dir:wr||"ltr",...Ir,children:i.jsx(dr,{...X("container"),children:i.jsxs(Ca,{data:l,layout:be,margin:{bottom:Ge?30:void 0,left:Ie?10:void 0,right:Ie?5:void 0},...H,children:[ae==="gradient"&&i.jsx("defs",{children:i.jsx("linearGradient",{id:St,x1:"0",y1:"0",x2:"0",y2:"1",children:Nr})}),f&&i.jsx(Qr,{verticalAlign:"top",content:S=>i.jsx(Jr,{payload:S.payload,onHighlight:Ot,legendPosition:(h==null?void 0:h.verticalAlign)||"top",classNames:_t,styles:kt,series:v,showColor:ae!=="gradient"}),...h}),i.jsxs(or,{hide:!x,...be==="vertical"?{type:"number"}:{dataKey:u},tick:{transform:"translate(0, 10)",fontSize:12,fill:"currentColor"},stroke:"",interval:"preserveStartEnd",tickLine:Rr?{stroke:"currentColor"}:!1,minTickGap:5,tickFormatter:be==="vertical"?De:void 0,...X("axis"),...O,children:[Ge&&i.jsx(Se,{position:"insideBottom",offset:-20,fontSize:12,...X("axisLabel"),children:Ge}),O==null?void 0:O.children]}),i.jsxs(Xe,{yAxisId:"left",orientation:"left",tick:{transform:"translate(-10, 0)",fontSize:12,fill:"currentColor"},hide:!m,...wt,...j,children:[Ie&&i.jsx(Se,{position:"insideLeft",angle:-90,textAnchor:"middle",fontSize:12,offset:-5,...X("axisLabel"),children:Ie}),j==null?void 0:j.children]}),i.jsxs(Xe,{yAxisId:"right",orientation:"right",tick:{transform:"translate(10, 0)",fontSize:12,fill:"currentColor"},hide:!Lr,...wt,...Er,children:[jt&&i.jsx(Se,{position:"insideRight",angle:90,textAnchor:"middle",fontSize:12,offset:-5,...X("axisLabel"),children:jt}),j==null?void 0:j.children]}),i.jsx(en,{strokeDasharray:_,vertical:b==="y"||b==="xy",horizontal:b==="x"||b==="xy",...X("grid"),...D}),p&&i.jsx(pr,{animationDuration:k,isAnimationActive:k!==0,position:be==="vertical"?{}:{y:0},cursor:{stroke:"var(--chart-grid-color)",strokeWidth:1,strokeDasharray:_},content:({label:S,payload:Q})=>i.jsx(fr,{label:S,payload:Q,unit:P,classNames:_t,styles:kt,series:v,valueFormatter:De,showColor:ae!=="gradient"}),...L}),Fr,Br,Tr]})})})});yt.displayName="@mantine/charts/LineChart";yt.classes=cr;var gt={root:"m_cd8943fd"};const Ba={withTooltip:!1,withLabelsLine:!0,paddingAngle:0,size:160,strokeWidth:1,startAngle:0,endAngle:360,tooltipDataSource:"all",labelsPosition:"outside",labelsType:"value"},Ma=hr((e,{strokeColor:r,labelColor:n,withLabels:t,size:a,labelsPosition:s})=>({root:{"--chart-stroke-color":r?le(r,e):void 0,"--chart-labels-color":n?le(n,e):void 0,"--chart-size":t&&s==="outside"?Et(a+80):Et(a)}})),kr=(e,r,n,t)=>e==="percent"?`${(n*100).toFixed(0)}%`:typeof t=="function"?t(r):r,Ha=(e,r)=>({cx:n,cy:t,midAngle:a,innerRadius:s,outerRadius:o,value:c,percent:d})=>{const l=Math.PI/180,f=s+(o-s)*.5,h=n+f*Math.cos(-a*l),v=t+f*Math.sin(-a*l);return i.jsx("text",{x:h,y:v,textAnchor:h>n?"start":"end",dominantBaseline:"central",className:gt.label,children:kr(e,c,d,r)})},Ka=(e,r)=>({x:n,y:t,cx:a,cy:s,percent:o,value:c})=>i.jsx("text",{x:n,y:t,cx:a,cy:s,textAnchor:n>a?"start":"end",fill:"var(--chart-labels-color, var(--mantine-color-dimmed))",fontFamily:"var(--mantine-font-family)",fontSize:12,children:i.jsx("tspan",{x:n,children:kr(e,c,o,r)})}),xt=st((e,r)=>{const n=lt("PieChart",Ba,e),{classNames:t,className:a,style:s,styles:o,unstyled:c,vars:d,data:l,withTooltip:f,tooltipAnimationDuration:h,tooltipProps:v,pieProps:y,paddingAngle:u,withLabels:p,withLabelsLine:x,size:m,strokeWidth:b,startAngle:A,endAngle:O,tooltipDataSource:j,children:P,pieChartProps:k,labelsPosition:_,valueFormatter:D,labelsType:L,strokeColor:F,...T}=n,R=sr(),V=lr({name:"PieChart",classes:gt,props:n,className:a,style:s,classNames:t,styles:o,unstyled:c,vars:d,varsResolver:Ma}),{resolvedClassNames:W,resolvedStyles:H}=ct({classNames:t,styles:o,props:n}),ue=l.map((U,ne)=>i.jsx(ar,{fill:le(U.color,R),stroke:"var(--chart-stroke-color, var(--mantine-color-body))",strokeWidth:b},ne));return i.jsx(ur,{ref:r,size:m,...V("root"),...T,children:i.jsx(dr,{children:i.jsxs(za,{...k,children:[i.jsx(re,{data:l,innerRadius:0,outerRadius:m/2,dataKey:"value",isAnimationActive:!1,paddingAngle:u,startAngle:A,endAngle:O,label:p?_==="inside"?Ha(L||"value",D):Ka(L||"value",D):!1,labelLine:x&&_==="outside"?{stroke:"var(--chart-label-color, var(--mantine-color-dimmed))",strokeWidth:1}:!1,...y,children:ue}),f&&i.jsx(pr,{animationDuration:h,isAnimationActive:!1,content:({payload:U})=>{var ne;return i.jsx(fr,{payload:l,classNames:W,styles:H,type:"radial",segmentId:j==="segment"?(ne=U==null?void 0:U[0])==null?void 0:ne.name:void 0,valueFormatter:D})},...v}),P]})})})});xt.displayName="@mantine/charts/PieChart";xt.classes=gt;/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Va=vr("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wa=vr("outline","clock","IconClock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]),Ua={input:"m_468e7eda"};const At=st((e,r)=>{const n=lt("TimeInput",null,e),{classNames:t,styles:a,unstyled:s,vars:o,withSeconds:c,minTime:d,maxTime:l,value:f,onChange:h,step:v,...y}=n,{resolvedClassNames:u,resolvedStyles:p}=ct({classNames:t,styles:a,props:n}),x=b=>{if(d!==void 0||l!==void 0){const[A,O,j]=b.split(":").map(Number);if(d){const[P,k,_]=d.split(":").map(Number);if(A<P||A===P&&O<k||c&&A===P&&O===k&&j<_)return-1}if(l){const[P,k,_]=l.split(":").map(Number);if(A>P||A===P&&O>k||c&&A===P&&O===k&&j>_)return 1}}return 0},m=b=>{var A,O,j;if((A=n.onBlur)==null||A.call(n,b),d!==void 0||l!==void 0){const P=b.currentTarget.value;if(P){const k=x(P);k===1?(l&&(b.currentTarget.value=l),(O=n.onChange)==null||O.call(n,b)):k===-1&&(d&&(b.currentTarget.value=d),(j=n.onChange)==null||j.call(n,b))}}};return i.jsx(mr,{classNames:{...u,input:Z(Ua.input,u==null?void 0:u.input)},styles:p,unstyled:s,ref:r,value:f,step:v??(c?1:60),...y,onChange:h,onBlur:m,type:"time",__staticSelector:"TimeInput"})});At.classes=mr.classes;At.displayName="@mantine/dates/TimeInput";function Ga(){var f,h,v,y;const{user:e}=ut(),{data:r,isLoading:n}=un();if((e==null?void 0:e.role)!=="MANAGER"&&(e==null?void 0:e.department)!=="HSE"||n||!r)return null;const t=Object.entries(r.status_breakdown||{}).map(([u,p])=>({name:u.replace("_"," ").toUpperCase(),value:p,color:u==="open"?"red.6":u==="in_progress"?"yellow.6":u==="resolved"?"green.6":"gray.6"})).filter(u=>u.value>0),a=Object.entries(r.hazard_types_distribution||{}).map(([u,p])=>({hazard:u.replace("_"," "),count:p})).sort((u,p)=>p.count-u.count).slice(0,6),s=(r.monthly_trend||[]).map(u=>({month:u.month||"N/A",observations:u.count||0})),o=[{title:"Total Observations",value:r.total_observations||0,icon:dn,color:"blue"},{title:"Open",value:((f=r.status_breakdown)==null?void 0:f.open)||0,icon:Va,color:"red"},{title:"In Progress",value:((h=r.status_breakdown)==null?void 0:h.in_progress)||0,icon:Wa,color:"yellow"},{title:"Resolved",value:((v=r.status_breakdown)==null?void 0:v.resolved)||0,icon:br,color:"green"}],c=r.total_observations||0,d=((y=r.status_breakdown)==null?void 0:y.resolved)||0,l=c>0?(d/c*100).toFixed(1):"0.0";return i.jsxs(I,{gap:"lg",mb:"lg",children:[i.jsx(tn,{cols:{base:1,sm:2,md:4},children:o.map(u=>{const p=u.icon;return i.jsx(ke,{padding:"md",radius:"md",withBorder:!0,children:i.jsxs(G,{justify:"space-between",children:[i.jsxs(I,{gap:0,children:[i.jsx(z,{size:"xs",c:"dimmed",fw:500,children:u.title}),i.jsx(z,{size:"xl",fw:700,children:u.value})]}),i.jsx(p,{size:32,stroke:1.5,color:`var(--mantine-color-${u.color}-6)`})]})},u.title)})}),i.jsxs(N,{children:[i.jsx(N.Col,{span:{base:12,md:6},children:i.jsx(ke,{padding:"lg",radius:"md",withBorder:!0,h:"100%",children:i.jsxs(I,{gap:"md",children:[i.jsxs(G,{justify:"space-between",children:[i.jsx(Ce,{order:4,children:"Status Distribution"}),i.jsxs(z,{size:"sm",c:"dimmed",children:["Resolution Rate: ",l,"%"]})]}),i.jsx(rn,{children:t.length>0?i.jsx(xt,{data:t,withLabelsLine:!0,labelsPosition:"outside",labelsType:"value",withLabels:!0,withTooltip:!0,tooltipDataSource:"segment"}):i.jsx(z,{size:"sm",c:"dimmed",ta:"center",py:"xl",children:"No data available"})})]})})}),i.jsx(N.Col,{span:{base:12,md:6},children:i.jsx(ke,{padding:"lg",radius:"md",withBorder:!0,h:"100%",children:i.jsxs(I,{gap:"md",children:[i.jsx(Ce,{order:4,children:"Top Hazard Types"}),a.length>0?i.jsx(nn,{h:280,data:a,dataKey:"hazard",series:[{name:"count",color:"blue.6",label:"Count"}],tickLine:"y",gridAxis:"y",withTooltip:!0,withLegend:!0,tooltipAnimationDuration:200,xAxisProps:{angle:-45,textAnchor:"end",height:100}}):i.jsx(z,{size:"sm",c:"dimmed",ta:"center",py:"xl",children:"No data available"})]})})}),i.jsx(N.Col,{span:{base:12,md:8},children:i.jsx(ke,{padding:"lg",radius:"md",withBorder:!0,children:i.jsxs(I,{gap:"md",children:[i.jsx(Ce,{order:4,children:"Observations Trend (Last 6 Months)"}),s.length>0?i.jsx(yt,{h:300,data:s,dataKey:"month",series:[{name:"observations",color:"blue.6",label:"Observations"}],curveType:"linear",withTooltip:!0,withLegend:!0,tooltipAnimationDuration:200,connectNulls:!0,withDots:!0,gridAxis:"xy"}):i.jsx(z,{size:"sm",c:"dimmed",ta:"center",py:"xl",children:"No data available"})]})})}),i.jsx(N.Col,{span:{base:12,md:4},children:i.jsx(ke,{padding:"lg",radius:"md",withBorder:!0,h:"100%",children:i.jsxs(I,{gap:"md",children:[i.jsx(Ce,{order:4,children:"Top Facilities"}),i.jsxs(I,{gap:"sm",children:[(r.top_facilities||[]).slice(0,5).map((u,p)=>i.jsxs(G,{justify:"space-between",p:"xs",style:{borderLeft:"3px solid var(--mantine-color-red-6)",backgroundColor:"var(--mantine-color-gray-0)"},children:[i.jsx(z,{size:"sm",fw:500,style:{flex:1},truncate:!0,children:u.facility_name||u.facility_id}),i.jsx(z,{size:"sm",fw:700,c:"red",children:u.count})]},p)),(!r.top_facilities||r.top_facilities.length===0)&&i.jsx(z,{size:"sm",c:"dimmed",ta:"center",children:"No data available"})]})]})})})]})]})}const qa=[{value:"physical",label:"Physical (Fisik)"},{value:"chemical",label:"Chemical (Kimia)"},{value:"biological",label:"Biological (Biologi)"},{value:"ergonomic",label:"Ergonomic (Ergonomi)"},{value:"psychosocial",label:"Psychosocial (Psikososial)"}],Ya=[{value:"hit_by_object",label:"Hit by Object (Menabrak/Ditabrak)"},{value:"slip_trip_fall",label:"Slip/Trip/Fall (Terpeleset/Tersandung/Terjatuh)"},{value:"short_circuit_burn",label:"Short Circuit/Burn (Arus Pendek/Terbakar)"},{value:"contact_hazard",label:"Contact Hazard (Kontak Panas/Listrik/Kimia)"},{value:"environmental_pollution",label:"Environmental Pollution (Pencemaran)"},{value:"other",label:"Other (Lain-Lain)"}],Za=[{value:"inadequate_equipment",label:"Inadequate Equipment (Peralatan Tidak Memadai)"},{value:"lack_of_knowledge",label:"Lack of Knowledge (Kurang Pengetahuan)"},{value:"incorrect_ppe_use",label:"Incorrect PPE Use (Penggunaan APD Tidak Tepat)"},{value:"procedure_violation",label:"Procedure Violation (Melanggar Prosedur)"},{value:"no_loto_socialization",label:"No LOTO Socialization (Tidak ada Sosialisasi LOTO)"},{value:"other",label:"Other (Lain-Lain)"}],Xa=[{value:"elimination",label:"Elimination (Eliminasi)"},{value:"substitution",label:"Substitution (Substitusi)"},{value:"minimization",label:"Minimization (Minimalisasi)"},{value:"training",label:"Training (Pelatihan)"},{value:"ppe",label:"PPE / APD (Alat Pelindung Diri)"},{value:"other",label:"Other (Lain-Lain)"}];function Sr({form:e}){const{data:r,isLoading:n}=an({queryKey:["facilityOptions"],queryFn:Pn}),[t,a]=$.useState(!1),[s,o]=$.useState(!1),[c,d]=$.useState(!1);return $.useEffect(()=>{const l=e.values.potential_risks||[];a(l.includes("other"))},[e.values.potential_risks]),$.useEffect(()=>{const l=e.values.unsafe_reasons||[];o(l.includes("other"))},[e.values.unsafe_reasons]),$.useEffect(()=>{const l=e.values.control_measures||[];d(l.includes("other"))},[e.values.control_measures]),i.jsxs(I,{gap:"md",children:[i.jsx(B,{title:"Observer Information (Informasi Pengamat)",children:i.jsxs(N,{children:[i.jsx(N.Col,{span:{base:12,sm:6},children:i.jsx(jn,{label:"Facility",placeholder:"Select facility",data:r||[],...e.getInputProps("facility_id"),searchable:!0,required:!0,disabled:n,comboboxProps:{zIndex:2001}})}),i.jsx(N.Col,{span:{base:12,sm:3},children:i.jsx(xn,{label:"Observation Date",placeholder:"Select date",...e.getInputProps("observation_date"),valueFormat:"DD/MM/YYYY",required:!0,popoverProps:{zIndex:2001}})}),i.jsx(N.Col,{span:{base:12,sm:3},children:i.jsx(At,{label:"Observation Time",...e.getInputProps("observation_time"),required:!0})})]})}),i.jsx(B,{title:"Unsafe Action/Condition (Tindakan/Kondisi Tidak Aman)",children:i.jsx(Qe,{label:"Description",placeholder:"Describe the unsafe action or condition observed...",...e.getInputProps("unsafe_action_condition"),minRows:3,required:!0})}),i.jsx(B,{title:"Hazard Types (Bahaya)",children:i.jsx(ie.Group,{...e.getInputProps("hazard_types"),children:i.jsx(I,{gap:"xs",children:qa.map(l=>i.jsx(ie,{value:l.value,label:l.label},l.value))})})}),i.jsxs(B,{title:"Potential Risks (Resiko Potensial)",children:[i.jsx(ie.Group,{...e.getInputProps("potential_risks"),children:i.jsx(I,{gap:"xs",children:Ya.map(l=>i.jsx(ie,{value:l.value,label:l.label},l.value))})}),t&&i.jsx(Ze,{label:"Other Potential Risk Details",placeholder:"Specify other potential risk...",...e.getInputProps("potential_risk_other"),mt:"sm"})]}),i.jsxs(B,{title:"Why Unsafe? (Mengapa Pekerjaan Ini Dilakukan Tidak Aman)",children:[i.jsx(ie.Group,{...e.getInputProps("unsafe_reasons"),children:i.jsx(I,{gap:"xs",children:Za.map(l=>i.jsx(ie,{value:l.value,label:l.label},l.value))})}),s&&i.jsx(Ze,{label:"Other Unsafe Reason Details",placeholder:"Specify other reason...",...e.getInputProps("unsafe_reason_other"),mt:"sm"})]}),i.jsxs(B,{title:"Control Measures (Pengendalian yang Dilakukan)",children:[i.jsx(ie.Group,{...e.getInputProps("control_measures"),children:i.jsx(I,{gap:"xs",children:Xa.map(l=>i.jsx(ie,{value:l.value,label:l.label},l.value))})}),c&&i.jsx(Ze,{label:"Other Control Measure Details",placeholder:"Specify other control measure...",...e.getInputProps("control_measure_other"),mt:"sm"})]}),i.jsx(B,{title:"Corrective Action (Tindakan Perbaikan/Saran)",children:i.jsx(Qe,{label:"Corrective Action or Suggestions",placeholder:"Describe corrective actions taken or suggested...",...e.getInputProps("corrective_action"),minRows:3})})]})}function Qa({onSubmit:e}){const{mutate:r,isPending:n}=pn(),t=vt({mode:"controlled",validate:bt(fn),initialValues:{facility_id:"",observation_date:On(new Date),observation_time:new Date().toTimeString().slice(0,5),unsafe_action_condition:"",hazard_types:[],potential_risks:[],potential_risk_other:"",unsafe_reasons:[],unsafe_reason_other:"",control_measures:[],control_measure_other:"",corrective_action:""}}),a=t.onSubmit(s=>{console.log(s),r(s,{onError:o=>ht(t,o),onSuccess:()=>{e()}})});return i.jsx(mt,{form:t,onSubmit:a,children:i.jsxs(I,{children:[i.jsx(Sr,{form:t}),i.jsx(G,{justify:"flex-end",children:i.jsx(dt,{type:"submit",loading:n,mt:"md",leftSection:i.jsx(_n,{size:16,stroke:5}),children:"Add Observation"})})]})})}function Ja({onSubmit:e,id:r}){const{mutate:n,isPending:t}=hn(),{data:a,isLoading:s}=ft(r),o=vt({mode:"controlled",validate:bt(mn)});$.useEffect(()=>{a&&o.setValues({...a,observation_date:new Date(a.observation_date)})},[a]);const c=o.onSubmit(d=>{n({id:r,data:d},{onError:l=>ht(o,l),onSuccess:()=>{e()}})});return s?i.jsx(pt,{color:"blue",size:"xl"}):i.jsx(mt,{form:o,onSubmit:c,children:i.jsxs(I,{children:[i.jsx(Sr,{form:o}),i.jsx(G,{justify:"flex-end",children:i.jsx(dt,{type:"submit",loading:t,mt:"md",leftSection:i.jsx(kn,{size:16,stroke:2}),children:"Save Changes"})})]})})}function ei({onSubmit:e,id:r}){const{mutate:n,isPending:t}=vn(),{data:a,isLoading:s}=ft(r),o=vt({mode:"controlled",validate:bt(bn),initialValues:{resolution_notes:""}}),c=o.onSubmit(d=>{n({id:r,data:d},{onError:l=>ht(o,l),onSuccess:()=>{e()}})});return s?i.jsx(pt,{color:"blue",size:"xl"}):i.jsx(mt,{form:o,onSubmit:c,children:i.jsxs(I,{children:[i.jsxs(B,{title:"Observation Details",children:[i.jsxs(z,{size:"sm",children:[i.jsx("strong",{children:"Facility:"})," ",a==null?void 0:a.facility_id]}),i.jsxs(z,{size:"sm",children:[i.jsx("strong",{children:"Date:"})," ",a!=null&&a.observation_date?new Date(a.observation_date).toLocaleDateString():"-"]}),i.jsxs(z,{size:"sm",children:[i.jsx("strong",{children:"Unsafe Condition:"})," ",a==null?void 0:a.unsafe_action_condition]})]}),i.jsx(B,{title:"Resolution Notes (HSE)",children:i.jsx(Qe,{name:"resolution_notes",label:"Resolution Notes",placeholder:"Describe how this hazard was resolved...",...o.getInputProps("resolution_notes"),minRows:4,required:!0,description:"Provide detailed information about the resolution actions taken"})}),i.jsx(G,{justify:"flex-end",children:i.jsx(dt,{type:"submit",loading:t,color:"green",leftSection:i.jsx(br,{size:16,stroke:2}),children:"Mark as Resolved"})})]})})}function ti({id:e}){const{data:r,isLoading:n}=ft(e);if(n)return i.jsx(G,{justify:"center",py:"xl",children:i.jsx(pt,{size:"lg"})});if(!r)return i.jsx(z,{c:"dimmed",ta:"center",py:"xl",children:"No observation data found."});const t=r;return i.jsxs(I,{gap:"lg",children:[i.jsx(B,{title:"Observer Information",children:i.jsxs(N,{children:[i.jsxs(N.Col,{span:{base:12,sm:6},children:[i.jsx(C,{label:"Observer",value:t.observer_name||t.observer_id}),i.jsx(C,{label:"Facility",value:t.facility_name||t.facility_id})]}),i.jsxs(N.Col,{span:{base:12,sm:6},children:[i.jsx(C,{label:"Observation Date",value:new Date(t.observation_date).toLocaleDateString()}),i.jsx(C,{label:"Observation Time",value:t.observation_time})]})]})}),i.jsxs(B,{title:"Observation Details",children:[i.jsx(C,{label:"Unsafe Action/Condition",value:t.unsafe_action_condition}),i.jsx(C,{label:"Hazard Types",value:t.hazard_types&&t.hazard_types.length>0?i.jsx(G,{gap:4,children:t.hazard_types.map((a,s)=>i.jsx(ve,{children:a},s))}):"-"}),i.jsx(C,{label:"Potential Risks",value:t.potential_risks&&t.potential_risks.length>0?i.jsx(G,{gap:4,children:t.potential_risks.map((a,s)=>i.jsx(ve,{color:"orange",children:a},s))}):"-"}),t.potential_risk_other&&i.jsx(C,{label:"Other Potential Risk",value:t.potential_risk_other})]}),i.jsxs(B,{title:"Why Unsafe",children:[i.jsx(C,{label:"Unsafe Reasons",value:t.unsafe_reasons&&t.unsafe_reasons.length>0?i.jsx(G,{gap:4,children:t.unsafe_reasons.map((a,s)=>i.jsx(ve,{color:"red",children:a},s))}):"-"}),t.unsafe_reason_other&&i.jsx(C,{label:"Other Unsafe Reason",value:t.unsafe_reason_other})]}),i.jsxs(B,{title:"Control Measures",children:[i.jsx(C,{label:"Control Measures",value:t.control_measures&&t.control_measures.length>0?i.jsx(G,{gap:4,children:t.control_measures.map((a,s)=>i.jsx(ve,{color:"green",children:a},s))}):"-"}),t.control_measure_other&&i.jsx(C,{label:"Other Control Measure",value:t.control_measure_other}),i.jsx(C,{label:"Corrective Action",value:t.corrective_action})]}),t.status==="resolved"&&t.resolution_notes&&i.jsx(B,{title:"Resolution Information",children:i.jsxs(N,{children:[i.jsxs(N.Col,{span:{base:12,sm:6},children:[i.jsx(C,{label:"Resolved By",value:t.resolved_by_name||t.resolved_by_id||"N/A"}),i.jsx(C,{label:"Resolved At",value:t.resolved_at?new Date(t.resolved_at).toLocaleString():"-"})]}),i.jsx(N.Col,{span:12,children:i.jsx(C,{label:"Resolution Notes",value:t.resolution_notes})})]})})]})}function C({label:e,value:r}){return i.jsxs(I,{gap:2,mb:"sm",children:[i.jsx(z,{c:"dimmed",fz:"sm",children:e}),i.jsx(z,{fw:500,style:{wordBreak:"break-word"},children:r??"-"}),i.jsx(Sn,{my:4})]})}function ri(e){ce.open({title:"Add New Hazard Observation Card",children:i.jsx(Qa,{onSubmit:()=>{e(),ce.closeAll()}}),size:"75rem",zIndex:2e3,withCloseButton:!1})}function ni(e,r){ce.open({title:"Edit Hazard Observation Card",children:i.jsx(Ja,{id:e,onSubmit:()=>{r(),ce.closeAll()}}),size:"75rem",zIndex:2e3,withCloseButton:!1})}function ai(e){ce.open({title:"View Hazard Observation Card",children:i.jsx(ti,{id:e}),size:"75rem",zIndex:2e3,withCloseButton:!1})}function ii(e,r){ce.open({title:"Resolve Hazard Observation",children:i.jsx(ei,{id:e,onSubmit:()=>{r(),ce.closeAll()}}),size:"50rem",zIndex:2e3,withCloseButton:!1})}const oi={open:"red",in_progress:"yellow",resolved:"green",closed:"gray"},si={open:"Open",in_progress:"In Progress",resolved:"Resolved",closed:"Closed"};function li(){var x;const{user:e}=ut(),{page:r,limit:n,setLimit:t,setPage:a}=on(),{filters:s,sort:o}=J.useDataTable({sortConfig:{direction:"desc",column:"observation_date"}}),{data:c,isLoading:d,refetch:l}=yn(),{mutate:f}=gn(),h=$.useCallback(m=>{ce.openConfirmModal({title:"Delete Hazard Observation",children:"Are you sure you want to delete this hazard observation?",confirmProps:{color:"red"},labels:{confirm:"Delete",cancel:"Cancel"},onConfirm:()=>{f(m),l()}})},[f,l]),v=(e==null?void 0:e.department)==="HSE",y=(e==null?void 0:e.role)==="MANAGER",u=$.useMemo(()=>[{accessor:"observation_date",title:"Date",sortable:!0,render:({observation_date:m,observation_time:b})=>`${new Date(m).toLocaleDateString()} ${b||""}`},{accessor:"facility_id",title:"Facility",ellipsis:!0,render:({facility_name:m,facility_id:b})=>m||b},{accessor:"unsafe_action_condition",title:"Unsafe Condition",ellipsis:!0,width:250},{accessor:"hazard_types",title:"Hazard Types",render:({hazard_types:m})=>m&&m.length>0?i.jsxs(G,{gap:4,children:[m.slice(0,2).map((b,A)=>i.jsx(ve,{size:"sm",children:b},A)),m.length>2&&i.jsxs(ve,{size:"sm",variant:"outline",children:["+",m.length-2]})]}):"-"},{accessor:"status",title:"Status",sortable:!0,textAlign:"center",render:({status:m})=>i.jsx(ve,{color:oi[m],children:si[m]})},{accessor:"actions",title:"Actions",textAlign:"right",width:180,render:m=>i.jsx(J.Actions,{onView:()=>ai(m.id),onResolve:v&&m.status!=="resolved"&&m.status!=="closed"?()=>ii(m.id,l):null,onEdit:y||m.observer_id===(e==null?void 0:e.id)?()=>ni(m.id,l):null,onDelete:y?()=>h(m.id):null})}],[h,v,y,e==null?void 0:e.id,l]),p=sn.alert;return i.jsxs(J.Container,{children:[i.jsx(J.Title,{icon:i.jsx(p,{size:25}),title:"Hazard Observation Cards",actions:i.jsx(An,{variant:"default",size:"xs",onClick:()=>ri(l),children:"Add Observation"})}),i.jsx(J.Filters,{filters:s.filters,onClear:s.clear}),i.jsx(J.Content,{children:i.jsx(J.Table,{striped:!0,minHeight:240,noRecordsText:J.noRecordsText("hazard observations"),recordsPerPageLabel:J.recordsPerPageLabel("hazard observations"),paginationText:J.paginationText("hazard observations"),page:r,records:(c==null?void 0:c.data)??[],fetching:d,onPageChange:a,recordsPerPage:n,totalRecords:((x=c==null?void 0:c.meta)==null?void 0:x.total)??0,onRecordsPerPageChange:t,recordsPerPageOptions:[5,15,30],sortStatus:o.status,onSortStatusChange:o.change,columns:u,pinLastColumn:!0,highlightOnHover:!0})})]})}function Si(){const{user:e}=ut(),n=[{label:"Hazard Observations",href:(e==null?void 0:e.role)==="MANAGER"?Dt.manager.hazardObservations:Dt.employee.hazardObservations}];return i.jsxs(ln,{title:"Hazard Observations",children:[i.jsx(cn,{title:"Hazard Observation Cards",breadcrumbs:n}),i.jsxs(I,{gap:"lg",children:[i.jsx(Ga,{}),i.jsx(li,{})]})]})}export{Si as default};
