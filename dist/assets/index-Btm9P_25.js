import{d as x,k as j,r as y,m as A,j as t,T as g,i as L,p as h}from"./index-CmhbjPjL.js";import{P as R}from"./page-CiT-vqZS.js";import{P as T}from"./page-header-BqsRdy4n.js";import{D as r,A as D}from"./index-DMEh2Hzu.js";import{M}from"./file-upload-D-hnybZO.js";import{u as S,a as E,L as N,b as Q,c as k,o as w}from"./inventory-modals-DL_P5OPy.js";import{f as v}from"./date-CvsIFdJd.js";import{Q as H}from"./text-area-Bti6BRWc.js";import"./Title-D6G9RZ3D.js";import"./Anchor-BMd9EUmI.js";import"./index-CvD6Kpn8.js";import"./DatePickerInput-OySF6iNo.js";import"./form-KjzP4TW-.js";import"./createReactComponent-THD73P8V.js";import"./IconX-DDXS3LFV.js";import"./IconCheck-JgPS92qM.js";import"./form-section-GeMPp3r4.js";import"./facility-BQOUZ1Gj.js";import"./use-form-C-_z4Aq1.js";import"./facilities-CZL7g1Qg.js";import"./text-input-C4SCS-e8.js";function q(){const{user:o}=x(),c=(o==null?void 0:o.role)==="MANAGER",{page:a,limit:m,setLimit:f,setPage:b}=j(),{filters:u,sort:l}=r.useDataTable({sortConfig:{direction:"asc",column:"item_name"}}),{data:n,isLoading:P,refetch:i}=S({query:{page:a,limit:m,sort:l.query}}),{mutate:d}=E(),p=y.useCallback(e=>{A.openConfirmModal({title:"Delete Inventory",children:"Are you sure you want to delete this inventory?",confirmProps:{color:"red"},labels:{confirm:"Delete",cancel:"Cancel"},onConfirm:()=>{d({route:{id:e}}),i()}})},[d,i]),C=y.useMemo(()=>[{accessor:"photo_file_ids",title:"Photo",textAlign:"center",width:300,render:({photo_file_ids:e})=>e!=null&&e.length?t.jsx(M,{file_ids:e,alt:"Inventory Photo",thumbnailWidth:80,thumbnailHeight:80,enlarge:!1}):t.jsx(g,{children:"No Photo"})},{accessor:"item_name",title:"Inventory",sortable:!0},{accessor:"item_code",title:"Code",sortable:!0},{accessor:"manufacturer",title:"Manufacturer",sortable:!0},{accessor:"item_category",title:"Category",sortable:!0},{accessor:"quantity",title:"Quantity",sortable:!0,render:({quantity:e,quantity_uom:s})=>`${e} ${s}`},{accessor:"minimum_stock_level",title:"Min. Stock",sortable:!0,render:({quantity:e,minimum_stock_level:s})=>e<s?`${s} (Out of Stock)`:s},{accessor:"condition_status",title:"Condition",sortable:!0},{accessor:"last_inspection_date",title:"Last Inspection",sortable:!0,render:({last_inspection_date:e})=>e?v(e):"-"},{accessor:"next_inspection_due",title:"Next Inspection",sortable:!0,render:({next_inspection_due:e})=>e?v(e):"-"},{accessor:"storage_location",title:"Storage Location",sortable:!0,render:({storage_location:e})=>(e==null?void 0:e.facility_name)??"-"},{accessor:"location_status",title:"Status",width:120,render:({location_status:e})=>t.jsx(N,{value:e})},{accessor:"id",title:"QR Code",render:({id:e})=>e?t.jsx(H,{value:e}):t.jsx(g,{children:"No QR Code"})},{accessor:"actions",title:"Actions",textAlign:"right",width:130,render:e=>t.jsx(r.Actions,{onEdit:()=>Q(e.id,i),onView:()=>k(e.id),onDelete:c?()=>p(e.id):void 0})}],[c,p]),I=L.inventory;return t.jsxs(r.Container,{children:[t.jsx(r.Title,{icon:t.jsx(I,{size:25}),title:"Inventory",actions:t.jsx(D,{variant:"default",size:"xs",onClick:()=>w(i),children:"Add Inventory"})}),t.jsx(r.Filters,{filters:u.filters,onClear:u.clear}),t.jsx(r.Content,{children:t.jsx(r.Table,{striped:!0,minHeight:240,noRecordsText:r.noRecordsText("inventory"),recordsPerPageLabel:r.recordsPerPageLabel("inventory"),paginationText:r.paginationText("inventory"),page:a,records:(n==null?void 0:n.data)??[],fetching:P,onPageChange:b,recordsPerPage:m,totalRecords:(n==null?void 0:n.meta.total)??0,onRecordsPerPageChange:f,recordsPerPageOptions:[5,15,30],sortStatus:l.status,onSortStatusChange:l.change,columns:C,pinLastColumn:!0,pinFirstColumn:!0,highlightOnHover:!0})})]})}function ae(){const{user:o}=x(),a=[{label:"Inventory",href:(o==null?void 0:o.role)==="MANAGER"?h.manager.inventory:h.employee.inventory},{label:"List"}];return t.jsxs(R,{title:"Inventory",children:[t.jsx(T,{title:"Inventory",breadcrumbs:a}),t.jsx(q,{})]})}export{ae as default};
