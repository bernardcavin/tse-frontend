import{k as P,r as d,m as y,j as t,T as C,i as F,d as b,p}from"./index-Cs1QGpHj.js";import{P as j}from"./page-C_mVyzI-.js";import{P as A}from"./page-header-Pj85psDd.js";import{D as i,t as T,A as D}from"./index-CY8caaxm.js";import{M as L}from"./file-upload-BU9PyXL0.js";import{u as R,a as E,b as M,c as v,o as H}from"./facilities-modals-D-8GPefN.js";import"./Title-D3LlNLx-.js";import"./Anchor-DRzwfr6X.js";import"./index-BXCM-1Cx.js";import"./DatePickerInput-CNbSh6cR.js";import"./form-Bq269LHv.js";import"./IconUpload-DjZKR-T_.js";import"./createReactComponent-KmZb_Ioo.js";import"./IconX-BxrwEbeq.js";import"./IconCheck-CSBuqxYM.js";import"./index-v_Gpp433.js";import"./form-section-VrU0Dt0a.js";import"./facility-BTOuyy7U.js";import"./Popup-CTVrjNv8.js";import"./use-form-Ck_5WgAX.js";import"./text-area-DB6Bqw7_.js";import"./text-input-6xXlG_4y.js";import"./IconPlus-CjtzH_3A.js";function _(){const{page:s,limit:r,setLimit:l,setPage:u}=P(),{filters:n,sort:c}=i.useDataTable({sortConfig:{direction:"asc",column:"facility_name"}}),{data:a,isLoading:f,refetch:o}=R({query:{page:s,limit:r,sort:c.query}}),{mutate:m}=E(),h=d.useCallback(e=>{y.openConfirmModal({title:"Delete Facility",children:"Are you sure you want to delete this facility?",confirmProps:{color:"red"},labels:{confirm:"Delete",cancel:"Cancel"},onConfirm:()=>{m({route:{id:e}}),o()}})},[m,o]),g=d.useMemo(()=>[{accessor:"photo_file_ids",title:"Photo",textAlign:"center",width:300,render:({photo_file_ids:e})=>e?t.jsx(L,{file_ids:e,alt:"Facility Photo",thumbnailWidth:80,thumbnailHeight:80,enlarge:!1}):t.jsx(C,{children:"No Photo"})},{accessor:"facility_name",title:"Facility Name"},{accessor:"facility_type",title:"Type",render:({facility_type:e})=>T(e)},{accessor:"address",title:"Address"},{accessor:"city",title:"City"},{accessor:"province",title:"Province"},{accessor:"country",title:"Country"},{accessor:"actions",title:"Actions",textAlign:"right",width:130,render:e=>t.jsx(i.Actions,{onView:()=>M(e.id),onEdit:()=>v(e.id,o),onDelete:()=>h(e.id)})}],[]),x=F.facilities;return t.jsxs(i.Container,{children:[t.jsx(i.Title,{icon:t.jsx(x,{size:25}),title:"Facilities",actions:t.jsx(D,{variant:"default",size:"xs",onClick:()=>H(o),children:"Add Facility"})}),t.jsx(i.Filters,{filters:n.filters,onClear:n.clear}),t.jsx(i.Content,{children:t.jsx(i.Table,{striped:!0,minHeight:240,noRecordsText:i.noRecordsText("facilities"),recordsPerPageLabel:i.recordsPerPageLabel("facilities"),paginationText:i.paginationText("facilities"),page:s,records:(a==null?void 0:a.data)??[],fetching:f,onPageChange:u,recordsPerPage:r,totalRecords:(a==null?void 0:a.meta.total)??0,onRecordsPerPageChange:l,recordsPerPageOptions:[5,15,30],sortStatus:c.status,onSortStatusChange:c.change,columns:g,pinLastColumn:!0,pinFirstColumn:!0,highlightOnHover:!0})})]})}function st(){const{user:s}=b(),l=[{label:"Facilities",href:(s==null?void 0:s.role)==="MANAGER"?p.manager.facilities:p.employee.facilities},{label:"List"}];return t.jsxs(j,{title:"Facilities",children:[t.jsx(A,{title:"Facilities",breadcrumbs:l}),t.jsx(_,{})]})}export{st as default};
