import{R as ot,r as H,j as vt,f as xn,u as kn,a as Hs,ap as Wo,w as Li,aq as As,ar as jo,U as Ms,as as Us,at as Go,au as Ko,c as Ws,av as xi,z as Ne,I as Ci,D as qo,v as Yo,B as Is,t as $o,g as Xo,aw as Qo,ax as Jo,ay as ta,az as D,T as ea}from"./index-hFCbRvL1.js";import{u as Le}from"./form-tngHacic.js";import{I as ia,a as na,b as sa,c as ra,D as oa}from"./DatePickerInput-G74YrQdo.js";import{S as aa,T as ua}from"./form-section-DjVHetpo.js";function js(u,i){var s={};for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&i.indexOf(o)<0&&(s[o]=u[o]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,o=Object.getOwnPropertySymbols(u);h<o.length;h++)i.indexOf(o[h])<0&&Object.prototype.propertyIsEnumerable.call(u,o[h])&&(s[o[h]]=u[o[h]]);return s}var ti;(function(u){u.event="event",u.props="prop"})(ti||(ti={}));function me(){}function ha(u){var i,s=void 0;return function(){for(var o=[],h=arguments.length;h--;)o[h]=arguments[h];return i&&o.length===i.length&&o.every(function(c,f){return c===i[f]})||(i=o,s=u.apply(void 0,o)),s}}function ei(u){return!!(u||"").match(/\d/)}function Ve(u){return u==null}function la(u){return typeof u=="number"&&isNaN(u)}function Gs(u){return Ve(u)||la(u)||typeof u=="number"&&!isFinite(u)}function Ks(u){return u.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function ca(u){switch(u){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function da(u,i,s){var o=ca(s),h=u.search(/[1-9]/);return h=h===-1?u.length:h,u.substring(0,h)+u.substring(h,u.length).replace(o,"$1"+i)}function fa(u){var i=H.useRef(u);i.current=u;var s=H.useRef(function(){for(var o=[],h=arguments.length;h--;)o[h]=arguments[h];return i.current.apply(i,o)});return s.current}function Cn(u,i){i===void 0&&(i=!0);var s=u[0]==="-",o=s&&i;u=u.replace("-","");var h=u.split("."),c=h[0],f=h[1]||"";return{beforeDecimal:c,afterDecimal:f,hasNegation:s,addNegation:o}}function pa(u){if(!u)return u;var i=u[0]==="-";i&&(u=u.substring(1,u.length));var s=u.split("."),o=s[0].replace(/^0+/,"")||"0",h=s[1]||"";return(i?"-":"")+o+(h?"."+h:"")}function qs(u,i,s){for(var o="",h=s?"0":"",c=0;c<=i-1;c++)o+=u[c]||h;return o}function Bs(u,i){return Array(i+1).join(u)}function Ys(u){var i=u+"",s=i[0]==="-"?"-":"";s&&(i=i.substring(1));var o=i.split(/[eE]/g),h=o[0],c=o[1];if(c=Number(c),!c)return s+h;h=h.replace(".","");var f=1+c,v=h.length;return f<0?h="0."+Bs("0",Math.abs(f))+h:f>=v?h=h+Bs("0",f-v):h=(h.substring(0,f)||"0")+"."+h.substring(f),s+h}function Os(u,i,s){if(["","-"].indexOf(u)!==-1)return u;var o=(u.indexOf(".")!==-1||s)&&i,h=Cn(u),c=h.beforeDecimal,f=h.afterDecimal,v=h.hasNegation,d=parseFloat("0."+(f||"0")),p=f.length<=i?"0."+f:d.toFixed(i),m=p.split("."),g=c;c&&Number(m[0])&&(g=c.split("").reverse().reduce(function(b,S,F){return b.length>F?(Number(b[0])+Number(S)).toString()+b.substring(1,b.length):S+b},m[0]));var w=qs(m[1]||"",i,s),C=v?"-":"",k=o?".":"";return""+C+g+k+w}function Ee(u,i){if(u.value=u.value,u!==null){if(u.createTextRange){var s=u.createTextRange();return s.move("character",i),s.select(),!0}return u.selectionStart||u.selectionStart===0?(u.focus(),u.setSelectionRange(i,i),!0):(u.focus(),!1)}}var $s=ha(function(u,i){for(var s=0,o=0,h=u.length,c=i.length;u[s]===i[s]&&s<h;)s++;for(;u[h-1-o]===i[c-1-o]&&c-o>s&&h-o>s;)o++;return{from:{start:s,end:h-o},to:{start:s,end:c-o}}}),_a=function(u,i){var s=Math.min(u.selectionStart,i);return{from:{start:s,end:u.selectionEnd},to:{start:s,end:i}}};function ma(u,i,s){return Math.min(Math.max(u,i),s)}function dn(u){return Math.max(u.selectionStart,u.selectionEnd)}function ga(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function va(u){return{from:{start:0,end:0},to:{start:0,end:u.length},lastValue:""}}function ya(u){var i=u.currentValue,s=u.formattedValue,o=u.currentValueIndex,h=u.formattedValueIndex;return i[o]===s[h]}function wa(u,i,s,o,h,c,f){f===void 0&&(f=ya);var v=h.findIndex(function(et){return et}),d=u.slice(0,v);!i&&!s.startsWith(d)&&(i=d,s=d+s,o=o+d.length);for(var p=s.length,m=u.length,g={},w=new Array(p),C=0;C<p;C++){w[C]=-1;for(var k=0,b=m;k<b;k++){var S=f({currentValue:s,lastValue:i,formattedValue:u,currentValueIndex:C,formattedValueIndex:k});if(S&&g[k]!==!0){w[C]=k,g[k]=!0;break}}}for(var F=o;F<p&&(w[F]===-1||!c(s[F]));)F++;var G=F===p||w[F]===-1?m:w[F];for(F=o-1;F>0&&w[F]===-1;)F--;var T=F===-1||w[F]===-1?0:w[F]+1;return T>G?G:o-T<G-o?T:G}function Rs(u,i,s,o){var h=u.length;if(i=ma(i,0,h),o==="left"){for(;i>=0&&!s[i];)i--;i===-1&&(i=s.indexOf(!0))}else{for(;i<=h&&!s[i];)i++;i>h&&(i=s.lastIndexOf(!0))}return i===-1&&(i=h),i}function xa(u){for(var i=Array.from({length:u.length+1}).map(function(){return!0}),s=0,o=i.length;s<o;s++)i[s]=!!(ei(u[s])||ei(u[s-1]));return i}function Xs(u,i,s,o,h,c){c===void 0&&(c=me);var f=fa(function(k,b){var S,F;return Gs(k)?(F="",S=""):typeof k=="number"||b?(F=typeof k=="number"?Ys(k):k,S=o(F)):(F=h(k,void 0),S=o(F)),{formattedValue:S,numAsString:F}}),v=H.useState(function(){return f(Ve(u)?i:u,s)}),d=v[0],p=v[1],m=function(k,b){k.formattedValue!==d.formattedValue&&p({formattedValue:k.formattedValue,numAsString:k.value}),c(k,b)},g=u,w=s;Ve(u)&&(g=d.numAsString,w=!0);var C=f(g,w);return H.useMemo(function(){p(C)},[C.formattedValue]),[d,m]}function ka(u){return u.replace(/[^0-9]/g,"")}function Ca(u){return u}function Ea(u){var i=u.type;i===void 0&&(i="text");var s=u.displayType;s===void 0&&(s="input");var o=u.customInput,h=u.renderText,c=u.getInputRef,f=u.format;f===void 0&&(f=Ca);var v=u.removeFormatting;v===void 0&&(v=ka);var d=u.defaultValue,p=u.valueIsNumericString,m=u.onValueChange,g=u.isAllowed,w=u.onChange;w===void 0&&(w=me);var C=u.onKeyDown;C===void 0&&(C=me);var k=u.onMouseUp;k===void 0&&(k=me);var b=u.onFocus;b===void 0&&(b=me);var S=u.onBlur;S===void 0&&(S=me);var F=u.value,G=u.getCaretBoundary;G===void 0&&(G=xa);var T=u.isValidInputCharacter;T===void 0&&(T=ei);var et=u.isCharacterSame,at=js(u,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),kt=Xs(F,d,!!p,f,v,m),Ct=kt[0],it=Ct.formattedValue,yt=Ct.numAsString,Et=kt[1],X=H.useRef(),mt=H.useRef({formattedValue:it,numAsString:yt}),It=function(I,R){mt.current={formattedValue:I.formattedValue,numAsString:I.value},Et(I,R)},rt=H.useState(!1),St=rt[0],O=rt[1],N=H.useRef(null),P=H.useRef({setCaretTimeout:null,focusTimeout:null});H.useEffect(function(){return O(!0),function(){clearTimeout(P.current.setCaretTimeout),clearTimeout(P.current.focusTimeout)}},[]);var ft=f,A=function(I,R){var Y=parseFloat(R);return{formattedValue:I,value:R,floatValue:isNaN(Y)?void 0:Y}},U=function(I,R,Y){I.selectionStart===0&&I.selectionEnd===I.value.length||(Ee(I,R),P.current.setCaretTimeout=setTimeout(function(){I.value===Y&&I.selectionStart!==R&&Ee(I,R)},0))},Q=function(I,R,Y){return Rs(I,R,G(I),Y)},_t=function(I,R,Y){var pt=G(R),Lt=wa(R,it,I,Y,pt,T,et);return Lt=Rs(R,Lt,pt),Lt},dt=function(I){var R=I.formattedValue;R===void 0&&(R="");var Y=I.input,pt=I.source,Lt=I.event,ht=I.numAsString,lt;if(Y){var B=I.inputValue||Y.value,W=dn(Y);Y.value=R,lt=_t(B,R,W),lt!==void 0&&U(Y,lt,R)}R!==it&&It(A(R,ht),{event:Lt,source:pt})};H.useEffect(function(){var I=mt.current,R=I.formattedValue,Y=I.numAsString;(it!==R||yt!==Y)&&It(A(it,yt),{event:void 0,source:ti.props})},[it,yt]);var z=N.current?dn(N.current):void 0,q=typeof window<"u"?H.useLayoutEffect:H.useEffect;q(function(){var I=N.current;if(it!==mt.current.formattedValue&&I){var R=_t(mt.current.formattedValue,it,z);I.value=it,U(I,R,it)}},[it]);var Rt=function(I,R,Y){var pt=R.target,Lt=X.current?_a(X.current,pt.selectionEnd):$s(it,I),ht=Object.assign(Object.assign({},Lt),{lastValue:it}),lt=v(I,ht),B=ft(lt);if(lt=v(B,void 0),g&&!g(A(B,lt))){var W=R.target,wt=dn(W),Yt=_t(I,it,wt);return W.value=it,U(W,Yt,it),!1}return dt({formattedValue:B,numAsString:lt,inputValue:I,event:R,source:Y,input:R.target}),!0},Pt=function(I,R){R===void 0&&(R=0);var Y=I.selectionStart,pt=I.selectionEnd;X.current={selectionStart:Y,selectionEnd:pt+R}},Qt=function(I){var R=I.target,Y=R.value,pt=Rt(Y,I,ti.event);pt&&w(I),X.current=void 0},re=function(I){var R=I.target,Y=I.key,pt=R.selectionStart,Lt=R.selectionEnd,ht=R.value;ht===void 0&&(ht="");var lt;Y==="ArrowLeft"||Y==="Backspace"?lt=Math.max(pt-1,0):Y==="ArrowRight"?lt=Math.min(pt+1,ht.length):Y==="Delete"&&(lt=pt);var B=0;Y==="Delete"&&pt===Lt&&(B=1);var W=Y==="ArrowLeft"||Y==="ArrowRight";if(lt===void 0||pt!==Lt&&!W){C(I),Pt(R,B);return}var wt=lt;if(W){var Yt=Y==="ArrowLeft"?"left":"right";wt=Q(ht,lt,Yt),wt!==lt&&I.preventDefault()}else Y==="Delete"&&!T(ht[lt])?wt=Q(ht,lt,"right"):Y==="Backspace"&&!T(ht[lt])&&(wt=Q(ht,lt,"left"));wt!==lt&&U(R,wt,ht),C(I),Pt(R,B)},ve=function(I){var R=I.target,Y=function(){var pt=R.selectionStart,Lt=R.selectionEnd,ht=R.value;if(ht===void 0&&(ht=""),pt===Lt){var lt=Q(ht,pt);lt!==pt&&U(R,lt,ht)}};Y(),requestAnimationFrame(function(){Y()}),k(I),Pt(R)},Zt=function(I){I.persist&&I.persist();var R=I.target,Y=I.currentTarget;N.current=R,P.current.focusTimeout=setTimeout(function(){var pt=R.selectionStart,Lt=R.selectionEnd,ht=R.value;ht===void 0&&(ht="");var lt=Q(ht,pt);lt!==pt&&!(pt===0&&Lt===ht.length)&&U(R,lt,ht),b(Object.assign(Object.assign({},I),{currentTarget:Y}))},0)},oe=function(I){N.current=null,clearTimeout(P.current.focusTimeout),clearTimeout(P.current.setCaretTimeout),S(I)},Wt=St&&ga()?"numeric":void 0,zt=Object.assign({inputMode:Wt},at,{type:i,value:it,onChange:Qt,onKeyDown:re,onMouseUp:ve,onFocus:Zt,onBlur:oe});if(s==="text")return h?ot.createElement(ot.Fragment,null,h(it,at)||null):ot.createElement("span",Object.assign({},at,{ref:c}),it);if(o){var Te=o;return ot.createElement(Te,Object.assign({},zt,{ref:c}))}return ot.createElement("input",Object.assign({},zt,{ref:c}))}function Fs(u,i){var s=i.decimalScale,o=i.fixedDecimalScale,h=i.prefix;h===void 0&&(h="");var c=i.suffix;c===void 0&&(c="");var f=i.allowNegative,v=i.thousandsGroupStyle;if(v===void 0&&(v="thousand"),u===""||u==="-")return u;var d=Ti(i),p=d.thousandSeparator,m=d.decimalSeparator,g=s!==0&&u.indexOf(".")!==-1||s&&o,w=Cn(u,f),C=w.beforeDecimal,k=w.afterDecimal,b=w.addNegation;return s!==void 0&&(k=qs(k,s,!!o)),p&&(C=da(C,p,v)),h&&(C=h+C),c&&(k=k+c),b&&(C="-"+C),u=C+(g&&m||"")+k,u}function Ti(u){var i=u.decimalSeparator;i===void 0&&(i=".");var s=u.thousandSeparator,o=u.allowedDecimalSeparators;return s===!0&&(s=","),o||(o=[i,"."]),{decimalSeparator:i,thousandSeparator:s,allowedDecimalSeparators:o}}function ba(u,i){u===void 0&&(u="");var s=new RegExp("(-)"),o=new RegExp("(-)(.)*(-)"),h=s.test(u),c=o.test(u);return u=u.replace(/-/g,""),h&&!c&&i&&(u="-"+u),u}function Sa(u,i){return new RegExp("(^-)|[0-9]|"+Ks(u),"g")}function La(u,i,s){return u===""?!0:!(i!=null&&i.match(/\d/))&&!(s!=null&&s.match(/\d/))&&typeof u=="string"&&!isNaN(Number(u))}function Ta(u,i,s){var o;i===void 0&&(i=va(u));var h=s.allowNegative,c=s.prefix;c===void 0&&(c="");var f=s.suffix;f===void 0&&(f="");var v=s.decimalScale,d=i.from,p=i.to,m=p.start,g=p.end,w=Ti(s),C=w.allowedDecimalSeparators,k=w.decimalSeparator,b=u[g]===k;if(ei(u)&&(u===c||u===f)&&i.lastValue==="")return u;if(g-m===1&&C.indexOf(u[m])!==-1){var S=v===0?"":k;u=u.substring(0,m)+S+u.substring(m+1,u.length)}var F=function(N,P,ft){var A=!1,U=!1;c.startsWith("-")?A=!1:N.startsWith("--")?(A=!1,U=!0):f.startsWith("-")&&N.length===f.length?A=!1:N[0]==="-"&&(A=!0);var Q=A?1:0;return U&&(Q=2),Q&&(N=N.substring(Q),P-=Q,ft-=Q),{value:N,start:P,end:ft,hasNegation:A}},G=F(u,m,g),T=G.hasNegation;o=G,u=o.value,m=o.start,g=o.end;var et=F(i.lastValue,d.start,d.end),at=et.start,kt=et.end,Ct=et.value,it=u.substring(m,g);u.length&&Ct.length&&(at>Ct.length-f.length||kt<c.length)&&!(it&&f.startsWith(it))&&(u=Ct);var yt=0;u.startsWith(c)?yt+=c.length:m<c.length&&(yt=m),u=u.substring(yt),g-=yt;var Et=u.length,X=u.length-f.length;u.endsWith(f)?Et=X:(g>X||g>u.length-f.length)&&(Et=g),u=u.substring(0,Et),u=ba(T?"-"+u:u,h),u=(u.match(Sa(k))||[]).join("");var mt=u.indexOf(k);u=u.replace(new RegExp(Ks(k),"g"),function(N,P){return P===mt?".":""});var It=Cn(u,h),rt=It.beforeDecimal,St=It.afterDecimal,O=It.addNegation;return p.end-p.start<d.end-d.start&&rt===""&&b&&!parseFloat(St)&&(u=O?"-":""),u}function Pa(u,i){var s=i.prefix;s===void 0&&(s="");var o=i.suffix;o===void 0&&(o="");var h=Array.from({length:u.length+1}).map(function(){return!0}),c=u[0]==="-";h.fill(!1,0,s.length+(c?1:0));var f=u.length;return h.fill(!1,f-o.length+1,f+1),h}function Aa(u){var i=Ti(u),s=i.thousandSeparator,o=i.decimalSeparator,h=u.prefix;h===void 0&&(h="");var c=u.allowNegative;if(c===void 0&&(c=!0),s===o)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+s+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+o+` (default value for decimalSeparator is .)
     `);return h.startsWith("-")&&c&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+h+`
      allowNegative: `+c+`
    `),c=!1),Object.assign(Object.assign({},u),{allowNegative:c})}function Ma(u){u=Aa(u),u.decimalSeparator,u.allowedDecimalSeparators,u.thousandsGroupStyle;var i=u.suffix,s=u.allowNegative,o=u.allowLeadingZeros,h=u.onKeyDown;h===void 0&&(h=me);var c=u.onBlur;c===void 0&&(c=me);var f=u.thousandSeparator,v=u.decimalScale,d=u.fixedDecimalScale,p=u.prefix;p===void 0&&(p="");var m=u.defaultValue,g=u.value,w=u.valueIsNumericString,C=u.onValueChange,k=js(u,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),b=Ti(u),S=b.decimalSeparator,F=b.allowedDecimalSeparators,G=function(O){return Fs(O,u)},T=function(O,N){return Ta(O,N,u)},et=Ve(g)?m:g,at=w??La(et,p,i);Ve(g)?Ve(m)||(at=at||typeof m=="number"):at=at||typeof g=="number";var kt=function(O){return Gs(O)?O:(typeof O=="number"&&(O=Ys(O)),at&&typeof v=="number"?Os(O,v,!!d):O)},Ct=Xs(kt(g),kt(m),!!at,G,T,C),it=Ct[0],yt=it.numAsString,Et=it.formattedValue,X=Ct[1],mt=function(O){var N=O.target,P=O.key,ft=N.selectionStart,A=N.selectionEnd,U=N.value;if(U===void 0&&(U=""),(P==="Backspace"||P==="Delete")&&A<p.length){O.preventDefault();return}if(ft!==A){h(O);return}P==="Backspace"&&U[0]==="-"&&ft===p.length+1&&s&&Ee(N,1),v&&d&&(P==="Backspace"&&U[ft-1]===S?(Ee(N,ft-1),O.preventDefault()):P==="Delete"&&U[ft]===S&&O.preventDefault()),F!=null&&F.includes(P)&&U[ft]===S&&Ee(N,ft+1);var Q=f===!0?",":f;P==="Backspace"&&U[ft-1]===Q&&Ee(N,ft-1),P==="Delete"&&U[ft]===Q&&Ee(N,ft+1),h(O)},It=function(O){var N=yt;if(N.match(/\d/g)||(N=""),o||(N=pa(N)),d&&v&&(N=Os(N,v,d)),N!==yt){var P=Fs(N,u);X({formattedValue:P,value:N,floatValue:parseFloat(N)},{event:O,source:ti.event})}c(O)},rt=function(O){return O===S?!0:ei(O)},St=function(O){var N=O.currentValue,P=O.lastValue,ft=O.formattedValue,A=O.currentValueIndex,U=O.formattedValueIndex,Q=N[A],_t=ft[U],dt=$s(P,N),z=dt.to,q=function(Rt){return T(Rt).indexOf(".")+p.length};return g===0&&d&&v&&N[z.start]===S&&q(N)<A&&q(ft)>U?!1:A>=z.start&&A<z.end&&F&&F.includes(Q)&&_t===S?!0:Q===_t};return Object.assign(Object.assign({},k),{value:Et,valueIsNumericString:!1,isValidInputCharacter:rt,isCharacterSame:St,onValueChange:X,format:G,removeFormatting:T,getCaretBoundary:function(O){return Pa(O,u)},onKeyDown:mt,onBlur:It})}function Ia(u){var i=Ma(u);return ot.createElement(Ea,Object.assign({},i))}function Ds({direction:u,style:i,...s}){return vt.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:u==="up"?"rotate(180deg)":void 0,...i},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:vt.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var _n={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const Ba=/^(0\.0*|-0(\.0*)?)$/,Oa=/^-?0\d+(\.\d+)?\.?$/;function mn(u){return typeof u=="string"&&u!==""&&!Number.isNaN(Number(u))}function fn(u){return typeof u=="number"?u<Number.MAX_SAFE_INTEGER:u===""||mn(u)&&Number(u)<Number.MAX_SAFE_INTEGER}function Ra(u){return u.toString().replace(".","").length}function Fa(u,i){return(typeof u=="number"?u<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(u)))&&!Number.isNaN(u)&&Ra(i)<14&&i!==""}function Ns(u,i,s){if(u===void 0)return!0;const o=i===void 0||u>=i,h=s===void 0||u<=s;return o&&h}const Da={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},Na=Ws((u,{size:i})=>({controls:{"--ni-chevron-size":Ne(i,"ni-chevron-size")}}));function za(u,i,s){const o=u.toString().replace(/^0+/,""),h=parseFloat(o);return Number.isNaN(h)?o:h>Number.MAX_SAFE_INTEGER?i!==void 0?String(i):o:xi(h,s,i)}const En=xn((u,i)=>{const s=kn("NumberInput",Da,u),{className:o,classNames:h,styles:c,unstyled:f,vars:v,onChange:d,onValueChange:p,value:m,defaultValue:g,max:w,min:C,step:k,hideControls:b,rightSection:S,isAllowed:F,clampBehavior:G,onBlur:T,allowDecimal:et,decimalScale:at,onKeyDown:kt,onKeyDownCapture:Ct,handlersRef:it,startValue:yt,disabled:Et,rightSectionPointerEvents:X,allowNegative:mt,readOnly:It,size:rt,rightSectionWidth:St,stepHoldInterval:O,stepHoldDelay:N,allowLeadingZeros:P,withKeyboardEvents:ft,trimLeadingZeroesOnBlur:A,...U}=s,Q=Hs({name:"NumberInput",classes:_n,props:s,classNames:h,styles:c,unstyled:f,vars:v,varsResolver:Na}),{resolvedClassNames:_t,resolvedStyles:dt}=Wo({classNames:h,styles:c,props:s}),[z,q]=Li({value:m,defaultValue:g,finalValue:"",onChange:d}),Rt=N!==void 0&&O!==void 0,Pt=H.useRef(null),Qt=H.useRef(null),re=H.useRef(0),ve=(B,W)=>{W.source==="event"&&q(Fa(B.floatValue,B.value)&&!Ba.test(B.value)&&!(P&&Oa.test(B.value))?B.floatValue:B.value),p==null||p(B,W)},Zt=B=>{const W=String(B).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return W?Math.max(0,(W[1]?W[1].length:0)-(W[2]?+W[2]:0)):0},oe=B=>{Pt.current&&typeof B<"u"&&Pt.current.setSelectionRange(B,B)},Wt=H.useRef(As);Wt.current=()=>{if(!fn(z))return;let B;const W=Zt(z),wt=Zt(k),Yt=Math.max(W,wt),jt=10**Yt;if(!mn(z)&&(typeof z!="number"||Number.isNaN(z)))B=xi(yt,C,w);else if(w!==void 0){const Ht=(Math.round(Number(z)*jt)+Math.round(k*jt))/jt;B=Ht<=w?Ht:w}else B=(Math.round(Number(z)*jt)+Math.round(k*jt))/jt;const Jt=B.toFixed(Yt);q(parseFloat(Jt)),p==null||p({floatValue:parseFloat(Jt),formattedValue:Jt,value:Jt},{source:"increment"}),setTimeout(()=>{var Ht;return oe((Ht=Pt.current)==null?void 0:Ht.value.length)},0)};const zt=H.useRef(As);zt.current=()=>{if(!fn(z))return;let B;const W=C!==void 0?C:mt?Number.MIN_SAFE_INTEGER:0,wt=Zt(z),Yt=Zt(k),jt=Math.max(wt,Yt),Jt=10**jt;if(!mn(z)&&typeof z!="number"||Number.isNaN(z))B=xi(yt,W,w);else{const fe=(Math.round(Number(z)*Jt)-Math.round(k*Jt))/Jt;B=W!==void 0&&fe<W?W:fe}const Ht=B.toFixed(jt);q(parseFloat(Ht)),p==null||p({floatValue:parseFloat(Ht),formattedValue:Ht,value:Ht},{source:"decrement"}),setTimeout(()=>{var fe;return oe((fe=Pt.current)==null?void 0:fe.value.length)},0)};const Te=B=>{var W,wt;kt==null||kt(B),!(It||!ft)&&(B.key==="ArrowUp"&&(B.preventDefault(),(W=Wt.current)==null||W.call(Wt)),B.key==="ArrowDown"&&(B.preventDefault(),(wt=zt.current)==null||wt.call(zt)))},I=B=>{if(Ct==null||Ct(B),B.key==="Backspace"){const W=Pt.current;W&&W.selectionStart===0&&W.selectionStart===W.selectionEnd&&(B.preventDefault(),window.setTimeout(()=>oe(0),0))}},R=B=>{let W=z;G==="blur"&&typeof W=="number"&&(W=xi(W,C,w)),A&&typeof W=="string"&&Zt(W)<15&&(W=za(W,w,C)),z!==W&&q(W),T==null||T(B)};jo(it,{increment:Wt.current,decrement:zt.current});const Y=B=>{var W,wt;B?(W=Wt.current)==null||W.call(Wt):(wt=zt.current)==null||wt.call(zt),re.current+=1},pt=B=>{if(Y(B),Rt){const W=typeof O=="number"?O:O(re.current);Qt.current=window.setTimeout(()=>pt(B),W)}},Lt=(B,W)=>{var wt;B.preventDefault(),(wt=Pt.current)==null||wt.focus(),Y(W),Rt&&(Qt.current=window.setTimeout(()=>pt(W),N))},ht=()=>{Qt.current&&window.clearTimeout(Qt.current),Qt.current=null,re.current=0},lt=vt.jsxs("div",{...Q("controls"),children:[vt.jsx(Ms,{...Q("control"),tabIndex:-1,"aria-hidden":!0,disabled:Et||typeof z=="number"&&w!==void 0&&z>=w,mod:{direction:"up"},onMouseDown:B=>B.preventDefault(),onPointerDown:B=>{Lt(B,!0)},onPointerUp:ht,onPointerLeave:ht,children:vt.jsx(Ds,{direction:"up"})}),vt.jsx(Ms,{...Q("control"),tabIndex:-1,"aria-hidden":!0,disabled:Et||typeof z=="number"&&C!==void 0&&z<=C,mod:{direction:"down"},onMouseDown:B=>B.preventDefault(),onPointerDown:B=>{Lt(B,!1)},onPointerUp:ht,onPointerLeave:ht,children:vt.jsx(Ds,{direction:"down"})})]});return vt.jsx(Us,{component:Ia,allowNegative:mt,className:Go(_n.root,o),size:rt,...U,readOnly:It,disabled:Et,value:z,getInputRef:Ko(i,Pt),onValueChange:ve,rightSection:b||It||!fn(z)?S:S||lt,classNames:_t,styles:dt,unstyled:f,__staticSelector:"NumberInput",decimalScale:et?at:0,onKeyDown:Te,onKeyDownCapture:I,rightSectionPointerEvents:X??(Et?"none":void 0),rightSectionWidth:St??`var(--ni-right-section-width-${rt||"sm"})`,allowLeadingZeros:P,onBlur:R,isAllowed:B=>G==="strict"?F?F(B)&&Ns(B.floatValue,C,w):Ns(B.floatValue,C,w):F?F(B):!0})});En.classes={...Us.classes,..._n};En.displayName="@mantine/core/NumberInput";const Qs=H.createContext(null),Va=Qs.Provider,Za=()=>H.useContext(Qs),Ha={},bn=xn((u,i)=>{const{value:s,defaultValue:o,onChange:h,size:c,wrapperProps:f,children:v,readOnly:d,...p}=kn("SwitchGroup",Ha,u),[m,g]=Li({value:s,defaultValue:o,finalValue:[],onChange:h}),w=C=>{const k=C.currentTarget.value;!d&&g(m.includes(k)?m.filter(b=>b!==k):[...m,k])};return vt.jsx(Va,{value:{value:m,onChange:w,size:c},children:vt.jsx(Ci.Wrapper,{size:c,ref:i,...f,...p,labelElement:"div",__staticSelector:"SwitchGroup",children:vt.jsx(ia,{role:"group",children:v})})})});bn.classes=Ci.Wrapper.classes;bn.displayName="@mantine/core/SwitchGroup";var Js={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const Ua={labelPosition:"right",withThumbIndicator:!0},Wa=Ws((u,{radius:i,color:s,size:o})=>({root:{"--switch-radius":i===void 0?void 0:$o(i),"--switch-height":Ne(o,"switch-height"),"--switch-width":Ne(o,"switch-width"),"--switch-thumb-size":Ne(o,"switch-thumb-size"),"--switch-label-font-size":Ne(o,"switch-label-font-size"),"--switch-track-label-padding":Ne(o,"switch-track-label-padding"),"--switch-color":s?Xo(s,u):void 0}})),Pi=xn((u,i)=>{const s=kn("Switch",Ua,u),{classNames:o,className:h,style:c,styles:f,unstyled:v,vars:d,color:p,label:m,offLabel:g,onLabel:w,id:C,size:k,radius:b,wrapperProps:S,thumbIcon:F,checked:G,defaultChecked:T,onChange:et,labelPosition:at,description:kt,error:Ct,disabled:it,variant:yt,rootRef:Et,mod:X,withThumbIndicator:mt,...It}=s,rt=Za(),St=k||(rt==null?void 0:rt.size),O=Hs({name:"Switch",props:s,classes:Js,className:h,style:c,classNames:o,styles:f,unstyled:v,vars:d,varsResolver:Wa}),{styleProps:N,rest:P}=qo(It),ft=Yo(C),A=rt?{checked:rt.value.includes(P.value),onChange:rt.onChange}:{},[U,Q]=Li({value:A.checked??G,defaultValue:T,finalValue:!1});return vt.jsxs(na,{...O("root"),__staticSelector:"Switch",__stylesApiProps:s,id:ft,size:St,labelPosition:at,label:m,description:kt,error:Ct,disabled:it,bodyElement:"label",labelElement:"span",classNames:o,styles:f,unstyled:v,"data-checked":A.checked||G||void 0,variant:yt,ref:Et,mod:X,...N,...S,children:[vt.jsx("input",{...P,disabled:it,checked:U,"data-checked":A.checked||G||void 0,onChange:_t=>{var dt;rt?(dt=A.onChange)==null||dt.call(A,_t):et==null||et(_t),Q(_t.currentTarget.checked)},id:ft,ref:i,type:"checkbox",role:"switch",...O("input")}),vt.jsxs(Is,{"aria-hidden":"true",component:"span",mod:{error:Ct,"label-position":at,"without-labels":!w&&!g},...O("track"),children:[vt.jsx(Is,{component:"span",mod:{"reduce-motion":!0,"with-thumb-indicator":mt&&!F},...O("thumb"),children:F}),vt.jsx("span",{...O("trackLabel"),children:U?w:g})]})]})});Pi.classes={...Js,...sa};Pi.displayName="@mantine/core/Switch";Pi.Group=bn;var gn={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(u,i){(function(s,o){o(i)})(Qo,function(s){var o="1.9.4";function h(t){var e,n,r,a;for(n=1,r=arguments.length;n<r;n++){a=arguments[n];for(e in a)t[e]=a[e]}return t}var c=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function f(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var v=0;function d(t){return"_leaflet_id"in t||(t._leaflet_id=++v),t._leaflet_id}function p(t,e,n){var r,a,l,_;return _=function(){r=!1,a&&(l.apply(n,a),a=!1)},l=function(){r?a=arguments:(t.apply(n,arguments),setTimeout(_,e),r=!0)},l}function m(t,e,n){var r=e[1],a=e[0],l=r-a;return t===r&&n?t:((t-a)%l+l)%l+a}function g(){return!1}function w(t,e){if(e===!1)return t;var n=Math.pow(10,e===void 0?6:e);return Math.round(t*n)/n}function C(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function k(t){return C(t).split(/\s+/)}function b(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?c(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}function S(t,e,n){var r=[];for(var a in t)r.push(encodeURIComponent(n?a.toUpperCase():a)+"="+encodeURIComponent(t[a]));return(!e||e.indexOf("?")===-1?"?":"&")+r.join("&")}var F=/\{ *([\w_ -]+) *\}/g;function G(t,e){return t.replace(F,function(n,r){var a=e[r];if(a===void 0)throw new Error("No value provided for variable "+n);return typeof a=="function"&&(a=a(e)),a})}var T=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function et(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var at="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function kt(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var Ct=0;function it(t){var e=+new Date,n=Math.max(0,16-(e-Ct));return Ct=e+n,window.setTimeout(t,n)}var yt=window.requestAnimationFrame||kt("RequestAnimationFrame")||it,Et=window.cancelAnimationFrame||kt("CancelAnimationFrame")||kt("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function X(t,e,n){if(n&&yt===it)t.call(e);else return yt.call(window,f(t,e))}function mt(t){t&&Et.call(window,t)}var It={__proto__:null,extend:h,create:c,bind:f,get lastId(){return v},stamp:d,throttle:p,wrapNum:m,falseFn:g,formatNum:w,trim:C,splitWords:k,setOptions:b,getParamString:S,template:G,isArray:T,indexOf:et,emptyImageUrl:at,requestFn:yt,cancelFn:Et,requestAnimFrame:X,cancelAnimFrame:mt};function rt(){}rt.extend=function(t){var e=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,r=c(n);r.constructor=e,e.prototype=r;for(var a in this)Object.prototype.hasOwnProperty.call(this,a)&&a!=="prototype"&&a!=="__super__"&&(e[a]=this[a]);return t.statics&&h(e,t.statics),t.includes&&(St(t.includes),h.apply(null,[r].concat(t.includes))),h(r,t),delete r.statics,delete r.includes,r.options&&(r.options=n.options?c(n.options):{},h(r.options,t.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var l=0,_=r._initHooks.length;l<_;l++)r._initHooks[l].call(this)}},e},rt.include=function(t){var e=this.prototype.options;return h(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},rt.mergeOptions=function(t){return h(this.prototype.options,t),this},rt.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function St(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=T(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var O={on:function(t,e,n){if(typeof t=="object")for(var r in t)this._on(r,t[r],e);else{t=k(t);for(var a=0,l=t.length;a<l;a++)this._on(t[a],e,n)}return this},off:function(t,e,n){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var r in t)this._off(r,t[r],e);else{t=k(t);for(var a=arguments.length===1,l=0,_=t.length;l<_;l++)a?this._off(t[l]):this._off(t[l],e,n)}return this},_on:function(t,e,n,r){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,n)===!1){n===this&&(n=void 0);var a={fn:e,ctx:n};r&&(a.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(a)}},_off:function(t,e,n){var r,a,l;if(this._events&&(r=this._events[t],!!r)){if(arguments.length===1){if(this._firingCount)for(a=0,l=r.length;a<l;a++)r[a].fn=g;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var _=this._listens(t,e,n);if(_!==!1){var y=r[_];this._firingCount&&(y.fn=g,this._events[t]=r=r.slice()),r.splice(_,1)}}},fire:function(t,e,n){if(!this.listens(t,n))return this;var r=h({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var a=this._events[t];if(a){this._firingCount=this._firingCount+1||1;for(var l=0,_=a.length;l<_;l++){var y=a[l],x=y.fn;y.once&&this.off(t,x,y.ctx),x.call(y.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(t,e,n,r){typeof t!="string"&&console.warn('"string" type argument expected');var a=e;typeof e!="function"&&(r=!!e,a=void 0,n=void 0);var l=this._events&&this._events[t];if(l&&l.length&&this._listens(t,a,n)!==!1)return!0;if(r){for(var _ in this._eventParents)if(this._eventParents[_].listens(t,e,n,r))return!0}return!1},_listens:function(t,e,n){if(!this._events)return!1;var r=this._events[t]||[];if(!e)return!!r.length;n===this&&(n=void 0);for(var a=0,l=r.length;a<l;a++)if(r[a].fn===e&&r[a].ctx===n)return a;return!1},once:function(t,e,n){if(typeof t=="object")for(var r in t)this._on(r,t[r],e,!0);else{t=k(t);for(var a=0,l=t.length;a<l;a++)this._on(t[a],e,n,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[d(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[d(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,h({layer:t.target,propagatedFrom:t.target},t),!0)}};O.addEventListener=O.on,O.removeEventListener=O.clearAllEventListeners=O.off,O.addOneTimeEventListener=O.once,O.fireEvent=O.fire,O.hasEventListeners=O.listens;var N=rt.extend(O);function P(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var ft=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};P.prototype={clone:function(){return new P(this.x,this.y)},add:function(t){return this.clone()._add(A(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(A(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new P(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new P(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ft(this.x),this.y=ft(this.y),this},distanceTo:function(t){t=A(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=A(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=A(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function A(t,e,n){return t instanceof P?t:T(t)?new P(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new P(t.x,t.y):new P(t,e,n)}function U(t,e){if(t)for(var n=e?[t,e]:t,r=0,a=n.length;r<a;r++)this.extend(n[r])}U.prototype={extend:function(t){var e,n;if(!t)return this;if(t instanceof P||typeof t[0]=="number"||"x"in t)e=n=A(t);else if(t=Q(t),e=t.min,n=t.max,!e||!n)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=n.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(t){return A((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return A(this.min.x,this.max.y)},getTopRight:function(){return A(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return typeof t[0]=="number"||t instanceof P?t=A(t):t=Q(t),t instanceof U?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=Q(t);var e=this.min,n=this.max,r=t.min,a=t.max,l=a.x>=e.x&&r.x<=n.x,_=a.y>=e.y&&r.y<=n.y;return l&&_},overlaps:function(t){t=Q(t);var e=this.min,n=this.max,r=t.min,a=t.max,l=a.x>e.x&&r.x<n.x,_=a.y>e.y&&r.y<n.y;return l&&_},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,n=this.max,r=Math.abs(e.x-n.x)*t,a=Math.abs(e.y-n.y)*t;return Q(A(e.x-r,e.y-a),A(n.x+r,n.y+a))},equals:function(t){return t?(t=Q(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Q(t,e){return!t||t instanceof U?t:new U(t,e)}function _t(t,e){if(t)for(var n=e?[t,e]:t,r=0,a=n.length;r<a;r++)this.extend(n[r])}_t.prototype={extend:function(t){var e=this._southWest,n=this._northEast,r,a;if(t instanceof z)r=t,a=t;else if(t instanceof _t){if(r=t._southWest,a=t._northEast,!r||!a)return this}else return t?this.extend(q(t)||dt(t)):this;return!e&&!n?(this._southWest=new z(r.lat,r.lng),this._northEast=new z(a.lat,a.lng)):(e.lat=Math.min(r.lat,e.lat),e.lng=Math.min(r.lng,e.lng),n.lat=Math.max(a.lat,n.lat),n.lng=Math.max(a.lng,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,a=Math.abs(e.lng-n.lng)*t;return new _t(new z(e.lat-r,e.lng-a),new z(n.lat+r,n.lng+a))},getCenter:function(){return new z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new z(this.getNorth(),this.getWest())},getSouthEast:function(){return new z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof z||"lat"in t?t=q(t):t=dt(t);var e=this._southWest,n=this._northEast,r,a;return t instanceof _t?(r=t.getSouthWest(),a=t.getNorthEast()):r=a=t,r.lat>=e.lat&&a.lat<=n.lat&&r.lng>=e.lng&&a.lng<=n.lng},intersects:function(t){t=dt(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),a=t.getNorthEast(),l=a.lat>=e.lat&&r.lat<=n.lat,_=a.lng>=e.lng&&r.lng<=n.lng;return l&&_},overlaps:function(t){t=dt(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),a=t.getNorthEast(),l=a.lat>e.lat&&r.lat<n.lat,_=a.lng>e.lng&&r.lng<n.lng;return l&&_},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=dt(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function dt(t,e){return t instanceof _t?t:new _t(t,e)}function z(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==void 0&&(this.alt=+n)}z.prototype={equals:function(t,e){if(!t)return!1;t=q(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+w(this.lat,t)+", "+w(this.lng,t)+")"},distanceTo:function(t){return Pt.distance(this,q(t))},wrap:function(){return Pt.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return dt([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new z(this.lat,this.lng,this.alt)}};function q(t,e,n){return t instanceof z?t:T(t)&&typeof t[0]!="object"?t.length===3?new z(t[0],t[1],t[2]):t.length===2?new z(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new z(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new z(t,e,n)}var Rt={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),r=this.transformation.transform(e.min,n),a=this.transformation.transform(e.max,n);return new U(r,a)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?m(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?m(t.lat,this.wrapLat,!0):t.lat,r=t.alt;return new z(n,e,r)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,a=e.lng-n.lng;if(r===0&&a===0)return t;var l=t.getSouthWest(),_=t.getNorthEast(),y=new z(l.lat-r,l.lng-a),x=new z(_.lat-r,_.lng-a);return new _t(y,x)}},Pt=h({},Rt,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,a=e.lat*n,l=Math.sin((e.lat-t.lat)*n/2),_=Math.sin((e.lng-t.lng)*n/2),y=l*l+Math.cos(r)*Math.cos(a)*_*_,x=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return this.R*x}}),Qt=6378137,re={R:Qt,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),a=Math.sin(r*e);return new P(this.R*t.lng*e,this.R*Math.log((1+a)/(1-a))/2)},unproject:function(t){var e=180/Math.PI;return new z((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=Qt*Math.PI;return new U([-t,-t],[t,t])}()};function ve(t,e,n,r){if(T(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=n,this._d=r}ve.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new P((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function Zt(t,e,n,r){return new ve(t,e,n,r)}var oe=h({},Pt,{code:"EPSG:3857",projection:re,transformation:function(){var t=.5/(Math.PI*re.R);return Zt(t,.5,-t,.5)}()}),Wt=h({},oe,{code:"EPSG:900913"});function zt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Te(t,e){var n="",r,a,l,_,y,x;for(r=0,l=t.length;r<l;r++){for(y=t[r],a=0,_=y.length;a<_;a++)x=y[a],n+=(a?"L":"M")+x.x+" "+x.y;n+=e?V.svg?"z":"x":""}return n||"M0 0"}var I=document.documentElement.style,R="ActiveXObject"in window,Y=R&&!document.addEventListener,pt="msLaunchUri"in navigator&&!("documentMode"in document),Lt=te("webkit"),ht=te("android"),lt=te("android 2")||te("android 3"),B=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),W=ht&&te("Google")&&B<537&&!("AudioNode"in window),wt=!!window.opera,Yt=!pt&&te("chrome"),jt=te("gecko")&&!Lt&&!wt&&!R,Jt=!Yt&&te("safari"),Ht=te("phantom"),fe="OTransition"in I,Er=navigator.platform.indexOf("Win")===0,An=R&&"transition"in I,Di="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!lt,Mn="MozPerspective"in I,br=!window.L_DISABLE_3D&&(An||Di||Mn)&&!fe&&!Ht,Ze=typeof orientation<"u"||te("mobile"),Sr=Ze&&Lt,Lr=Ze&&Di,In=!window.PointerEvent&&window.MSPointerEvent,Bn=!!(window.PointerEvent||In),On="ontouchstart"in window||!!window.TouchEvent,Tr=!window.L_NO_TOUCH&&(On||Bn),Pr=Ze&&wt,Ar=Ze&&jt,Mr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ir=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",g,e),window.removeEventListener("testPassiveEventSupport",g,e)}catch{}return t}(),Br=function(){return!!document.createElement("canvas").getContext}(),Ni=!!(document.createElementNS&&zt("svg").createSVGRect),Or=!!Ni&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Rr=!Ni&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),Fr=navigator.platform.indexOf("Mac")===0,Dr=navigator.platform.indexOf("Linux")===0;function te(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var V={ie:R,ielt9:Y,edge:pt,webkit:Lt,android:ht,android23:lt,androidStock:W,opera:wt,chrome:Yt,gecko:jt,safari:Jt,phantom:Ht,opera12:fe,win:Er,ie3d:An,webkit3d:Di,gecko3d:Mn,any3d:br,mobile:Ze,mobileWebkit:Sr,mobileWebkit3d:Lr,msPointer:In,pointer:Bn,touch:Tr,touchNative:On,mobileOpera:Pr,mobileGecko:Ar,retina:Mr,passiveEvents:Ir,canvas:Br,svg:Ni,vml:Rr,inlineSvg:Or,mac:Fr,linux:Dr},Rn=V.msPointer?"MSPointerDown":"pointerdown",Fn=V.msPointer?"MSPointerMove":"pointermove",Dn=V.msPointer?"MSPointerUp":"pointerup",Nn=V.msPointer?"MSPointerCancel":"pointercancel",zi={touchstart:Rn,touchmove:Fn,touchend:Dn,touchcancel:Nn},zn={touchstart:Ur,touchmove:ni,touchend:ni,touchcancel:ni},Pe={},Vn=!1;function Nr(t,e,n){return e==="touchstart"&&Hr(),zn[e]?(n=zn[e].bind(this,n),t.addEventListener(zi[e],n,!1),n):(console.warn("wrong event specified:",e),g)}function zr(t,e,n){if(!zi[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(zi[e],n,!1)}function Vr(t){Pe[t.pointerId]=t}function Zr(t){Pe[t.pointerId]&&(Pe[t.pointerId]=t)}function Zn(t){delete Pe[t.pointerId]}function Hr(){Vn||(document.addEventListener(Rn,Vr,!0),document.addEventListener(Fn,Zr,!0),document.addEventListener(Dn,Zn,!0),document.addEventListener(Nn,Zn,!0),Vn=!0)}function ni(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var n in Pe)e.touches.push(Pe[n]);e.changedTouches=[e],t(e)}}function Ur(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Ot(e),ni(t,e)}function Wr(t){var e={},n,r;for(r in t)n=t[r],e[r]=n&&n.bind?n.bind(t):n;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var jr=200;function Gr(t,e){t.addEventListener("dblclick",e);var n=0,r;function a(l){if(l.detail!==1){r=l.detail;return}if(!(l.pointerType==="mouse"||l.sourceCapabilities&&!l.sourceCapabilities.firesTouchEvents)){var _=Gn(l);if(!(_.some(function(x){return x instanceof HTMLLabelElement&&x.attributes.for})&&!_.some(function(x){return x instanceof HTMLInputElement||x instanceof HTMLSelectElement}))){var y=Date.now();y-n<=jr?(r++,r===2&&e(Wr(l))):r=1,n=y}}}return t.addEventListener("click",a),{dblclick:e,simDblclick:a}}function Kr(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var Vi=oi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),He=oi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Hn=He==="webkitTransition"||He==="OTransition"?He+"End":"transitionend";function Un(t){return typeof t=="string"?document.getElementById(t):t}function Ue(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||n==="auto")&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return n==="auto"?null:n}function ct(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function xt(t){var e=t.parentNode;e&&e.removeChild(t)}function si(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ae(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function Me(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Zi(t,e){if(t.classList!==void 0)return t.classList.contains(e);var n=ri(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function J(t,e){if(t.classList!==void 0)for(var n=k(e),r=0,a=n.length;r<a;r++)t.classList.add(n[r]);else if(!Zi(t,e)){var l=ri(t);Hi(t,(l?l+" ":"")+e)}}function Tt(t,e){t.classList!==void 0?t.classList.remove(e):Hi(t,C((" "+ri(t)+" ").replace(" "+e+" "," ")))}function Hi(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function ri(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Gt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&qr(t,e)}function qr(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch{if(e===1)return}e=Math.round(e*100),n?(n.Enabled=e!==100,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}function oi(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function ye(t,e,n){var r=e||new P(0,0);t.style[Vi]=(V.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function At(t,e){t._leaflet_pos=e,V.any3d?ye(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function we(t){return t._leaflet_pos||new P(0,0)}var We,je,Ui;if("onselectstart"in document)We=function(){$(window,"selectstart",Ot)},je=function(){gt(window,"selectstart",Ot)};else{var Ge=oi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);We=function(){if(Ge){var t=document.documentElement.style;Ui=t[Ge],t[Ge]="none"}},je=function(){Ge&&(document.documentElement.style[Ge]=Ui,Ui=void 0)}}function Wi(){$(window,"dragstart",Ot)}function ji(){gt(window,"dragstart",Ot)}var ai,Gi;function Ki(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(ui(),ai=t,Gi=t.style.outlineStyle,t.style.outlineStyle="none",$(window,"keydown",ui))}function ui(){ai&&(ai.style.outlineStyle=Gi,ai=void 0,Gi=void 0,gt(window,"keydown",ui))}function Wn(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function qi(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Yr={__proto__:null,TRANSFORM:Vi,TRANSITION:He,TRANSITION_END:Hn,get:Un,getStyle:Ue,create:ct,remove:xt,empty:si,toFront:Ae,toBack:Me,hasClass:Zi,addClass:J,removeClass:Tt,setClass:Hi,getClass:ri,setOpacity:Gt,testProp:oi,setTransform:ye,setPosition:At,getPosition:we,get disableTextSelection(){return We},get enableTextSelection(){return je},disableImageDrag:Wi,enableImageDrag:ji,preventOutline:Ki,restoreOutline:ui,getSizedParentNode:Wn,getScale:qi};function $(t,e,n,r){if(e&&typeof e=="object")for(var a in e)$i(t,a,e[a],n);else{e=k(e);for(var l=0,_=e.length;l<_;l++)$i(t,e[l],n,r)}return this}var ee="_leaflet_events";function gt(t,e,n,r){if(arguments.length===1)jn(t),delete t[ee];else if(e&&typeof e=="object")for(var a in e)Xi(t,a,e[a],n);else if(e=k(e),arguments.length===2)jn(t,function(y){return et(e,y)!==-1});else for(var l=0,_=e.length;l<_;l++)Xi(t,e[l],n,r);return this}function jn(t,e){for(var n in t[ee]){var r=n.split(/\d/)[0];(!e||e(r))&&Xi(t,r,null,null,n)}}var Yi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function $i(t,e,n,r){var a=e+d(n)+(r?"_"+d(r):"");if(t[ee]&&t[ee][a])return this;var l=function(y){return n.call(r||t,y||window.event)},_=l;!V.touchNative&&V.pointer&&e.indexOf("touch")===0?l=Nr(t,e,l):V.touch&&e==="dblclick"?l=Gr(t,l):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(Yi[e]||e,l,V.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(l=function(y){y=y||window.event,Ji(t,y)&&_(y)},t.addEventListener(Yi[e],l,!1)):t.addEventListener(e,_,!1):t.attachEvent("on"+e,l),t[ee]=t[ee]||{},t[ee][a]=l}function Xi(t,e,n,r,a){a=a||e+d(n)+(r?"_"+d(r):"");var l=t[ee]&&t[ee][a];if(!l)return this;!V.touchNative&&V.pointer&&e.indexOf("touch")===0?zr(t,e,l):V.touch&&e==="dblclick"?Kr(t,l):"removeEventListener"in t?t.removeEventListener(Yi[e]||e,l,!1):t.detachEvent("on"+e,l),t[ee][a]=null}function xe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Qi(t){return $i(t,"wheel",xe),this}function Ke(t){return $(t,"mousedown touchstart dblclick contextmenu",xe),t._leaflet_disable_click=!0,this}function Ot(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ke(t){return Ot(t),xe(t),this}function Gn(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function Kn(t,e){if(!e)return new P(t.clientX,t.clientY);var n=qi(e),r=n.boundingClientRect;return new P((t.clientX-r.left)/n.x-e.clientLeft,(t.clientY-r.top)/n.y-e.clientTop)}var $r=V.linux&&V.chrome?window.devicePixelRatio:V.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function qn(t){return V.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/$r:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Ji(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch{return!1}return n!==t}var Xr={__proto__:null,on:$,off:gt,stopPropagation:xe,disableScrollPropagation:Qi,disableClickPropagation:Ke,preventDefault:Ot,stop:ke,getPropagationPath:Gn,getMousePosition:Kn,getWheelDelta:qn,isExternalTarget:Ji,addListener:$,removeListener:gt},Yn=N.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=we(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=X(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=this._duration*1e3;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),At(this._el,n),this.fire("step")},_complete:function(){mt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ut=N.extend({options:{crs:oe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=b(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(q(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=He&&V.any3d&&!V.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),$(this._proxy,Hn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(q(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==void 0&&(n.zoom=h({animate:n.animate},n.zoom),n.pan=h({animate:n.animate,duration:n.duration},n.pan));var r=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,n.pan&&n.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(V.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(V.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),a=this.getSize().divideBy(2),l=t instanceof P?t:this.latLngToContainerPoint(t),_=l.subtract(a).multiplyBy(1-1/r),y=this.containerPointToLatLng(a.add(_));return this.setView(y,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():dt(t);var n=A(e.paddingTopLeft||e.padding||[0,0]),r=A(e.paddingBottomRight||e.padding||[0,0]),a=this.getBoundsZoom(t,!1,n.add(r));if(a=typeof e.maxZoom=="number"?Math.min(e.maxZoom,a):a,a===1/0)return{center:t.getCenter(),zoom:a};var l=r.subtract(n).divideBy(2),_=this.project(t.getSouthWest(),a),y=this.project(t.getNorthEast(),a),x=this.unproject(_.add(y).divideBy(2).add(l),a);return{center:x,zoom:a}},fitBounds:function(t,e){if(t=dt(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=A(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Yn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){J(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(n=n||{},n.animate===!1||!V.any3d)return this.setView(t,e,n);this._stop();var r=this.project(this.getCenter()),a=this.project(t),l=this.getSize(),_=this._zoom;t=q(t),e=e===void 0?_:e;var y=Math.max(l.x,l.y),x=y*this.getZoomScale(_,e),E=a.distanceTo(r)||1,M=1.42,j=M*M;function nt(Mt){var wi=Mt?-1:1,Vo=Mt?x:y,Zo=x*x-y*y+wi*j*j*E*E,Ho=2*Vo*j*E,cn=Zo/Ho,Ps=Math.sqrt(cn*cn+1)-cn,Uo=Ps<1e-9?-18:Math.log(Ps);return Uo}function Nt(Mt){return(Math.exp(Mt)-Math.exp(-Mt))/2}function Bt(Mt){return(Math.exp(Mt)+Math.exp(-Mt))/2}function qt(Mt){return Nt(Mt)/Bt(Mt)}var Vt=nt(0);function De(Mt){return y*(Bt(Vt)/Bt(Vt+M*Mt))}function Fo(Mt){return y*(Bt(Vt)*qt(Vt+M*Mt)-Nt(Vt))/j}function Do(Mt){return 1-Math.pow(1-Mt,1.5)}var No=Date.now(),Ls=(nt(1)-Vt)/M,zo=n.duration?1e3*n.duration:1e3*Ls*.8;function Ts(){var Mt=(Date.now()-No)/zo,wi=Do(Mt)*Ls;Mt<=1?(this._flyToFrame=X(Ts,this),this._move(this.unproject(r.add(a.subtract(r).multiplyBy(Fo(wi)/E)),_),this.getScaleZoom(y/De(wi),_),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),Ts.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=dt(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,dt(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var n=A(e.paddingTopLeft||e.padding||[0,0]),r=A(e.paddingBottomRight||e.padding||[0,0]),a=this.project(this.getCenter()),l=this.project(t),_=this.getPixelBounds(),y=Q([_.min.add(n),_.max.subtract(r)]),x=y.getSize();if(!y.contains(l)){this._enforcingBounds=!0;var E=l.subtract(y.getCenter()),M=y.extend(l).getSize().subtract(x);a.x+=E.x<0?-M.x:M.x,a.y+=E.y<0?-M.y:M.y,this.panTo(this.unproject(a),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=h({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),r=e.divideBy(2).round(),a=n.divideBy(2).round(),l=r.subtract(a);return!l.x&&!l.y?this:(t.animate&&t.pan?this.panBy(l):(t.pan&&this._rawPanBy(l),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=h({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=f(this._handleGeolocationResponse,this),n=f(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,n=t.coords.longitude,r=new z(e,n),a=r.toBounds(t.coords.accuracy*2),l=this._locateOptions;if(l.setView){var _=this.getBoundsZoom(a);this.setView(r,l.maxZoom?Math.min(_,l.maxZoom):_)}var y={latlng:r,bounds:a,timestamp:t.timestamp};for(var x in t.coords)typeof t.coords[x]=="number"&&(y[x]=t.coords[x]);this.fire("locationfound",y)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),xt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(mt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)xt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),r=ct("div",n,e||this._mapPane);return t&&(this._panes[t]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new _t(e,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=dt(t),n=A(n||[0,0]);var r=this.getZoom()||0,a=this.getMinZoom(),l=this.getMaxZoom(),_=t.getNorthWest(),y=t.getSouthEast(),x=this.getSize().subtract(n),E=Q(this.project(y,r),this.project(_,r)).getSize(),M=V.any3d?this.options.zoomSnap:1,j=x.x/E.x,nt=x.y/E.y,Nt=e?Math.max(j,nt):Math.min(j,nt);return r=this.getScaleZoom(Nt,r),M&&(r=Math.round(r/(M/100))*(M/100),r=e?Math.ceil(r/M)*M:Math.floor(r/M)*M),Math.max(a,Math.min(l,r))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new U(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===void 0?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===void 0?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(q(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(A(t),e)},layerPointToLatLng:function(t){var e=A(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(q(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(q(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(dt(t))},distance:function(t,e){return this.options.crs.distance(q(t),q(e))},containerPointToLayerPoint:function(t){return A(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return A(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(A(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(q(t)))},mouseEventToContainerPoint:function(t){return Kn(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Un(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");$(e,"scroll",this._onScroll,this),this._containerId=d(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&V.any3d,J(t,"leaflet-container"+(V.touch?" leaflet-touch":"")+(V.retina?" leaflet-retina":"")+(V.ielt9?" leaflet-oldie":"")+(V.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Ue(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),At(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(J(t.markerPane,"leaflet-zoom-hide"),J(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){At(this._mapPane,new P(0,0));var r=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var a=this._zoom!==e;this._moveStart(a,n)._move(t,e)._moveEnd(a),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,r){e===void 0&&(e=this._zoom);var a=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),r?n&&n.pinch&&this.fire("zoom",n):((a||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return mt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){At(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[d(this._container)]=this;var e=t?gt:$;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),V.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){mt(this._resizeRequest),this._resizeRequest=X(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n=[],r,a=e==="mouseout"||e==="mouseover",l=t.target||t.srcElement,_=!1;l;){if(r=this._targets[d(l)],r&&(e==="click"||e==="preclick")&&this._draggableMoved(r)){_=!0;break}if(r&&r.listens(e,!0)&&(a&&!Ji(l,t)||(n.push(r),a))||l===this._container)break;l=l.parentNode}return!n.length&&!_&&!a&&this.listens(e,!0)&&(n=[this]),n},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var n=t.type;n==="mousedown"&&Ki(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if(t.type==="click"){var r=h({},t);r.type="preclick",this._fireDOMEvent(r,r.type,n)}var a=this._findEventTargets(t,e);if(n){for(var l=[],_=0;_<n.length;_++)n[_].listens(e,!0)&&l.push(n[_]);a=l.concat(a)}if(a.length){e==="contextmenu"&&Ot(t);var y=a[0],x={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var E=y.getLatLng&&(!y._radius||y._radius<=10);x.containerPoint=E?this.latLngToContainerPoint(y.getLatLng()):this.mouseEventToContainerPoint(t),x.layerPoint=this.containerPointToLayerPoint(x.containerPoint),x.latlng=E?y.getLatLng():this.layerPointToLatLng(x.layerPoint)}for(_=0;_<a.length;_++)if(a[_].fire(e,x,!0),x.originalEvent._stopped||a[_].options.bubblingMouseEvents===!1&&et(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return we(this._mapPane)||new P(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return Q([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),a=this.getSize().divideBy(2),l=new U(r.subtract(a),r.add(a)),_=this._getBoundsOffset(l,n,e);return Math.abs(_.x)<=1&&Math.abs(_.y)<=1?t:this.unproject(r.add(_),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new U(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=Q(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),a=r.min.subtract(t.min),l=r.max.subtract(t.max),_=this._rebound(a.x,-l.x),y=this._rebound(a.y,-l.y);return new P(_,y)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=V.any3d?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=Vi,r=this._proxy.style[n];ye(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),r===this._proxy.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){xt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ye(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),a=this._getCenterOffset(t)._divideBy(1-1/r);return n.animate!==!0&&!this.getSize().contains(a)?!1:(X(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,J(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Qr(t,e){return new ut(t,e)}var $t=rt.extend({options:{position:"topright"},initialize:function(t){b(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return J(e,"leaflet-control"),n.indexOf("bottom")!==-1?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(xt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),qe=function(t){return new $t(t)};ut.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ct("div",e+"control-container",this._container);function r(a,l){var _=e+a+" "+e+l;t[a+l]=ct("div",_,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)xt(this._controlCorners[t]);xt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $n=$t.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){b(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var r in t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return $t.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(d(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){J(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(J(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ct("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ke(e),Qi(e);var r=this._section=ct("section",t+"-list");n&&(this._map.on("click",this.collapse,this),$(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var a=this._layersLink=ct("a",t+"-toggle",e);a.href="#",a.title="Layers",a.setAttribute("role","button"),$(a,{keydown:function(l){l.keyCode===13&&this._expandSafely()},click:function(l){Ot(l),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=ct("div",t+"-base",r),this._separator=ct("div",t+"-separator",r),this._overlaysList=ct("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&d(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(f(function(r,a){return this.options.sortFunction(r.layer,a.layer,r.name,a.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;si(this._baseLayersList),si(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,a=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,a+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&a>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(d(t.target)),n=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e=document.createElement("label"),n=this._map.hasLayer(t.layer),r;t.overlay?(r=document.createElement("input"),r.type="checkbox",r.className="leaflet-control-layers-selector",r.defaultChecked=n):r=this._createRadioElement("leaflet-base-layers_"+d(this),n),this._layerControlInputs.push(r),r.layerId=d(t.layer),$(r,"click",this._onInputClick,this);var a=document.createElement("span");a.innerHTML=" "+t.name;var l=document.createElement("span");e.appendChild(l),l.appendChild(r),l.appendChild(a);var _=t.overlay?this._overlaysList:this._baseLayersList;return _.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,n,r=[],a=[];this._handlingClick=!0;for(var l=t.length-1;l>=0;l--)e=t[l],n=this._getLayer(e.layerId).layer,e.checked?r.push(n):e.checked||a.push(n);for(l=0;l<a.length;l++)this._map.hasLayer(a[l])&&this._map.removeLayer(a[l]);for(l=0;l<r.length;l++)this._map.hasLayer(r[l])||this._map.addLayer(r[l]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,n,r=this._map.getZoom(),a=t.length-1;a>=0;a--)e=t[a],n=this._getLayer(e.layerId).layer,e.disabled=n.options.minZoom!==void 0&&r<n.options.minZoom||n.options.maxZoom!==void 0&&r>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,$(t,"click",Ot),this.expand();var e=this;setTimeout(function(){gt(t,"click",Ot),e._preventClick=!1})}}),Jr=function(t,e,n){return new $n(t,e,n)},tn=$t.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ct("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,a){var l=ct("a",n,r);return l.innerHTML=t,l.href="#",l.title=e,l.setAttribute("role","button"),l.setAttribute("aria-label",e),Ke(l),$(l,"click",ke),$(l,"click",a,this),$(l,"click",this._refocusOnMap,this),l},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";Tt(this._zoomInButton,e),Tt(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(J(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(J(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});ut.mergeOptions({zoomControl:!0}),ut.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new tn,this.addControl(this.zoomControl))});var to=function(t){return new tn(t)},Xn=$t.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=ct("div",e),r=this.options;return this._addScales(r,e+"-line",n),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ct("div",e,n)),t.imperial&&(this._iScale=ct("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e=t*3.2808399,n,r,a;e>5280?(n=e/5280,r=this._getRoundNum(n),this._updateScale(this._iScale,r+" mi",r/n)):(a=this._getRoundNum(e),this._updateScale(this._iScale,a+" ft",a/e))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),eo=function(t){return new Xn(t)},io='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',en=$t.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(V.inlineSvg?io+" ":"")+"Leaflet</a>"},initialize:function(t){b(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ct("div","leaflet-control-attribution"),Ke(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});ut.mergeOptions({attributionControl:!0}),ut.addInitHook(function(){this.options.attributionControl&&new en().addTo(this)});var no=function(t){return new en(t)};$t.Layers=$n,$t.Zoom=tn,$t.Scale=Xn,$t.Attribution=en,qe.layers=Jr,qe.zoom=to,qe.scale=eo,qe.attribution=no;var ie=rt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ie.addTo=function(t,e){return t.addHandler(e,this),this};var so={Events:O},Qn=V.touch?"touchstart mousedown":"mousedown",pe=N.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){b(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||($(this._dragStartTarget,Qn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(pe._dragging===this&&this.finishDrag(!0),gt(this._dragStartTarget,Qn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Zi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){pe._dragging===this&&this.finishDrag();return}if(!(pe._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(pe._dragging=this,this._preventOutline&&Ki(this._element),Wi(),We(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,n=Wn(this._element);this._startPoint=new P(e.clientX,e.clientY),this._startPos=we(this._element),this._parentScale=qi(n);var r=t.type==="mousedown";$(document,r?"mousemove":"touchmove",this._onMove,this),$(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,n=new P(e.clientX,e.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Ot(t),this._moved||(this.fire("dragstart"),this._moved=!0,J(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),J(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),At(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Tt(document.body,"leaflet-dragging"),this._lastTarget&&(Tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),gt(document,"mousemove touchmove",this._onMove,this),gt(document,"mouseup touchend touchcancel",this._onUp,this),ji(),je();var e=this._moved&&this._moving;this._moving=!1,pe._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Jn(t,e,n){var r,a=[1,4,2,8],l,_,y,x,E,M,j,nt;for(l=0,M=t.length;l<M;l++)t[l]._code=Ce(t[l],e);for(y=0;y<4;y++){for(j=a[y],r=[],l=0,M=t.length,_=M-1;l<M;_=l++)x=t[l],E=t[_],x._code&j?E._code&j||(nt=hi(E,x,j,e,n),nt._code=Ce(nt,e),r.push(nt)):(E._code&j&&(nt=hi(E,x,j,e,n),nt._code=Ce(nt,e),r.push(nt)),r.push(x));t=r}return t}function ts(t,e){var n,r,a,l,_,y,x,E,M;if(!t||t.length===0)throw new Error("latlngs not passed");Kt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var j=q([0,0]),nt=dt(t),Nt=nt.getNorthWest().distanceTo(nt.getSouthWest())*nt.getNorthEast().distanceTo(nt.getNorthWest());Nt<1700&&(j=nn(t));var Bt=t.length,qt=[];for(n=0;n<Bt;n++){var Vt=q(t[n]);qt.push(e.project(q([Vt.lat-j.lat,Vt.lng-j.lng])))}for(y=x=E=0,n=0,r=Bt-1;n<Bt;r=n++)a=qt[n],l=qt[r],_=a.y*l.x-l.y*a.x,x+=(a.x+l.x)*_,E+=(a.y+l.y)*_,y+=_*3;y===0?M=qt[0]:M=[x/y,E/y];var De=e.unproject(A(M));return q([De.lat+j.lat,De.lng+j.lng])}function nn(t){for(var e=0,n=0,r=0,a=0;a<t.length;a++){var l=q(t[a]);e+=l.lat,n+=l.lng,r++}return q([e/r,n/r])}var ro={__proto__:null,clipPolygon:Jn,polygonCenter:ts,centroid:nn};function es(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=uo(t,n),t=ao(t,n),t}function is(t,e,n){return Math.sqrt(Ye(t,e,n,!0))}function oo(t,e,n){return Ye(t,e,n)}function ao(t,e){var n=t.length,r=typeof Uint8Array<"u"?Uint8Array:Array,a=new r(n);a[0]=a[n-1]=1,sn(t,a,e,0,n-1);var l,_=[];for(l=0;l<n;l++)a[l]&&_.push(t[l]);return _}function sn(t,e,n,r,a){var l=0,_,y,x;for(y=r+1;y<=a-1;y++)x=Ye(t[y],t[r],t[a],!0),x>l&&(_=y,l=x);l>n&&(e[_]=1,sn(t,e,n,r,_),sn(t,e,n,_,a))}function uo(t,e){for(var n=[t[0]],r=1,a=0,l=t.length;r<l;r++)ho(t[r],t[a])>e&&(n.push(t[r]),a=r);return a<l-1&&n.push(t[l-1]),n}var ns;function ss(t,e,n,r,a){var l=r?ns:Ce(t,n),_=Ce(e,n),y,x,E;for(ns=_;;){if(!(l|_))return[t,e];if(l&_)return!1;y=l||_,x=hi(t,e,y,n,a),E=Ce(x,n),y===l?(t=x,l=E):(e=x,_=E)}}function hi(t,e,n,r,a){var l=e.x-t.x,_=e.y-t.y,y=r.min,x=r.max,E,M;return n&8?(E=t.x+l*(x.y-t.y)/_,M=x.y):n&4?(E=t.x+l*(y.y-t.y)/_,M=y.y):n&2?(E=x.x,M=t.y+_*(x.x-t.x)/l):n&1&&(E=y.x,M=t.y+_*(y.x-t.x)/l),new P(E,M,a)}function Ce(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function ho(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function Ye(t,e,n,r){var a=e.x,l=e.y,_=n.x-a,y=n.y-l,x=_*_+y*y,E;return x>0&&(E=((t.x-a)*_+(t.y-l)*y)/x,E>1?(a=n.x,l=n.y):E>0&&(a+=_*E,l+=y*E)),_=t.x-a,y=t.y-l,r?_*_+y*y:new P(a,l)}function Kt(t){return!T(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function rs(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Kt(t)}function os(t,e){var n,r,a,l,_,y,x,E;if(!t||t.length===0)throw new Error("latlngs not passed");Kt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var M=q([0,0]),j=dt(t),nt=j.getNorthWest().distanceTo(j.getSouthWest())*j.getNorthEast().distanceTo(j.getNorthWest());nt<1700&&(M=nn(t));var Nt=t.length,Bt=[];for(n=0;n<Nt;n++){var qt=q(t[n]);Bt.push(e.project(q([qt.lat-M.lat,qt.lng-M.lng])))}for(n=0,r=0;n<Nt-1;n++)r+=Bt[n].distanceTo(Bt[n+1])/2;if(r===0)E=Bt[0];else for(n=0,l=0;n<Nt-1;n++)if(_=Bt[n],y=Bt[n+1],a=_.distanceTo(y),l+=a,l>r){x=(l-r)/a,E=[y.x-x*(y.x-_.x),y.y-x*(y.y-_.y)];break}var Vt=e.unproject(A(E));return q([Vt.lat+M.lat,Vt.lng+M.lng])}var lo={__proto__:null,simplify:es,pointToSegmentDistance:is,closestPointOnSegment:oo,clipSegment:ss,_getEdgeIntersection:hi,_getBitCode:Ce,_sqClosestPointOnSegment:Ye,isFlat:Kt,_flat:rs,polylineCenter:os},rn={project:function(t){return new P(t.lng,t.lat)},unproject:function(t){return new z(t.y,t.x)},bounds:new U([-180,-90],[180,90])},on={R:6378137,R_MINOR:6356752314245179e-9,bounds:new U([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,a=this.R_MINOR/n,l=Math.sqrt(1-a*a),_=l*Math.sin(r),y=Math.tan(Math.PI/4-r/2)/Math.pow((1-_)/(1+_),l/2);return r=-n*Math.log(Math.max(y,1e-10)),new P(t.lng*e*n,r)},unproject:function(t){for(var e=180/Math.PI,n=this.R,r=this.R_MINOR/n,a=Math.sqrt(1-r*r),l=Math.exp(-t.y/n),_=Math.PI/2-2*Math.atan(l),y=0,x=.1,E;y<15&&Math.abs(x)>1e-7;y++)E=a*Math.sin(_),E=Math.pow((1-E)/(1+E),a/2),x=Math.PI/2-2*Math.atan(l*E)-_,_+=x;return new z(_*e,t.x*e/n)}},co={__proto__:null,LonLat:rn,Mercator:on,SphericalMercator:re},fo=h({},Pt,{code:"EPSG:3395",projection:on,transformation:function(){var t=.5/(Math.PI*on.R);return Zt(t,.5,-t,.5)}()}),as=h({},Pt,{code:"EPSG:4326",projection:rn,transformation:Zt(1/180,1,-1/180,.5)}),po=h({},Rt,{projection:rn,transformation:Zt(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});Rt.Earth=Pt,Rt.EPSG3395=fo,Rt.EPSG3857=oe,Rt.EPSG900913=Wt,Rt.EPSG4326=as,Rt.Simple=po;var Xt=N.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[d(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[d(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});ut.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=d(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=d(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return d(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?T(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[d(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=d(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var a=this._zoomBoundLayers[r].options;t=a.minZoom===void 0?t:Math.min(t,a.minZoom),e=a.maxZoom===void 0?e:Math.max(e,a.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ie=Xt.extend({initialize:function(t,e){b(this,e),this._layers={};var n,r;if(t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),n,r;for(n in this._layers)r=this._layers[n],r[t]&&r[t].apply(r,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return d(t)}}),_o=function(t,e){return new Ie(t,e)},ae=Ie.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Ie.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Ie.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new _t;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),mo=function(t,e){return new ae(t,e)},Be=rt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){b(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(r,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];typeof r=="number"&&(r=[r,r]);var a=A(r),l=A(e==="shadow"&&n.shadowAnchor||n.iconAnchor||a&&a.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),l&&(t.style.marginLeft=-l.x+"px",t.style.marginTop=-l.y+"px"),a&&(t.style.width=a.x+"px",t.style.height=a.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return V.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function go(t){return new Be(t)}var $e=Be.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof $e.imagePath!="string"&&($e.imagePath=this._detectIconPath()),(this.options.imagePath||$e.imagePath)+Be.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(n,r,a){var l=r.exec(n);return l&&l[a]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ct("div","leaflet-default-icon-path",document.body),e=Ue(t,"background-image")||Ue(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),us=ie.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new pe(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),J(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,a=this._marker.options.autoPanPadding,l=we(e._icon),_=n.getPixelBounds(),y=n.getPixelOrigin(),x=Q(_.min._subtract(y).add(a),_.max._subtract(y).subtract(a));if(!x.contains(l)){var E=A((Math.max(x.max.x,l.x)-x.max.x)/(_.max.x-x.max.x)-(Math.min(x.min.x,l.x)-x.min.x)/(_.min.x-x.min.x),(Math.max(x.max.y,l.y)-x.max.y)/(_.max.y-x.max.y)-(Math.min(x.min.y,l.y)-x.min.y)/(_.min.y-x.min.y)).multiplyBy(r);n.panBy(E,{animate:!1}),this._draggable._newPos._add(E),this._draggable._startPos._add(E),At(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=X(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(mt(this._panRequest),this._panRequest=X(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=we(e._icon),a=e._map.layerPointToLatLng(r);n&&At(n,r),e._latlng=a,t.latlng=a,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){mt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),li=Xt.extend({options:{icon:new $e,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){b(this,e),this._latlng=q(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=q(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),n.tagName==="IMG"&&(n.alt=t.alt||"")),J(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$(n,"focus",this._panOnFocus,this);var a=t.icon.createShadow(this._shadow),l=!1;a!==this._shadow&&(this._removeShadow(),l=!0),a&&(J(a,e),a.alt=""),this._shadow=a,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),a&&l&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gt(this._icon,"focus",this._panOnFocus,this),xt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&xt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&At(this._icon,t),this._shadow&&At(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(J(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),us)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new us(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Gt(this._icon,t),this._shadow&&Gt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?A(e.iconSize):A(0,0),r=e.iconAnchor?A(e.iconAnchor):A(0,0);t.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function vo(t,e){return new li(t,e)}var _e=Xt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return b(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ci=_e.extend({options:{fill:!0,radius:10},initialize:function(t,e){b(this,e),this._latlng=q(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=q(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return _e.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new U(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function yo(t,e){return new ci(t,e)}var an=ci.extend({initialize:function(t,e,n){if(typeof e=="number"&&(e=h({},n,{radius:e})),b(this,e),this._latlng=q(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new _t(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:_e.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===Pt.distance){var a=Math.PI/180,l=this._mRadius/Pt.R/a,_=n.project([e+l,t]),y=n.project([e-l,t]),x=_.add(y).divideBy(2),E=n.unproject(x).lat,M=Math.acos((Math.cos(l*a)-Math.sin(e*a)*Math.sin(E*a))/(Math.cos(e*a)*Math.cos(E*a)))/a;(isNaN(M)||M===0)&&(M=l/Math.cos(Math.PI/180*e)),this._point=x.subtract(n.getPixelOrigin()),this._radius=isNaN(M)?0:x.x-n.project([E,t-M]).x,this._radiusY=x.y-_.y}else{var j=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(j).x}this._updateBounds()}});function wo(t,e,n){return new an(t,e,n)}var ue=_e.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){b(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,n=null,r=Ye,a,l,_=0,y=this._parts.length;_<y;_++)for(var x=this._parts[_],E=1,M=x.length;E<M;E++){a=x[E-1],l=x[E];var j=r(t,a,l,!0);j<e&&(e=j,n=r(t,a,l))}return n&&(n.distance=Math.sqrt(e)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return os(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=q(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new _t,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Kt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=Kt(t),r=0,a=t.length;r<a;r++)n?(e[r]=q(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new U;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new P(t,t);this._rawPxBounds&&(this._pxBounds=new U([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var r=t[0]instanceof z,a=t.length,l,_;if(r){for(_=[],l=0;l<a;l++)_[l]=this._map.latLngToLayerPoint(t[l]),n.extend(_[l]);e.push(_)}else for(l=0;l<a;l++)this._projectLatlngs(t[l],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,n,r,a,l,_,y,x;for(n=0,a=0,l=this._rings.length;n<l;n++)for(x=this._rings[n],r=0,_=x.length;r<_-1;r++)y=ss(x[r],x[r+1],t,r,!0),y&&(e[a]=e[a]||[],e[a].push(y[0]),(y[1]!==x[r+1]||r===_-2)&&(e[a].push(y[1]),a++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=es(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,a,l,_,y,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,l=this._parts.length;n<l;n++)for(y=this._parts[n],r=0,_=y.length,a=_-1;r<_;a=r++)if(!(!e&&r===0)&&is(t,y[a],y[r])<=x)return!0;return!1}});function xo(t,e){return new ue(t,e)}ue._flat=rs;var Oe=ue.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ts(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=ue.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof z&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){ue.prototype._setLatLngs.call(this,t),Kt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Kt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new P(e,e);if(t=new U(t.min.subtract(n),t.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var r=0,a=this._rings.length,l;r<a;r++)l=Jn(this._rings[r],t,!0),l.length&&this._parts.push(l)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,n,r,a,l,_,y,x,E;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(l=0,x=this._parts.length;l<x;l++)for(n=this._parts[l],_=0,E=n.length,y=E-1;_<E;y=_++)r=n[_],a=n[y],r.y>t.y!=a.y>t.y&&t.x<(a.x-r.x)*(t.y-r.y)/(a.y-r.y)+r.x&&(e=!e);return e||ue.prototype._containsPoint.call(this,t,!0)}});function ko(t,e){return new Oe(t,e)}var he=ae.extend({initialize:function(t,e){b(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=T(t)?t:t.features,n,r,a;if(e){for(n=0,r=e.length;n<r;n++)a=e[n],(a.geometries||a.geometry||a.features||a.coordinates)&&this.addData(a);return this}var l=this.options;if(l.filter&&!l.filter(t))return this;var _=di(t,l);return _?(_.feature=_i(t),_.defaultOptions=_.options,this.resetStyle(_),l.onEachFeature&&l.onEachFeature(t,_),this.addLayer(_)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=h({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function di(t,e){var n=t.type==="Feature"?t.geometry:t,r=n?n.coordinates:null,a=[],l=e&&e.pointToLayer,_=e&&e.coordsToLatLng||un,y,x,E,M;if(!r&&!n)return null;switch(n.type){case"Point":return y=_(r),hs(l,t,y,e);case"MultiPoint":for(E=0,M=r.length;E<M;E++)y=_(r[E]),a.push(hs(l,t,y,e));return new ae(a);case"LineString":case"MultiLineString":return x=fi(r,n.type==="LineString"?0:1,_),new ue(x,e);case"Polygon":case"MultiPolygon":return x=fi(r,n.type==="Polygon"?1:2,_),new Oe(x,e);case"GeometryCollection":for(E=0,M=n.geometries.length;E<M;E++){var j=di({geometry:n.geometries[E],type:"Feature",properties:t.properties},e);j&&a.push(j)}return new ae(a);case"FeatureCollection":for(E=0,M=n.features.length;E<M;E++){var nt=di(n.features[E],e);nt&&a.push(nt)}return new ae(a);default:throw new Error("Invalid GeoJSON object.")}}function hs(t,e,n,r){return t?t(e,n):new li(n,r&&r.markersInheritOptions&&r)}function un(t){return new z(t[1],t[0],t[2])}function fi(t,e,n){for(var r=[],a=0,l=t.length,_;a<l;a++)_=e?fi(t[a],e-1,n):(n||un)(t[a]),r.push(_);return r}function hn(t,e){return t=q(t),t.alt!==void 0?[w(t.lng,e),w(t.lat,e),w(t.alt,e)]:[w(t.lng,e),w(t.lat,e)]}function pi(t,e,n,r){for(var a=[],l=0,_=t.length;l<_;l++)a.push(e?pi(t[l],Kt(t[l])?0:e-1,n,r):hn(t[l],r));return!e&&n&&a.length>0&&a.push(a[0].slice()),a}function Re(t,e){return t.feature?h({},t.feature,{geometry:e}):_i(e)}function _i(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var ln={toGeoJSON:function(t){return Re(this,{type:"Point",coordinates:hn(this.getLatLng(),t)})}};li.include(ln),an.include(ln),ci.include(ln),ue.include({toGeoJSON:function(t){var e=!Kt(this._latlngs),n=pi(this._latlngs,e?1:0,!1,t);return Re(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),Oe.include({toGeoJSON:function(t){var e=!Kt(this._latlngs),n=e&&!Kt(this._latlngs[0]),r=pi(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),Re(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Ie.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Re(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var n=e==="GeometryCollection",r=[];return this.eachLayer(function(a){if(a.toGeoJSON){var l=a.toGeoJSON(t);if(n)r.push(l.geometry);else{var _=_i(l);_.type==="FeatureCollection"?r.push.apply(r,_.features):r.push(_)}}}),n?Re(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});function ls(t,e){return new he(t,e)}var Co=ls,mi=Xt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=dt(e),b(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(J(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){xt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Ae(this._image),this},bringToBack:function(){return this._map&&Me(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=dt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:ct("img");if(J(e,"leaflet-image-layer"),this._zoomAnimated&&J(e,"leaflet-zoom-animated"),this.options.className&&J(e,this.options.className),e.onselectstart=g,e.onmousemove=g,e.onload=f(this.fire,this,"load"),e.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ye(this._image,n,e)},_reset:function(){var t=this._image,e=new U(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();At(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){Gt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Eo=function(t,e,n){return new mi(t,e,n)},cs=mi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:ct("video");if(J(e,"leaflet-image-layer"),this._zoomAnimated&&J(e,"leaflet-zoom-animated"),this.options.className&&J(e,this.options.className),e.onselectstart=g,e.onmousemove=g,e.onloadeddata=f(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],a=0;a<n.length;a++)r.push(n[a].src);this._url=n.length>0?r:[e.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var l=0;l<this._url.length;l++){var _=ct("source");_.src=this._url[l],e.appendChild(_)}}});function bo(t,e,n){return new cs(t,e,n)}var ds=mi.extend({_initImage:function(){var t=this._image=this._url;J(t,"leaflet-image-layer"),this._zoomAnimated&&J(t,"leaflet-zoom-animated"),this.options.className&&J(t,this.options.className),t.onselectstart=g,t.onmousemove=g}});function So(t,e,n){return new ds(t,e,n)}var ne=Xt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof z||T(t))?(this._latlng=q(t),b(this,e)):(b(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Gt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Gt(this._container,1),this.bringToFront(),this.options.interactive&&(J(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Gt(this._container,0),this._removeTimeout=setTimeout(f(xt,void 0,this._container),200)):xt(this._container),this.options.interactive&&(Tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=q(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ae(this._container),this},bringToBack:function(){return this._map&&Me(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof ae){e=null;var n=this._source._layers;for(var r in n)if(n[r]._map){e=n[r];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=A(this.options.offset),n=this._getAnchor();this._zoomAnimated?At(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=a+"px"}},_getAnchor:function(){return[0,0]}});ut.include({_initOverlay:function(t,e,n,r){var a=e;return a instanceof t||(a=new t(r).setContent(e)),n&&a.setLatLng(n),a}}),Xt.include({_initOverlay:function(t,e,n,r){var a=n;return a instanceof t?(b(a,r),a._source=this):(a=e&&!r?e:new t(r,this),a.setContent(n)),a}});var gi=ne.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,ne.prototype.openOn.call(this,t)},onAdd:function(t){ne.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof _e||this._source.on("preclick",xe))},onRemove:function(t){ne.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof _e||this._source.off("preclick",xe))},getEvents:function(){var t=ne.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=ct("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ct("div",t+"-content-wrapper",e);if(this._contentNode=ct("div",t+"-content",n),Ke(e),Qi(this._contentNode),$(e,"contextmenu",xe),this._tipContainer=ct("div",t+"-tip-container",e),this._tip=ct("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=ct("a",t+"-close-button",e);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',$(r,"click",function(a){Ot(a),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,a=this.options.maxHeight,l="leaflet-popup-scrolled";a&&r>a?(e.height=a+"px",J(t,l)):Tt(t,l),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();At(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Ue(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,a=new P(this._containerLeft,-n-this._containerBottom);a._add(we(this._container));var l=t.layerPointToContainerPoint(a),_=A(this.options.autoPanPadding),y=A(this.options.autoPanPaddingTopLeft||_),x=A(this.options.autoPanPaddingBottomRight||_),E=t.getSize(),M=0,j=0;l.x+r+x.x>E.x&&(M=l.x+r-E.x+x.x),l.x-M-y.x<0&&(M=l.x-y.x),l.y+n+x.y>E.y&&(j=l.y+n-E.y+x.y),l.y-j-y.y<0&&(j=l.y-y.y),(M||j)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([M,j]))}},_getAnchor:function(){return A(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Lo=function(t,e){return new gi(t,e)};ut.mergeOptions({closePopupOnClick:!0}),ut.include({openPopup:function(t,e,n){return this._initOverlay(gi,t,e,n).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Xt.include({bindPopup:function(t,e){return this._popup=this._initOverlay(gi,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof ae||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){ke(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof _e)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var vi=ne.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){ne.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){ne.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=ne.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ct("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,r=this._map,a=this._container,l=r.latLngToContainerPoint(r.getCenter()),_=r.layerPointToContainerPoint(t),y=this.options.direction,x=a.offsetWidth,E=a.offsetHeight,M=A(this.options.offset),j=this._getAnchor();y==="top"?(e=x/2,n=E):y==="bottom"?(e=x/2,n=0):y==="center"?(e=x/2,n=E/2):y==="right"?(e=0,n=E/2):y==="left"?(e=x,n=E/2):_.x<l.x?(y="right",e=0,n=E/2):(y="left",e=x+(M.x+j.x)*2,n=E/2),t=t.subtract(A(e,n,!0)).add(M).add(j),Tt(a,"leaflet-tooltip-right"),Tt(a,"leaflet-tooltip-left"),Tt(a,"leaflet-tooltip-top"),Tt(a,"leaflet-tooltip-bottom"),J(a,"leaflet-tooltip-"+y),At(a,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Gt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return A(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),To=function(t,e){return new vi(t,e)};ut.include({openTooltip:function(t,e,n){return this._initOverlay(vi,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Xt.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(vi,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof ae||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&($(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),$(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,n,r;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),r=this._map.containerPointToLayerPoint(n),e=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(e)}});var fs=Be.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(si(e),e.appendChild(n.html)):e.innerHTML=n.html!==!1?n.html:"",n.bgPos){var r=A(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Po(t){return new fs(t)}Be.Default=$e;var Xe=Xt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:V.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){b(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),xt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ae(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Me(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof P?t:new P(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,n=-t(-1/0,1/0),r=0,a=e.length,l;r<a;r++)l=e[r].style.zIndex,e[r]!==this._container&&l&&(n=t(n,+l));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!V.ielt9){Gt(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var a=this._tiles[r];if(!(!a.current||!a.loaded)){var l=Math.min(1,(t-a.loaded)/200);Gt(a.el,l),l<1?e=!0:(a.active?n=!0:this._onOpaqueTile(a),a.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(mt(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(xt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],a=this._map;return r||(r=this._levels[t]={},r.el=ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=a.project(a.unproject(a.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,a.getCenter(),a.getZoom()),g(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)xt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var a=Math.floor(t/2),l=Math.floor(e/2),_=n-1,y=new P(+a,+l);y.z=+_;var x=this._tileCoordsToKey(y),E=this._tiles[x];return E&&E.active?(E.retain=!0,!0):(E&&E.loaded&&(E.retain=!0),_>r?this._retainParent(a,l,_,r):!1)},_retainChildren:function(t,e,n,r){for(var a=2*t;a<2*t+2;a++)for(var l=2*e;l<2*e+2;l++){var _=new P(a,l);_.z=n+1;var y=this._tileCoordsToKey(_),x=this._tiles[y];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);n+1<r&&this._retainChildren(a,l,n+1,r)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var a=Math.round(e);this.options.maxZoom!==void 0&&a>this.options.maxZoom||this.options.minZoom!==void 0&&a<this.options.minZoom?a=void 0:a=this._clampZoom(a);var l=this.options.updateWhenZooming&&a!==this._tileZoom;(!r||l)&&(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),a!==void 0&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),a=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();V.any3d?ye(t.el,a,r):At(t.el,a)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,a=this._map.getPixelWorldBounds(this._tileZoom);a&&(this._globalTileRange=this._pxBoundsToTileRange(a)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),a=e.project(t,this._tileZoom).floor(),l=e.getSize().divideBy(r*2);return new U(a.subtract(l),a.add(l))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var r=this._getTiledPixelBounds(t),a=this._pxBoundsToTileRange(r),l=a.getCenter(),_=[],y=this.options.keepBuffer,x=new U(a.getBottomLeft().subtract([y,-y]),a.getTopRight().add([y,-y]));if(!(isFinite(a.min.x)&&isFinite(a.min.y)&&isFinite(a.max.x)&&isFinite(a.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var E in this._tiles){var M=this._tiles[E].coords;(M.z!==this._tileZoom||!x.contains(new P(M.x,M.y)))&&(this._tiles[E].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(t,n);return}for(var j=a.min.y;j<=a.max.y;j++)for(var nt=a.min.x;nt<=a.max.x;nt++){var Nt=new P(nt,j);if(Nt.z=this._tileZoom,!!this._isValidTile(Nt)){var Bt=this._tiles[this._tileCoordsToKey(Nt)];Bt?Bt.current=!0:_.push(Nt)}}if(_.sort(function(Vt,De){return Vt.distanceTo(l)-De.distanceTo(l)}),_.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var qt=document.createDocumentFragment();for(nt=0;nt<_.length;nt++)this._addTile(_[nt],qt);this._level.el.appendChild(qt)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return dt(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),a=r.add(n),l=e.unproject(r,t.z),_=e.unproject(a,t.z);return[l,_]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new _t(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new P(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(xt(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){J(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=g,t.onmousemove=g,V.ielt9&&this.options.opacity<1&&Gt(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),a=this.createTile(this._wrapCoords(t),f(this._tileReady,this,t));this._initTile(a),this.createTile.length<2&&X(f(this._tileReady,this,t,null,a)),At(a,n),this._tiles[r]={el:a,coords:t,current:!0},e.appendChild(a),this.fire("tileloadstart",{tile:a,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);n=this._tiles[r],n&&(n.loaded=+new Date,this._map._fadeAnimated?(Gt(n.el,0),mt(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(J(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),V.ielt9||!this._map._fadeAnimated?X(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new P(this._wrapX?m(t.x,this._wrapX):t.x,this._wrapY?m(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new U(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Ao(t){return new Xe(t)}var Fe=Xe.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=b(this,e),e.detectRetina&&V.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return $(n,"load",f(this._tileOnLoad,this,e,n)),$(n,"error",f(this._tileOnError,this,e,n)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:V.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return G(this._url,h(e,this.options))},_tileOnLoad:function(t,e){V.ielt9?setTimeout(f(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,r=this.options.zoomOffset;return n&&(t=e-t),t+r},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=g,e.onerror=g,!e.complete)){e.src=at;var n=this._tiles[t].coords;xt(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",at),Xe.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(!(!this._map||n&&n.getAttribute("src")===at))return Xe.prototype._tileReady.call(this,t,e,n)}});function ps(t,e){return new Fe(t,e)}var _s=Fe.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=h({},this.defaultWmsParams);for(var r in e)r in this.options||(n[r]=e[r]);e=b(this,e);var a=e.detectRetina&&V.retina?2:1,l=this.getTileSize();n.width=l.x*a,n.height=l.y*a,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Fe.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=Q(n.project(e[0]),n.project(e[1])),a=r.min,l=r.max,_=(this._wmsVersion>=1.3&&this._crs===as?[a.y,a.x,l.y,l.x]:[a.x,a.y,l.x,l.y]).join(","),y=Fe.prototype.getTileUrl.call(this,t);return y+S(this.wmsParams,y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+_},setParams:function(t,e){return h(this.wmsParams,t),e||this.redraw(),this}});function Mo(t,e){return new _s(t,e)}Fe.WMS=_s,ps.wms=Mo;var le=Xt.extend({options:{padding:.1},initialize:function(t){b(this,t),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),J(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,e),l=r.multiplyBy(-n).add(a).subtract(this._map._getNewPixelOrigin(t,e));V.any3d?ye(this._container,l,n):At(this._container,l)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new U(n,n.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ms=le.extend({options:{tolerance:0},getEvents:function(){var t=le.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){le.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");$(t,"mousemove",this._onMouseMove,this),$(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),$(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){mt(this._redrawRequest),delete this._ctx,xt(this._container),gt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){le.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=V.retina?2:1;At(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",V.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){le.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[d(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[d(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),n=[],r,a;for(a=0;a<e.length;a++){if(r=Number(e[a]),isNaN(r))return;n.push(r)}t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||X(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new U,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,a,l,_=t._parts,y=_.length,x=this._ctx;if(y){for(x.beginPath(),n=0;n<y;n++){for(r=0,a=_[n].length;r<a;r++)l=_[n][r],x[r?"lineTo":"moveTo"](l.x,l.y);e&&x.closePath()}this._fillStroke(x,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),a=(Math.max(Math.round(t._radiusY),1)||r)/r;a!==1&&(n.save(),n.scale(1,a)),n.beginPath(),n.arc(e.x,e.y/a,r,0,Math.PI*2,!1),a!==1&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&n.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),n,r,a=this._drawFirst;a;a=a.next)n=a.layer,n.options.interactive&&n._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(n))&&(r=n);this._fireEvent(r?[r]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(Tt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,r,a=this._drawFirst;a;a=a.next)n=a.layer,n.options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(J(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;if(n)n.prev=r;else return;r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;if(r)r.next=n;else return;n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function gs(t){return V.canvas?new ms(t):null}var Qe=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Io={_initContainer:function(){this._container=ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(le.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Qe("shape");J(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Qe("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;xt(e),t.removeInteractiveTarget(e),delete this._layers[d(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,a=t._container;a.stroked=!!r.stroke,a.filled=!!r.fill,r.stroke?(e||(e=t._stroke=Qe("stroke")),a.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=T(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(a.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=Qe("fill")),a.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(a.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Ae(t._container)},_bringToBack:function(t){Me(t._container)}},yi=V.vml?Qe:zt,Je=le.extend({_initContainer:function(){this._container=yi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=yi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){xt(this._container),gt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){le.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),At(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=yi("path");t.options.className&&J(e,t.options.className),t.options.interactive&&J(e,"leaflet-interactive"),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){xt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[d(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Te(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r=Math.max(Math.round(t._radiusY),1)||n,a="a"+n+","+r+" 0 1,0 ",l=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+a+n*2+",0 "+a+-n*2+",0 ";this._setPath(t,l)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Ae(t._path)},_bringToBack:function(t){Me(t._path)}});V.vml&&Je.include(Io);function vs(t){return V.svg||V.vml?new Je(t):null}ut.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&gs(t)||vs(t)}});var ys=Oe.extend({initialize:function(t,e){Oe.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=dt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Bo(t,e){return new ys(t,e)}Je.create=yi,Je.pointsToPath=Te,he.geometryToLayer=di,he.coordsToLatLng=un,he.coordsToLatLngs=fi,he.latLngToCoords=hn,he.latLngsToCoords=pi,he.getFeature=Re,he.asFeature=_i,ut.mergeOptions({boxZoom:!0});var ws=ie.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){$(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){gt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){xt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),We(),Wi(),this._startPoint=this._map.mouseEventToContainerPoint(t),$(document,{contextmenu:ke,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ct("div","leaflet-zoom-box",this._container),J(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new U(this._point,this._startPoint),n=e.getSize();At(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(xt(this._box),Tt(this._container,"leaflet-crosshair")),je(),ji(),gt(document,{contextmenu:ke,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var e=new _t(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ut.addInitHook("addHandler","boxZoom",ws),ut.mergeOptions({doubleClickZoom:!0});var xs=ie.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,a=t.originalEvent.shiftKey?n-r:n+r;e.options.doubleClickZoom==="center"?e.setZoom(a):e.setZoomAround(t.containerPoint,a)}});ut.addInitHook("addHandler","doubleClickZoom",xs),ut.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ks=ie.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new pe(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}J(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Tt(this._map._container,"leaflet-grab"),Tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=dt(this._map.options.maxBounds);this._offsetLimit=Q(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,a=(r-e+n)%t+e-n,l=(r+e+n)%t-e-n,_=Math.abs(a+n)<Math.abs(l+n)?a:l;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=_},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var a=this._lastPos.subtract(this._positions[0]),l=(this._lastTime-this._times[0])/1e3,_=n.easeLinearity,y=a.multiplyBy(_/l),x=y.distanceTo([0,0]),E=Math.min(n.inertiaMaxSpeed,x),M=y.multiplyBy(E/x),j=E/(n.inertiaDeceleration*_),nt=M.multiplyBy(-j/2).round();!nt.x&&!nt.y?e.fire("moveend"):(nt=e._limitOffset(nt,e.options.maxBounds),X(function(){e.panBy(nt,{duration:j,easeLinearity:_,noMoveStart:!0,animate:!0})}))}}});ut.addInitHook("addHandler","dragging",ks),ut.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Cs=ie.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),$(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),gt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},n=this.keyCodes,r,a;for(r=0,a=n.left.length;r<a;r++)e[n.left[r]]=[-1*t,0];for(r=0,a=n.right.length;r<a;r++)e[n.right[r]]=[t,0];for(r=0,a=n.down.length;r<a;r++)e[n.down[r]]=[0,t];for(r=0,a=n.up.length;r<a;r++)e[n.up[r]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},n=this.keyCodes,r,a;for(r=0,a=n.zoomIn.length;r<a;r++)e[n.zoomIn[r]]=t;for(r=0,a=n.zoomOut.length;r<a;r++)e[n.zoomOut[r]]=-t},_addHooks:function(){$(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){gt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,n=this._map,r;if(e in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(r=this._panKeys[e],t.shiftKey&&(r=A(r).multiplyBy(3)),n.options.maxBounds&&(r=n._limitOffset(A(r),n.options.maxBounds)),n.options.worldCopyJump){var a=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(r)));n.panTo(a)}else n.panBy(r)}else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;ke(t)}}});ut.addInitHook("addHandler","keyboard",Cs),ut.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Es=ie.extend({addHooks:function(){$(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){gt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=qn(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),r),ke(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(this._map.options.wheelPxPerZoomLevel*4),a=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,l=n?Math.ceil(a/n)*n:a,_=t._limitZoom(e+(this._delta>0?l:-l))-e;this._delta=0,this._startTime=null,_&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+_):t.setZoomAround(this._lastMousePos,e+_))}});ut.addInitHook("addHandler","scrollWheelZoom",Es);var Oo=600;ut.mergeOptions({tapHold:V.touchNative&&V.safari&&V.mobile,tapTolerance:15});var bs=ie.extend({addHooks:function(){$(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){gt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new P(e.clientX,e.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&($(document,"touchend",Ot),$(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),Oo),$(document,"touchend touchcancel contextmenu",this._cancel,this),$(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){gt(document,"touchend",Ot),gt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),gt(document,"touchend touchcancel contextmenu",this._cancel,this),gt(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new P(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});ut.addInitHook("addHandler","tapHold",bs),ut.mergeOptions({touchZoom:V.touch,bounceAtZoomLimits:!0});var Ss=ie.extend({addHooks:function(){J(this._map._container,"leaflet-touch-zoom"),$(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Tt(this._map._container,"leaflet-touch-zoom"),gt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),$(document,"touchmove",this._onTouchMove,this),$(document,"touchend touchcancel",this._onTouchEnd,this),Ot(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),a=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(a,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&a<1||this._zoom>e.getMaxZoom()&&a>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,a===1)return}else{var l=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(a===1&&l.x===0&&l.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(l),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),mt(this._animRequest);var _=f(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=X(_,this,!0),Ot(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,mt(this._animRequest),gt(document,"touchmove",this._onTouchMove,this),gt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ut.addInitHook("addHandler","touchZoom",Ss),ut.BoxZoom=ws,ut.DoubleClickZoom=xs,ut.Drag=ks,ut.Keyboard=Cs,ut.ScrollWheelZoom=Es,ut.TapHold=bs,ut.TouchZoom=Ss,s.Bounds=U,s.Browser=V,s.CRS=Rt,s.Canvas=ms,s.Circle=an,s.CircleMarker=ci,s.Class=rt,s.Control=$t,s.DivIcon=fs,s.DivOverlay=ne,s.DomEvent=Xr,s.DomUtil=Yr,s.Draggable=pe,s.Evented=N,s.FeatureGroup=ae,s.GeoJSON=he,s.GridLayer=Xe,s.Handler=ie,s.Icon=Be,s.ImageOverlay=mi,s.LatLng=z,s.LatLngBounds=_t,s.Layer=Xt,s.LayerGroup=Ie,s.LineUtil=lo,s.Map=ut,s.Marker=li,s.Mixin=so,s.Path=_e,s.Point=P,s.PolyUtil=ro,s.Polygon=Oe,s.Polyline=ue,s.Popup=gi,s.PosAnimation=Yn,s.Projection=co,s.Rectangle=ys,s.Renderer=le,s.SVG=Je,s.SVGOverlay=ds,s.TileLayer=Fe,s.Tooltip=vi,s.Transformation=ve,s.Util=It,s.VideoOverlay=cs,s.bind=f,s.bounds=Q,s.canvas=gs,s.circle=wo,s.circleMarker=yo,s.control=qe,s.divIcon=Po,s.extend=h,s.featureGroup=mo,s.geoJSON=ls,s.geoJson=Co,s.gridLayer=Ao,s.icon=go,s.imageOverlay=Eo,s.latLng=q,s.latLngBounds=dt,s.layerGroup=_o,s.map=Qr,s.marker=vo,s.point=A,s.polygon=ko,s.polyline=xo,s.popup=Lo,s.rectangle=Bo,s.setOptions=b,s.stamp=d,s.svg=vs,s.svgOverlay=So,s.tileLayer=ps,s.tooltip=To,s.transformation=Zt,s.version=o,s.videoOverlay=bo;var Ro=window.L;s.noConflict=function(){return window.L=Ro,this},window.L=s})})(gn,gn.exports);var Ai=gn.exports;const Fu=Jo(Ai);function tr(u,i){const s=H.useRef(i);H.useEffect(function(){i!==s.current&&u.attributionControl!=null&&(s.current!=null&&u.attributionControl.removeAttribution(s.current),i!=null&&u.attributionControl.addAttribution(i)),s.current=i},[u,i])}const ja=1;function Ga(u){return Object.freeze({__version:ja,map:u})}function Ka(u,i){return Object.freeze({...u,...i})}const Sn=H.createContext(null);function Ln(){const u=H.use(Sn);if(u==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return u}function er(u){function i(s,o){const{instance:h,context:c}=u(s).current;H.useImperativeHandle(o,()=>h);const{children:f}=s;return f==null?null:ot.createElement(Sn,{value:c},f)}return H.forwardRef(i)}function qa(u){function i(s,o){const[h,c]=H.useState(!1),{instance:f}=u(s,c).current;H.useImperativeHandle(o,()=>f),H.useEffect(function(){h&&f.update()},[f,h,s.children]);const v=f._contentNode;return v?ta.createPortal(s.children,v):null}return H.forwardRef(i)}function Ya(u){function i(s,o){const{instance:h}=u(s).current;return H.useImperativeHandle(o,()=>h),null}return H.forwardRef(i)}function Tn(u,i){const s=H.useRef(void 0);H.useEffect(function(){return i!=null&&u.instance.on(i),s.current=i,function(){s.current!=null&&u.instance.off(s.current),s.current=null}},[u,i])}function Mi(u,i){const s=u.pane??i.pane;return s?{...u,pane:s}:u}function $a(u,i){return function(o,h){const c=Ln(),f=u(Mi(o,c),c);return tr(c.map,o.attribution),Tn(f.current,o.eventHandlers),i(f.current,c,o,h),f}}function ir(u,i,s){return Object.freeze({instance:u,context:i,container:s})}function Ii(u,i){return i==null?function(o,h){const c=H.useRef(void 0);return c.current||(c.current=u(o,h)),c}:function(o,h){const c=H.useRef(void 0);c.current||(c.current=u(o,h));const f=H.useRef(o),{instance:v}=c.current;return H.useEffect(function(){f.current!==o&&(i(v,o,f.current),f.current=o)},[v,o,i]),c}}function nr(u,i){H.useEffect(function(){return(i.layerContainer??i.map).addLayer(u.instance),function(){var c;(c=i.layerContainer)==null||c.removeLayer(u.instance),i.map.removeLayer(u.instance)}},[i,u])}function sr(u){return function(s){const o=Ln(),h=u(Mi(s,o),o);return tr(o.map,s.attribution),Tn(h.current,s.eventHandlers),nr(h.current,o),h}}function Xa(u,i){const s=H.useRef(void 0);H.useEffect(function(){if(i.pathOptions!==s.current){const h=i.pathOptions??{};u.instance.setStyle(h),s.current=h}},[u,i])}function Qa(u){return function(s){const o=Ln(),h=u(Mi(s,o),o);return Tn(h.current,s.eventHandlers),nr(h.current,o),Xa(h.current,s),h}}function Ja(u,i){const s=Ii(u,i),o=sr(s);return er(o)}function Du(u,i){const s=Ii(u),o=$a(s,i);return qa(o)}function Nu(u,i){const s=Ii(u,i),o=Qa(s);return er(o)}function tu(u,i){const s=Ii(u,i),o=sr(s);return Ya(o)}function eu(u,i,s){const{opacity:o,zIndex:h}=i;o!=null&&o!==s.opacity&&u.setOpacity(o),h!=null&&h!==s.zIndex&&u.setZIndex(h)}function iu({bounds:u,boundsOptions:i,center:s,children:o,className:h,id:c,placeholder:f,style:v,whenReady:d,zoom:p,...m},g){const[w]=H.useState({className:h,id:c,style:v}),[C,k]=H.useState(null),b=H.useRef(void 0);H.useImperativeHandle(g,()=>(C==null?void 0:C.map)??null,[C]);const S=H.useCallback(G=>{if(G!==null&&!b.current){const T=new Ai.Map(G,m);b.current=T,s!=null&&p!=null?T.setView(s,p):u!=null&&T.fitBounds(u,i),d!=null&&T.whenReady(d),k(Ga(T))}},[]);H.useEffect(()=>()=>{C==null||C.map.remove()},[C]);const F=C?ot.createElement(Sn,{value:C},o):f??null;return ot.createElement("div",{...w,ref:S},F)}const zu=H.forwardRef(iu),Vu=Ja(function({position:i,...s},o){const h=new Ai.Marker(i,s);return ir(h,Ka(o,{overlayContainer:h}))},function(i,s,o){s.position!==o.position&&i.setLatLng(s.position),s.icon!=null&&s.icon!==o.icon&&i.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==o.zIndexOffset&&i.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==o.opacity&&i.setOpacity(s.opacity),i.dragging!=null&&s.draggable!==o.draggable&&(s.draggable===!0?i.dragging.enable():i.dragging.disable())}),Zu=tu(function({url:i,...s},o){const h=new Ai.TileLayer(i,Mi(s,o));return ir(h,o)},function(i,s,o){eu(i,s,o);const{url:h}=s;h!=null&&h!==o.url&&i.setUrl(h)});var nu=Object.defineProperty,Ei=Object.getOwnPropertySymbols,rr=Object.prototype.hasOwnProperty,or=Object.prototype.propertyIsEnumerable,zs=(u,i,s)=>i in u?nu(u,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):u[i]=s,vn=(u,i)=>{for(var s in i||(i={}))rr.call(i,s)&&zs(u,s,i[s]);if(Ei)for(var s of Ei(i))or.call(i,s)&&zs(u,s,i[s]);return u},yn=(u,i)=>{var s={};for(var o in u)rr.call(u,o)&&i.indexOf(o)<0&&(s[o]=u[o]);if(u!=null&&Ei)for(var o of Ei(u))i.indexOf(o)<0&&or.call(u,o)&&(s[o]=u[o]);return s};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Se;(u=>{const i=class st{constructor(d,p,m,g){if(this.version=d,this.errorCorrectionLevel=p,this.modules=[],this.isFunction=[],d<st.MIN_VERSION||d>st.MAX_VERSION)throw new RangeError("Version value out of range");if(g<-1||g>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let w=[];for(let k=0;k<this.size;k++)w.push(!1);for(let k=0;k<this.size;k++)this.modules.push(w.slice()),this.isFunction.push(w.slice());this.drawFunctionPatterns();const C=this.addEccAndInterleave(m);if(this.drawCodewords(C),g==-1){let k=1e9;for(let b=0;b<8;b++){this.applyMask(b),this.drawFormatBits(b);const S=this.getPenaltyScore();S<k&&(g=b,k=S),this.applyMask(b)}}h(0<=g&&g<=7),this.mask=g,this.applyMask(g),this.drawFormatBits(g),this.isFunction=[]}static encodeText(d,p){const m=u.QrSegment.makeSegments(d);return st.encodeSegments(m,p)}static encodeBinary(d,p){const m=u.QrSegment.makeBytes(d);return st.encodeSegments([m],p)}static encodeSegments(d,p,m=1,g=40,w=-1,C=!0){if(!(st.MIN_VERSION<=m&&m<=g&&g<=st.MAX_VERSION)||w<-1||w>7)throw new RangeError("Invalid value");let k,b;for(k=m;;k++){const T=st.getNumDataCodewords(k,p)*8,et=f.getTotalBits(d,k);if(et<=T){b=et;break}if(k>=g)throw new RangeError("Data too long")}for(const T of[st.Ecc.MEDIUM,st.Ecc.QUARTILE,st.Ecc.HIGH])C&&b<=st.getNumDataCodewords(k,T)*8&&(p=T);let S=[];for(const T of d){s(T.mode.modeBits,4,S),s(T.numChars,T.mode.numCharCountBits(k),S);for(const et of T.getData())S.push(et)}h(S.length==b);const F=st.getNumDataCodewords(k,p)*8;h(S.length<=F),s(0,Math.min(4,F-S.length),S),s(0,(8-S.length%8)%8,S),h(S.length%8==0);for(let T=236;S.length<F;T^=253)s(T,8,S);let G=[];for(;G.length*8<S.length;)G.push(0);return S.forEach((T,et)=>G[et>>>3]|=T<<7-(et&7)),new st(k,p,G,w)}getModule(d,p){return 0<=d&&d<this.size&&0<=p&&p<this.size&&this.modules[p][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let m=0;m<this.size;m++)this.setFunctionModule(6,m,m%2==0),this.setFunctionModule(m,6,m%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),p=d.length;for(let m=0;m<p;m++)for(let g=0;g<p;g++)m==0&&g==0||m==0&&g==p-1||m==p-1&&g==0||this.drawAlignmentPattern(d[m],d[g]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const p=this.errorCorrectionLevel.formatBits<<3|d;let m=p;for(let w=0;w<10;w++)m=m<<1^(m>>>9)*1335;const g=(p<<10|m)^21522;h(g>>>15==0);for(let w=0;w<=5;w++)this.setFunctionModule(8,w,o(g,w));this.setFunctionModule(8,7,o(g,6)),this.setFunctionModule(8,8,o(g,7)),this.setFunctionModule(7,8,o(g,8));for(let w=9;w<15;w++)this.setFunctionModule(14-w,8,o(g,w));for(let w=0;w<8;w++)this.setFunctionModule(this.size-1-w,8,o(g,w));for(let w=8;w<15;w++)this.setFunctionModule(8,this.size-15+w,o(g,w));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let m=0;m<12;m++)d=d<<1^(d>>>11)*7973;const p=this.version<<12|d;h(p>>>18==0);for(let m=0;m<18;m++){const g=o(p,m),w=this.size-11+m%3,C=Math.floor(m/3);this.setFunctionModule(w,C,g),this.setFunctionModule(C,w,g)}}drawFinderPattern(d,p){for(let m=-4;m<=4;m++)for(let g=-4;g<=4;g++){const w=Math.max(Math.abs(g),Math.abs(m)),C=d+g,k=p+m;0<=C&&C<this.size&&0<=k&&k<this.size&&this.setFunctionModule(C,k,w!=2&&w!=4)}}drawAlignmentPattern(d,p){for(let m=-2;m<=2;m++)for(let g=-2;g<=2;g++)this.setFunctionModule(d+g,p+m,Math.max(Math.abs(g),Math.abs(m))!=1)}setFunctionModule(d,p,m){this.modules[p][d]=m,this.isFunction[p][d]=!0}addEccAndInterleave(d){const p=this.version,m=this.errorCorrectionLevel;if(d.length!=st.getNumDataCodewords(p,m))throw new RangeError("Invalid argument");const g=st.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][p],w=st.ECC_CODEWORDS_PER_BLOCK[m.ordinal][p],C=Math.floor(st.getNumRawDataModules(p)/8),k=g-C%g,b=Math.floor(C/g);let S=[];const F=st.reedSolomonComputeDivisor(w);for(let T=0,et=0;T<g;T++){let at=d.slice(et,et+b-w+(T<k?0:1));et+=at.length;const kt=st.reedSolomonComputeRemainder(at,F);T<k&&at.push(0),S.push(at.concat(kt))}let G=[];for(let T=0;T<S[0].length;T++)S.forEach((et,at)=>{(T!=b-w||at>=k)&&G.push(et[T])});return h(G.length==C),G}drawCodewords(d){if(d.length!=Math.floor(st.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let p=0;for(let m=this.size-1;m>=1;m-=2){m==6&&(m=5);for(let g=0;g<this.size;g++)for(let w=0;w<2;w++){const C=m-w,b=(m+1&2)==0?this.size-1-g:g;!this.isFunction[b][C]&&p<d.length*8&&(this.modules[b][C]=o(d[p>>>3],7-(p&7)),p++)}}h(p==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let p=0;p<this.size;p++)for(let m=0;m<this.size;m++){let g;switch(d){case 0:g=(m+p)%2==0;break;case 1:g=p%2==0;break;case 2:g=m%3==0;break;case 3:g=(m+p)%3==0;break;case 4:g=(Math.floor(m/3)+Math.floor(p/2))%2==0;break;case 5:g=m*p%2+m*p%3==0;break;case 6:g=(m*p%2+m*p%3)%2==0;break;case 7:g=((m+p)%2+m*p%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[p][m]&&g&&(this.modules[p][m]=!this.modules[p][m])}}getPenaltyScore(){let d=0;for(let w=0;w<this.size;w++){let C=!1,k=0,b=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[w][S]==C?(k++,k==5?d+=st.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,b),C||(d+=this.finderPenaltyCountPatterns(b)*st.PENALTY_N3),C=this.modules[w][S],k=1);d+=this.finderPenaltyTerminateAndCount(C,k,b)*st.PENALTY_N3}for(let w=0;w<this.size;w++){let C=!1,k=0,b=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[S][w]==C?(k++,k==5?d+=st.PENALTY_N1:k>5&&d++):(this.finderPenaltyAddHistory(k,b),C||(d+=this.finderPenaltyCountPatterns(b)*st.PENALTY_N3),C=this.modules[S][w],k=1);d+=this.finderPenaltyTerminateAndCount(C,k,b)*st.PENALTY_N3}for(let w=0;w<this.size-1;w++)for(let C=0;C<this.size-1;C++){const k=this.modules[w][C];k==this.modules[w][C+1]&&k==this.modules[w+1][C]&&k==this.modules[w+1][C+1]&&(d+=st.PENALTY_N2)}let p=0;for(const w of this.modules)p=w.reduce((C,k)=>C+(k?1:0),p);const m=this.size*this.size,g=Math.ceil(Math.abs(p*20-m*10)/m)-1;return h(0<=g&&g<=9),d+=g*st.PENALTY_N4,h(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,p=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let m=[6];for(let g=this.size-7;m.length<d;g-=p)m.splice(1,0,g);return m}}static getNumRawDataModules(d){if(d<st.MIN_VERSION||d>st.MAX_VERSION)throw new RangeError("Version number out of range");let p=(16*d+128)*d+64;if(d>=2){const m=Math.floor(d/7)+2;p-=(25*m-10)*m-55,d>=7&&(p-=36)}return h(208<=p&&p<=29648),p}static getNumDataCodewords(d,p){return Math.floor(st.getNumRawDataModules(d)/8)-st.ECC_CODEWORDS_PER_BLOCK[p.ordinal][d]*st.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let p=[];for(let g=0;g<d-1;g++)p.push(0);p.push(1);let m=1;for(let g=0;g<d;g++){for(let w=0;w<p.length;w++)p[w]=st.reedSolomonMultiply(p[w],m),w+1<p.length&&(p[w]^=p[w+1]);m=st.reedSolomonMultiply(m,2)}return p}static reedSolomonComputeRemainder(d,p){let m=p.map(g=>0);for(const g of d){const w=g^m.shift();m.push(0),p.forEach((C,k)=>m[k]^=st.reedSolomonMultiply(C,w))}return m}static reedSolomonMultiply(d,p){if(d>>>8||p>>>8)throw new RangeError("Byte out of range");let m=0;for(let g=7;g>=0;g--)m=m<<1^(m>>>7)*285,m^=(p>>>g&1)*d;return h(m>>>8==0),m}finderPenaltyCountPatterns(d){const p=d[1];h(p<=this.size*3);const m=p>0&&d[2]==p&&d[3]==p*3&&d[4]==p&&d[5]==p;return(m&&d[0]>=p*4&&d[6]>=p?1:0)+(m&&d[6]>=p*4&&d[0]>=p?1:0)}finderPenaltyTerminateAndCount(d,p,m){return d&&(this.finderPenaltyAddHistory(p,m),p=0),p+=this.size,this.finderPenaltyAddHistory(p,m),this.finderPenaltyCountPatterns(m)}finderPenaltyAddHistory(d,p){p[0]==0&&(d+=this.size),p.pop(),p.unshift(d)}};i.MIN_VERSION=1,i.MAX_VERSION=40,i.PENALTY_N1=3,i.PENALTY_N2=3,i.PENALTY_N3=40,i.PENALTY_N4=10,i.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],i.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],u.QrCode=i;function s(v,d,p){if(d<0||d>31||v>>>d)throw new RangeError("Value out of range");for(let m=d-1;m>=0;m--)p.push(v>>>m&1)}function o(v,d){return(v>>>d&1)!=0}function h(v){if(!v)throw new Error("Assertion error")}const c=class bt{constructor(d,p,m){if(this.mode=d,this.numChars=p,this.bitData=m,p<0)throw new RangeError("Invalid argument");this.bitData=m.slice()}static makeBytes(d){let p=[];for(const m of d)s(m,8,p);return new bt(bt.Mode.BYTE,d.length,p)}static makeNumeric(d){if(!bt.isNumeric(d))throw new RangeError("String contains non-numeric characters");let p=[];for(let m=0;m<d.length;){const g=Math.min(d.length-m,3);s(parseInt(d.substring(m,m+g),10),g*3+1,p),m+=g}return new bt(bt.Mode.NUMERIC,d.length,p)}static makeAlphanumeric(d){if(!bt.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let p=[],m;for(m=0;m+2<=d.length;m+=2){let g=bt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(m))*45;g+=bt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(m+1)),s(g,11,p)}return m<d.length&&s(bt.ALPHANUMERIC_CHARSET.indexOf(d.charAt(m)),6,p),new bt(bt.Mode.ALPHANUMERIC,d.length,p)}static makeSegments(d){return d==""?[]:bt.isNumeric(d)?[bt.makeNumeric(d)]:bt.isAlphanumeric(d)?[bt.makeAlphanumeric(d)]:[bt.makeBytes(bt.toUtf8ByteArray(d))]}static makeEci(d){let p=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)s(d,8,p);else if(d<16384)s(2,2,p),s(d,14,p);else if(d<1e6)s(6,3,p),s(d,21,p);else throw new RangeError("ECI assignment value out of range");return new bt(bt.Mode.ECI,0,p)}static isNumeric(d){return bt.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return bt.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,p){let m=0;for(const g of d){const w=g.mode.numCharCountBits(p);if(g.numChars>=1<<w)return 1/0;m+=4+w+g.bitData.length}return m}static toUtf8ByteArray(d){d=encodeURI(d);let p=[];for(let m=0;m<d.length;m++)d.charAt(m)!="%"?p.push(d.charCodeAt(m)):(p.push(parseInt(d.substring(m+1,m+3),16)),m+=2);return p}};c.NUMERIC_REGEX=/^[0-9]*$/,c.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,c.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let f=c;u.QrSegment=c})(Se||(Se={}));(u=>{(i=>{const s=class{constructor(h,c){this.ordinal=h,this.formatBits=c}};s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2),i.Ecc=s})(u.QrCode||(u.QrCode={}))})(Se||(Se={}));(u=>{(i=>{const s=class{constructor(h,c){this.modeBits=h,this.numBitsCharCount=c}numCharCountBits(h){return this.numBitsCharCount[Math.floor((h+7)/17)]}};s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),i.Mode=s})(u.QrSegment||(u.QrSegment={}))})(Se||(Se={}));var ze=Se;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var su={L:ze.QrCode.Ecc.LOW,M:ze.QrCode.Ecc.MEDIUM,Q:ze.QrCode.Ecc.QUARTILE,H:ze.QrCode.Ecc.HIGH},ar=128,ur="L",hr="#FFFFFF",lr="#000000",cr=!1,dr=1,ru=4,ou=0,au=.1;function fr(u,i=0){const s=[];return u.forEach(function(o,h){let c=null;o.forEach(function(f,v){if(!f&&c!==null){s.push(`M${c+i} ${h+i}h${v-c}v1H${c+i}z`),c=null;return}if(v===o.length-1){if(!f)return;c===null?s.push(`M${v+i},${h+i} h1v1H${v+i}z`):s.push(`M${c+i},${h+i} h${v+1-c}v1H${c+i}z`);return}f&&c===null&&(c=v)})}),s.join("")}function pr(u,i){return u.slice().map((s,o)=>o<i.y||o>=i.y+i.h?s:s.map((h,c)=>c<i.x||c>=i.x+i.w?h:!1))}function uu(u,i,s,o){if(o==null)return null;const h=u.length+s*2,c=Math.floor(i*au),f=h/i,v=(o.width||c)*f,d=(o.height||c)*f,p=o.x==null?u.length/2-v/2:o.x*f,m=o.y==null?u.length/2-d/2:o.y*f,g=o.opacity==null?1:o.opacity;let w=null;if(o.excavate){let k=Math.floor(p),b=Math.floor(m),S=Math.ceil(v+p-k),F=Math.ceil(d+m-b);w={x:k,y:b,w:S,h:F}}const C=o.crossOrigin;return{x:p,y:m,h:d,w:v,excavation:w,opacity:g,crossOrigin:C}}function hu(u,i){return i!=null?Math.max(Math.floor(i),0):u?ru:ou}function _r({value:u,level:i,minVersion:s,includeMargin:o,marginSize:h,imageSettings:c,size:f,boostLevel:v}){let d=ot.useMemo(()=>{const k=(Array.isArray(u)?u:[u]).reduce((b,S)=>(b.push(...ze.QrSegment.makeSegments(S)),b),[]);return ze.QrCode.encodeSegments(k,su[i],s,void 0,void 0,v)},[u,i,s,v]);const{cells:p,margin:m,numCells:g,calculatedImageSettings:w}=ot.useMemo(()=>{let C=d.getModules();const k=hu(o,h),b=C.length+k*2,S=uu(C,f,k,c);return{cells:C,margin:k,numCells:b,calculatedImageSettings:S}},[d,f,c,o,h]);return{qrcode:d,margin:m,cells:p,numCells:g,calculatedImageSettings:w}}var lu=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),cu=ot.forwardRef(function(i,s){const o=i,{value:h,size:c=ar,level:f=ur,bgColor:v=hr,fgColor:d=lr,includeMargin:p=cr,minVersion:m=dr,boostLevel:g,marginSize:w,imageSettings:C}=o,b=yn(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:S}=b,F=yn(b,["style"]),G=C==null?void 0:C.src,T=ot.useRef(null),et=ot.useRef(null),at=ot.useCallback(rt=>{T.current=rt,typeof s=="function"?s(rt):s&&(s.current=rt)},[s]),[kt,Ct]=ot.useState(!1),{margin:it,cells:yt,numCells:Et,calculatedImageSettings:X}=_r({value:h,level:f,minVersion:m,boostLevel:g,includeMargin:p,marginSize:w,imageSettings:C,size:c});ot.useEffect(()=>{if(T.current!=null){const rt=T.current,St=rt.getContext("2d");if(!St)return;let O=yt;const N=et.current,P=X!=null&&N!==null&&N.complete&&N.naturalHeight!==0&&N.naturalWidth!==0;P&&X.excavation!=null&&(O=pr(yt,X.excavation));const ft=window.devicePixelRatio||1;rt.height=rt.width=c*ft;const A=c/Et*ft;St.scale(A,A),St.fillStyle=v,St.fillRect(0,0,Et,Et),St.fillStyle=d,lu?St.fill(new Path2D(fr(O,it))):yt.forEach(function(U,Q){U.forEach(function(_t,dt){_t&&St.fillRect(dt+it,Q+it,1,1)})}),X&&(St.globalAlpha=X.opacity),P&&St.drawImage(N,X.x+it,X.y+it,X.w,X.h)}}),ot.useEffect(()=>{Ct(!1)},[G]);const mt=vn({height:c,width:c},S);let It=null;return G!=null&&(It=ot.createElement("img",{src:G,key:G,style:{display:"none"},onLoad:()=>{Ct(!0)},ref:et,crossOrigin:X==null?void 0:X.crossOrigin})),ot.createElement(ot.Fragment,null,ot.createElement("canvas",vn({style:mt,height:c,width:c,ref:at,role:"img"},F)),It)});cu.displayName="QRCodeCanvas";var du=ot.forwardRef(function(i,s){const o=i,{value:h,size:c=ar,level:f=ur,bgColor:v=hr,fgColor:d=lr,includeMargin:p=cr,minVersion:m=dr,boostLevel:g,title:w,marginSize:C,imageSettings:k}=o,b=yn(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:S,cells:F,numCells:G,calculatedImageSettings:T}=_r({value:h,level:f,minVersion:m,boostLevel:g,includeMargin:p,marginSize:C,imageSettings:k,size:c});let et=F,at=null;k!=null&&T!=null&&(T.excavation!=null&&(et=pr(F,T.excavation)),at=ot.createElement("image",{href:k.src,height:T.h,width:T.w,x:T.x+S,y:T.y+S,preserveAspectRatio:"none",opacity:T.opacity,crossOrigin:T.crossOrigin}));const kt=fr(et,S);return ot.createElement("svg",vn({height:c,width:c,viewBox:`0 0 ${G} ${G}`,ref:s,role:"img"},b),!!w&&ot.createElement("title",null,w),ot.createElement("path",{fill:v,d:`M0,0 h${G}v${G}H0z`,shapeRendering:"crispEdges"}),ot.createElement("path",{fill:d,d:kt,shapeRendering:"crispEdges"}),at)});du.displayName="QRCodeSVG";H.forwardRef(({name:u,...i},s)=>{const o=Le();return vt.jsx(ra,{ref:s,...i,...o.getInputProps(u,{type:"checkbox"})},o.key(u))});const Wu=H.forwardRef(({name:u,...i},s)=>{const o=Le();return vt.jsx(oa,{ref:s,...i,...o.getInputProps(u)})});function ge(u){return typeof u=="string"||u instanceof String}function Vs(u){var i;return typeof u=="object"&&u!=null&&(u==null||(i=u.constructor)==null?void 0:i.name)==="Object"}function mr(u,i){return Array.isArray(i)?mr(u,(s,o)=>i.includes(o)):Object.entries(u).reduce((s,o)=>{let[h,c]=o;return i(c,h)&&(s[h]=c),s},{})}const Z={NONE:"NONE",LEFT:"LEFT",FORCE_LEFT:"FORCE_LEFT",RIGHT:"RIGHT",FORCE_RIGHT:"FORCE_RIGHT"};function fu(u){switch(u){case Z.LEFT:return Z.FORCE_LEFT;case Z.RIGHT:return Z.FORCE_RIGHT;default:return u}}function pn(u){return u.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function bi(u,i){if(i===u)return!0;const s=Array.isArray(i),o=Array.isArray(u);let h;if(s&&o){if(i.length!=u.length)return!1;for(h=0;h<i.length;h++)if(!bi(i[h],u[h]))return!1;return!0}if(s!=o)return!1;if(i&&u&&typeof i=="object"&&typeof u=="object"){const c=i instanceof Date,f=u instanceof Date;if(c&&f)return i.getTime()==u.getTime();if(c!=f)return!1;const v=i instanceof RegExp,d=u instanceof RegExp;if(v&&d)return i.toString()==u.toString();if(v!=d)return!1;const p=Object.keys(i);for(h=0;h<p.length;h++)if(!Object.prototype.hasOwnProperty.call(u,p[h]))return!1;for(h=0;h<p.length;h++)if(!bi(u[p[h]],i[p[h]]))return!1;return!0}else if(i&&u&&typeof i=="function"&&typeof u=="function")return i.toString()===u.toString();return!1}class pu{constructor(i){for(Object.assign(this,i);this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start;if(this.insertedCount)for(;this.value.slice(this.cursorPos)!==this.oldValue.slice(this.oldSelection.end);)this.value.length-this.cursorPos<this.oldValue.length-this.oldSelection.end?++this.oldSelection.end:++this.cursorPos}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?Z.NONE:(this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos)&&this.oldSelection.end===this.oldSelection.start?Z.RIGHT:Z.LEFT}}function K(u,i){return new K.InputMask(u,i)}function gr(u){if(u==null)throw new Error("mask property should be defined");return u instanceof RegExp?K.MaskedRegExp:ge(u)?K.MaskedPattern:u===Date?K.MaskedDate:u===Number?K.MaskedNumber:Array.isArray(u)||u===Array?K.MaskedDynamic:K.Masked&&u.prototype instanceof K.Masked?u:K.Masked&&u instanceof K.Masked?u.constructor:u instanceof Function?K.MaskedFunction:(console.warn("Mask not found for mask",u),K.Masked)}function ii(u){if(!u)throw new Error("Options in not defined");if(K.Masked){if(u.prototype instanceof K.Masked)return{mask:u};const{mask:i=void 0,...s}=u instanceof K.Masked?{mask:u}:Vs(u)&&u.mask instanceof K.Masked?u:{};if(i){const o=i.mask;return{...mr(i,(h,c)=>!c.startsWith("_")),mask:i.constructor,_mask:o,...s}}}return Vs(u)?{...u}:{mask:u}}function de(u){if(K.Masked&&u instanceof K.Masked)return u;const i=ii(u),s=gr(i.mask);if(!s)throw new Error("Masked class is not found for provided mask "+i.mask+", appropriate module needs to be imported manually before creating mask.");return i.mask===s&&delete i.mask,i._mask&&(i.mask=i._mask,delete i._mask),new s(i)}K.createMask=de;class Pn{get selectionStart(){let i;try{i=this._unsafeSelectionStart}catch{}return i??this.value.length}get selectionEnd(){let i;try{i=this._unsafeSelectionEnd}catch{}return i??this.value.length}select(i,s){if(!(i==null||s==null||i===this.selectionStart&&s===this.selectionEnd))try{this._unsafeSelect(i,s)}catch{}}get isActive(){return!1}}K.MaskElement=Pn;const Zs=90,_u=89;class Bi extends Pn{constructor(i){super(),this.input=i,this._onKeydown=this._onKeydown.bind(this),this._onInput=this._onInput.bind(this),this._onBeforeinput=this._onBeforeinput.bind(this),this._onCompositionEnd=this._onCompositionEnd.bind(this)}get rootElement(){var i,s,o;return(i=(s=(o=this.input).getRootNode)==null?void 0:s.call(o))!=null?i:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(i){this.input.addEventListener("keydown",this._onKeydown),this.input.addEventListener("input",this._onInput),this.input.addEventListener("beforeinput",this._onBeforeinput),this.input.addEventListener("compositionend",this._onCompositionEnd),this.input.addEventListener("drop",i.drop),this.input.addEventListener("click",i.click),this.input.addEventListener("focus",i.focus),this.input.addEventListener("blur",i.commit),this._handlers=i}_onKeydown(i){if(this._handlers.redo&&(i.keyCode===Zs&&i.shiftKey&&(i.metaKey||i.ctrlKey)||i.keyCode===_u&&i.ctrlKey))return i.preventDefault(),this._handlers.redo(i);if(this._handlers.undo&&i.keyCode===Zs&&(i.metaKey||i.ctrlKey))return i.preventDefault(),this._handlers.undo(i);i.isComposing||this._handlers.selectionChange(i)}_onBeforeinput(i){if(i.inputType==="historyUndo"&&this._handlers.undo)return i.preventDefault(),this._handlers.undo(i);if(i.inputType==="historyRedo"&&this._handlers.redo)return i.preventDefault(),this._handlers.redo(i)}_onCompositionEnd(i){this._handlers.input(i)}_onInput(i){i.isComposing||this._handlers.input(i)}unbindEvents(){this.input.removeEventListener("keydown",this._onKeydown),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("beforeinput",this._onBeforeinput),this.input.removeEventListener("compositionend",this._onCompositionEnd),this.input.removeEventListener("drop",this._handlers.drop),this.input.removeEventListener("click",this._handlers.click),this.input.removeEventListener("focus",this._handlers.focus),this.input.removeEventListener("blur",this._handlers.commit),this._handlers={}}}K.HTMLMaskElement=Bi;class mu extends Bi{constructor(i){super(i),this.input=i}get _unsafeSelectionStart(){return this.input.selectionStart!=null?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(i,s){this.input.setSelectionRange(i,s)}get value(){return this.input.value}set value(i){this.input.value=i}}K.HTMLMaskElement=Bi;class vr extends Bi{get _unsafeSelectionStart(){const i=this.rootElement,s=i.getSelection&&i.getSelection(),o=s&&s.anchorOffset,h=s&&s.focusOffset;return h==null||o==null||o<h?o:h}get _unsafeSelectionEnd(){const i=this.rootElement,s=i.getSelection&&i.getSelection(),o=s&&s.anchorOffset,h=s&&s.focusOffset;return h==null||o==null||o>h?o:h}_unsafeSelect(i,s){if(!this.rootElement.createRange)return;const o=this.rootElement.createRange();o.setStart(this.input.firstChild||this.input,i),o.setEnd(this.input.lastChild||this.input,s);const h=this.rootElement,c=h.getSelection&&h.getSelection();c&&(c.removeAllRanges(),c.addRange(o))}get value(){return this.input.textContent||""}set value(i){this.input.textContent=i}}K.HTMLContenteditableMaskElement=vr;class Oi{constructor(){this.states=[],this.currentIndex=0}get currentState(){return this.states[this.currentIndex]}get isEmpty(){return this.states.length===0}push(i){this.currentIndex<this.states.length-1&&(this.states.length=this.currentIndex+1),this.states.push(i),this.states.length>Oi.MAX_LENGTH&&this.states.shift(),this.currentIndex=this.states.length-1}go(i){return this.currentIndex=Math.min(Math.max(this.currentIndex+i,0),this.states.length-1),this.currentState}undo(){return this.go(-1)}redo(){return this.go(1)}clear(){this.states.length=0,this.currentIndex=0}}Oi.MAX_LENGTH=100;class gu{constructor(i,s){this.el=i instanceof Pn?i:i.isContentEditable&&i.tagName!=="INPUT"&&i.tagName!=="TEXTAREA"?new vr(i):new mu(i),this.masked=de(s),this._listeners={},this._value="",this._unmaskedValue="",this._rawInputValue="",this.history=new Oi,this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this._onUndo=this._onUndo.bind(this),this._onRedo=this._onRedo.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}maskEquals(i){var s;return i==null||((s=this.masked)==null?void 0:s.maskEquals(i))}get mask(){return this.masked.mask}set mask(i){if(this.maskEquals(i))return;if(!(i instanceof K.Masked)&&this.masked.constructor===gr(i)){this.masked.updateOptions({mask:i});return}const s=i instanceof K.Masked?i:de({mask:i});s.unmaskedValue=this.masked.unmaskedValue,this.masked=s}get value(){return this._value}set value(i){this.value!==i&&(this.masked.value=i,this.updateControl("auto"))}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(i){this.unmaskedValue!==i&&(this.masked.unmaskedValue=i,this.updateControl("auto"))}get rawInputValue(){return this._rawInputValue}set rawInputValue(i){this.rawInputValue!==i&&(this.masked.rawInputValue=i,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(i){this.masked.typedValueEquals(i)||(this.masked.typedValue=i,this.updateControl("auto"))}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange,undo:this._onUndo,redo:this._onRedo})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(i,s){const o=this._listeners[i];o&&o.forEach(h=>h(s))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(i){!this.el||!this.el.isActive||(this.el.select(i,i),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value,this._unmaskedValue=this.masked.unmaskedValue,this._rawInputValue=this.masked.rawInputValue}updateControl(i){const s=this.masked.unmaskedValue,o=this.masked.value,h=this.masked.rawInputValue,c=this.displayValue,f=this.unmaskedValue!==s||this.value!==o||this._rawInputValue!==h;this._unmaskedValue=s,this._value=o,this._rawInputValue=h,this.el.value!==c&&(this.el.value=c),i==="auto"?this.alignCursor():i!=null&&(this.cursorPos=i),f&&this._fireChangeEvents(),!this._historyChanging&&(f||this.history.isEmpty)&&this.history.push({unmaskedValue:s,selection:{start:this.selectionStart,end:this.cursorPos}})}updateOptions(i){const{mask:s,...o}=i,h=!this.maskEquals(s),c=this.masked.optionsIsChanged(o);h&&(this.mask=s),c&&this.masked.updateOptions(o),(h||c)&&this.updateControl()}updateCursor(i){i!=null&&(this.cursorPos=i,this._delayUpdateCursor(i))}_delayUpdateCursor(i){this._abortUpdateCursor(),this._changingCursorPos=i,this._cursorChanging=setTimeout(()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())},10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,Z.LEFT))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(i,s){return this._listeners[i]||(this._listeners[i]=[]),this._listeners[i].push(s),this}off(i,s){if(!this._listeners[i])return this;if(!s)return delete this._listeners[i],this;const o=this._listeners[i].indexOf(s);return o>=0&&this._listeners[i].splice(o,1),this}_onInput(i){this._inputEvent=i,this._abortUpdateCursor();const s=new pu({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection}),o=this.masked.rawInputValue,h=this.masked.splice(s.startChangePos,s.removed.length,s.inserted,s.removeDirection,{input:!0,raw:!0}).offset,c=o===this.masked.rawInputValue?s.removeDirection:Z.NONE;let f=this.masked.nearestInputPos(s.startChangePos+h,c);c!==Z.NONE&&(f=this.masked.nearestInputPos(f,Z.NONE)),this.updateControl(f),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(i){i.preventDefault(),i.stopPropagation()}_onFocus(i){this.alignCursorFriendly()}_onClick(i){this.alignCursorFriendly()}_onUndo(){this._applyHistoryState(this.history.undo())}_onRedo(){this._applyHistoryState(this.history.redo())}_applyHistoryState(i){i&&(this._historyChanging=!0,this.unmaskedValue=i.unmaskedValue,this.el.select(i.selection.start,i.selection.end),this._saveSelection(),this._historyChanging=!1)}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}}K.InputMask=gu;class tt{static normalize(i){return Array.isArray(i)?i:[i,new tt]}constructor(i){Object.assign(this,{inserted:"",rawInserted:"",tailShift:0,skip:!1},i)}aggregate(i){return this.inserted+=i.inserted,this.rawInserted+=i.rawInserted,this.tailShift+=i.tailShift,this.skip=this.skip||i.skip,this}get offset(){return this.tailShift+this.inserted.length}get consumed(){return!!this.rawInserted||this.skip}equals(i){return this.inserted===i.inserted&&this.tailShift===i.tailShift&&this.rawInserted===i.rawInserted&&this.skip===i.skip}}K.ChangeDetails=tt;class se{constructor(i,s,o){i===void 0&&(i=""),s===void 0&&(s=0),this.value=i,this.from=s,this.stop=o}toString(){return this.value}extend(i){this.value+=String(i)}appendTo(i){return i.append(this.toString(),{tail:!0}).aggregate(i._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(i){Object.assign(this,i)}unshift(i){if(!this.value.length||i!=null&&this.from>=i)return"";const s=this.value[0];return this.value=this.value.slice(1),s}shift(){if(!this.value.length)return"";const i=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),i}}class Ft{constructor(i){this._value="",this._update({...Ft.DEFAULTS,...i}),this._initialized=!0}updateOptions(i){this.optionsIsChanged(i)&&this.withValueRefresh(this._update.bind(this,i))}_update(i){Object.assign(this,i)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(i){this._value=i._value}reset(){this._value=""}get value(){return this._value}set value(i){this.resolve(i,{input:!0})}resolve(i,s){s===void 0&&(s={input:!0}),this.reset(),this.append(i,s,""),this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(i){this.resolve(i,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(i){this.format?this.value=this.format(i,this):this.unmaskedValue=String(i)}get rawInputValue(){return this.extractInput(0,this.displayValue.length,{raw:!0})}set rawInputValue(i){this.resolve(i,{raw:!0})}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(i,s){return i}totalInputPositions(i,s){return i===void 0&&(i=0),s===void 0&&(s=this.displayValue.length),Math.min(this.displayValue.length,s-i)}extractInput(i,s,o){return i===void 0&&(i=0),s===void 0&&(s=this.displayValue.length),this.displayValue.slice(i,s)}extractTail(i,s){return i===void 0&&(i=0),s===void 0&&(s=this.displayValue.length),new se(this.extractInput(i,s),i)}appendTail(i){return ge(i)&&(i=new se(String(i))),i.appendTo(this)}_appendCharRaw(i,s){return i?(this._value+=i,new tt({inserted:i,rawInserted:i})):new tt}_appendChar(i,s,o){s===void 0&&(s={});const h=this.state;let c;if([i,c]=this.doPrepareChar(i,s),i&&(c=c.aggregate(this._appendCharRaw(i,s)),!c.rawInserted&&this.autofix==="pad")){const f=this.state;this.state=h;let v=this.pad(s);const d=this._appendCharRaw(i,s);v=v.aggregate(d),d.rawInserted||v.equals(c)?c=v:this.state=f}if(c.inserted){let f,v=this.doValidate(s)!==!1;if(v&&o!=null){const d=this.state;if(this.overwrite===!0){f=o.state;for(let m=0;m<c.rawInserted.length;++m)o.unshift(this.displayValue.length-c.tailShift)}let p=this.appendTail(o);if(v=p.rawInserted.length===o.toString().length,!(v&&p.inserted)&&this.overwrite==="shift"){this.state=d,f=o.state;for(let m=0;m<c.rawInserted.length;++m)o.shift();p=this.appendTail(o),v=p.rawInserted.length===o.toString().length}v&&p.inserted&&(this.state=d)}v||(c=new tt,this.state=h,o&&f&&(o.state=f))}return c}_appendPlaceholder(){return new tt}_appendEager(){return new tt}append(i,s,o){if(!ge(i))throw new Error("value should be string");const h=ge(o)?new se(String(o)):o;s!=null&&s.tail&&(s._beforeTailState=this.state);let c;[i,c]=this.doPrepare(i,s);for(let f=0;f<i.length;++f){const v=this._appendChar(i[f],s,h);if(!v.rawInserted&&!this.doSkipInvalid(i[f],s,h))break;c.aggregate(v)}return(this.eager===!0||this.eager==="append")&&s!=null&&s.input&&i&&c.aggregate(this._appendEager()),h!=null&&(c.tailShift+=this.appendTail(h).tailShift),c}remove(i,s){return i===void 0&&(i=0),s===void 0&&(s=this.displayValue.length),this._value=this.displayValue.slice(0,i)+this.displayValue.slice(s),new tt}withValueRefresh(i){if(this._refreshing||!this._initialized)return i();this._refreshing=!0;const s=this.rawInputValue,o=this.value,h=i();return this.rawInputValue=s,this.value&&this.value!==o&&o.indexOf(this.value)===0&&(this.append(o.slice(this.displayValue.length),{},""),this.doCommit()),delete this._refreshing,h}runIsolated(i){if(this._isolated||!this._initialized)return i(this);this._isolated=!0;const s=this.state,o=i(this);return this.state=s,delete this._isolated,o}doSkipInvalid(i,s,o){return!!this.skipInvalid}doPrepare(i,s){return s===void 0&&(s={}),tt.normalize(this.prepare?this.prepare(i,this,s):i)}doPrepareChar(i,s){return s===void 0&&(s={}),tt.normalize(this.prepareChar?this.prepareChar(i,this,s):i)}doValidate(i){return(!this.validate||this.validate(this.value,this,i))&&(!this.parent||this.parent.doValidate(i))}doCommit(){this.commit&&this.commit(this.value,this)}splice(i,s,o,h,c){o===void 0&&(o=""),h===void 0&&(h=Z.NONE),c===void 0&&(c={input:!0});const f=i+s,v=this.extractTail(f),d=this.eager===!0||this.eager==="remove";let p;d&&(h=fu(h),p=this.extractInput(0,f,{raw:!0}));let m=i;const g=new tt;if(h!==Z.NONE&&(m=this.nearestInputPos(i,s>1&&i!==0&&!d?Z.NONE:h),g.tailShift=m-i),g.aggregate(this.remove(m)),d&&h!==Z.NONE&&p===this.rawInputValue)if(h===Z.FORCE_LEFT){let w;for(;p===this.rawInputValue&&(w=this.displayValue.length);)g.aggregate(new tt({tailShift:-1})).aggregate(this.remove(w-1))}else h===Z.FORCE_RIGHT&&v.unshift();return g.aggregate(this.append(o,c,v))}maskEquals(i){return this.mask===i}optionsIsChanged(i){return!bi(this,i)}typedValueEquals(i){const s=this.typedValue;return i===s||Ft.EMPTY_VALUES.includes(i)&&Ft.EMPTY_VALUES.includes(s)||(this.format?this.format(i,this)===this.format(this.typedValue,this):!1)}pad(i){return new tt}}Ft.DEFAULTS={skipInvalid:!0};Ft.EMPTY_VALUES=[void 0,null,""];K.Masked=Ft;class be{constructor(i,s){i===void 0&&(i=[]),s===void 0&&(s=0),this.chunks=i,this.from=s}toString(){return this.chunks.map(String).join("")}extend(i){if(!String(i))return;i=ge(i)?new se(String(i)):i;const s=this.chunks[this.chunks.length-1],o=s&&(s.stop===i.stop||i.stop==null)&&i.from===s.from+s.toString().length;if(i instanceof se)o?s.extend(i.toString()):this.chunks.push(i);else if(i instanceof be){if(i.stop==null){let h;for(;i.chunks.length&&i.chunks[0].stop==null;)h=i.chunks.shift(),h.from+=i.from,this.extend(h)}i.toString()&&(i.stop=i.blockIndex,this.chunks.push(i))}}appendTo(i){if(!(i instanceof K.MaskedPattern))return new se(this.toString()).appendTo(i);const s=new tt;for(let o=0;o<this.chunks.length;++o){const h=this.chunks[o],c=i._mapPosToBlock(i.displayValue.length),f=h.stop;let v;if(f!=null&&(!c||c.index<=f)&&((h instanceof be||i._stops.indexOf(f)>=0)&&s.aggregate(i._appendPlaceholder(f)),v=h instanceof be&&i._blocks[f]),v){const d=v.appendTail(h);s.aggregate(d);const p=h.toString().slice(d.rawInserted.length);p&&s.aggregate(i.append(p,{tail:!0}))}else s.aggregate(i.append(h.toString(),{tail:!0}))}return s}get state(){return{chunks:this.chunks.map(i=>i.state),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(i){const{chunks:s,...o}=i;Object.assign(this,o),this.chunks=s.map(h=>{const c="chunks"in h?new be:new se;return c.state=h,c})}unshift(i){if(!this.chunks.length||i!=null&&this.from>=i)return"";const s=i!=null?i-this.from:i;let o=0;for(;o<this.chunks.length;){const h=this.chunks[o],c=h.unshift(s);if(h.toString()){if(!c)break;++o}else this.chunks.splice(o,1);if(c)return c}return""}shift(){if(!this.chunks.length)return"";let i=this.chunks.length-1;for(;0<=i;){const s=this.chunks[i],o=s.shift();if(s.toString()){if(!o)break;--i}else this.chunks.splice(i,1);if(o)return o}return""}}class vu{constructor(i,s){this.masked=i,this._log=[];const{offset:o,index:h}=i._mapPosToBlock(s)||(s<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=o,this.index=h,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(i){Object.assign(this,i)}pushState(){this._log.push(this.state)}popState(){const i=this._log.pop();return i&&(this.state=i),i}bindBlock(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.displayValue.length))}_pushLeft(i){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=((s=this.block)==null?void 0:s.displayValue.length)||0){var s;if(i())return this.ok=!0}return this.ok=!1}_pushRight(i){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(i())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,Z.FORCE_LEFT),this.offset!==0))return!0})}pushLeftBeforeInput(){return this._pushLeft(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,Z.LEFT),!0})}pushLeftBeforeRequired(){return this._pushLeft(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,Z.LEFT),!0})}pushRightBeforeFilled(){return this._pushRight(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,Z.FORCE_RIGHT),this.offset!==this.block.value.length))return!0})}pushRightBeforeInput(){return this._pushRight(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,Z.NONE),!0})}pushRightBeforeRequired(){return this._pushRight(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,Z.NONE),!0})}}class yr{constructor(i){Object.assign(this,i),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(i,s){return i===void 0&&(i=0),s===void 0&&(s=this._value.length),this._value=this._value.slice(0,i)+this._value.slice(s),this._value||(this._isRawInput=!1),new tt}nearestInputPos(i,s){s===void 0&&(s=Z.NONE);const o=0,h=this._value.length;switch(s){case Z.LEFT:case Z.FORCE_LEFT:return o;case Z.NONE:case Z.RIGHT:case Z.FORCE_RIGHT:default:return h}}totalInputPositions(i,s){return i===void 0&&(i=0),s===void 0&&(s=this._value.length),this._isRawInput?s-i:0}extractInput(i,s,o){return i===void 0&&(i=0),s===void 0&&(s=this._value.length),o===void 0&&(o={}),o.raw&&this._isRawInput&&this._value.slice(i,s)||""}get isComplete(){return!0}get isFilled(){return!!this._value}_appendChar(i,s){if(s===void 0&&(s={}),this.isFilled)return new tt;const o=this.eager===!0||this.eager==="append",c=this.char===i&&(this.isUnmasking||s.input||s.raw)&&(!s.raw||!o)&&!s.tail,f=new tt({inserted:this.char,rawInserted:c?this.char:""});return this._value=this.char,this._isRawInput=c&&(s.raw||s.input),f}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){const i=new tt;return this.isFilled||(this._value=i.inserted=this.char),i}extractTail(){return new se("")}appendTail(i){return ge(i)&&(i=new se(String(i))),i.appendTo(this)}append(i,s,o){const h=this._appendChar(i[0],s);return o!=null&&(h.tailShift+=this.appendTail(o).tailShift),h}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(i){this._value=i._value,this._isRawInput=!!i._rawInputValue}pad(i){return this._appendPlaceholder()}}class Si{constructor(i){const{parent:s,isOptional:o,placeholderChar:h,displayChar:c,lazy:f,eager:v,...d}=i;this.masked=de(d),Object.assign(this,{parent:s,isOptional:o,placeholderChar:h,displayChar:c,lazy:f,eager:v})}reset(){this.isFilled=!1,this.masked.reset()}remove(i,s){return i===void 0&&(i=0),s===void 0&&(s=this.value.length),i===0&&s>=1?(this.isFilled=!1,this.masked.remove(i,s)):new tt}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return!!this.masked.value||this.isOptional}_appendChar(i,s){if(s===void 0&&(s={}),this.isFilled)return new tt;const o=this.masked.state;let h=this.masked._appendChar(i,this.currentMaskFlags(s));return h.inserted&&this.doValidate(s)===!1&&(h=new tt,this.masked.state=o),!h.inserted&&!this.isOptional&&!this.lazy&&!s.input&&(h.inserted=this.placeholderChar),h.skip=!h.inserted&&!this.isOptional,this.isFilled=!!h.inserted,h}append(i,s,o){return this.masked.append(i,this.currentMaskFlags(s),o)}_appendPlaceholder(){return this.isFilled||this.isOptional?new tt:(this.isFilled=!0,new tt({inserted:this.placeholderChar}))}_appendEager(){return new tt}extractTail(i,s){return this.masked.extractTail(i,s)}appendTail(i){return this.masked.appendTail(i)}extractInput(i,s,o){return i===void 0&&(i=0),s===void 0&&(s=this.value.length),this.masked.extractInput(i,s,o)}nearestInputPos(i,s){s===void 0&&(s=Z.NONE);const o=0,h=this.value.length,c=Math.min(Math.max(i,o),h);switch(s){case Z.LEFT:case Z.FORCE_LEFT:return this.isComplete?c:o;case Z.RIGHT:case Z.FORCE_RIGHT:return this.isComplete?c:h;case Z.NONE:default:return c}}totalInputPositions(i,s){return i===void 0&&(i=0),s===void 0&&(s=this.value.length),this.value.slice(i,s).length}doValidate(i){return this.masked.doValidate(this.currentMaskFlags(i))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(i)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(i){this.masked.state=i.masked,this.isFilled=i.isFilled}currentMaskFlags(i){var s;return{...i,_beforeTailState:(i==null||(s=i._beforeTailState)==null?void 0:s.masked)||(i==null?void 0:i._beforeTailState)}}pad(i){return new tt}}Si.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./};class yu extends Ft{updateOptions(i){super.updateOptions(i)}_update(i){const s=i.mask;s&&(i.validate=o=>o.search(s)>=0),super._update(i)}}K.MaskedRegExp=yu;class Dt extends Ft{constructor(i){super({...Dt.DEFAULTS,...i,definitions:Object.assign({},Si.DEFAULT_DEFINITIONS,i==null?void 0:i.definitions)})}updateOptions(i){super.updateOptions(i)}_update(i){i.definitions=Object.assign({},this.definitions,i.definitions),super._update(i),this._rebuildMask()}_rebuildMask(){const i=this.definitions;this._blocks=[],this.exposeBlock=void 0,this._stops=[],this._maskedBlocks={};const s=this.mask;if(!s||!i)return;let o=!1,h=!1;for(let c=0;c<s.length;++c){if(this.blocks){const p=s.slice(c),m=Object.keys(this.blocks).filter(w=>p.indexOf(w)===0);m.sort((w,C)=>C.length-w.length);const g=m[0];if(g){const{expose:w,repeat:C,...k}=ii(this.blocks[g]),b={lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite,autofix:this.autofix,...k,repeat:C,parent:this},S=C!=null?new K.RepeatBlock(b):de(b);S&&(this._blocks.push(S),w&&(this.exposeBlock=S),this._maskedBlocks[g]||(this._maskedBlocks[g]=[]),this._maskedBlocks[g].push(this._blocks.length-1)),c+=g.length-1;continue}}let f=s[c],v=f in i;if(f===Dt.STOP_CHAR){this._stops.push(this._blocks.length);continue}if(f==="{"||f==="}"){o=!o;continue}if(f==="["||f==="]"){h=!h;continue}if(f===Dt.ESCAPE_CHAR){if(++c,f=s[c],!f)break;v=!1}const d=v?new Si({isOptional:h,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,...ii(i[f]),parent:this}):new yr({char:f,eager:this.eager,isUnmasking:o});this._blocks.push(d)}}get state(){return{...super.state,_blocks:this._blocks.map(i=>i.state)}}set state(i){if(!i){this.reset();return}const{_blocks:s,...o}=i;this._blocks.forEach((h,c)=>h.state=s[c]),super.state=o}reset(){super.reset(),this._blocks.forEach(i=>i.reset())}get isComplete(){return this.exposeBlock?this.exposeBlock.isComplete:this._blocks.every(i=>i.isComplete)}get isFilled(){return this._blocks.every(i=>i.isFilled)}get isFixed(){return this._blocks.every(i=>i.isFixed)}get isOptional(){return this._blocks.every(i=>i.isOptional)}doCommit(){this._blocks.forEach(i=>i.doCommit()),super.doCommit()}get unmaskedValue(){return this.exposeBlock?this.exposeBlock.unmaskedValue:this._blocks.reduce((i,s)=>i+=s.unmaskedValue,"")}set unmaskedValue(i){if(this.exposeBlock){const s=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.unmaskedValue=i,this.appendTail(s),this.doCommit()}else super.unmaskedValue=i}get value(){return this.exposeBlock?this.exposeBlock.value:this._blocks.reduce((i,s)=>i+=s.value,"")}set value(i){if(this.exposeBlock){const s=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.value=i,this.appendTail(s),this.doCommit()}else super.value=i}get typedValue(){return this.exposeBlock?this.exposeBlock.typedValue:super.typedValue}set typedValue(i){if(this.exposeBlock){const s=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.typedValue=i,this.appendTail(s),this.doCommit()}else super.typedValue=i}get displayValue(){return this._blocks.reduce((i,s)=>i+=s.displayValue,"")}appendTail(i){return super.appendTail(i).aggregate(this._appendPlaceholder())}_appendEager(){var i;const s=new tt;let o=(i=this._mapPosToBlock(this.displayValue.length))==null?void 0:i.index;if(o==null)return s;this._blocks[o].isFilled&&++o;for(let h=o;h<this._blocks.length;++h){const c=this._blocks[h]._appendEager();if(!c.inserted)break;s.aggregate(c)}return s}_appendCharRaw(i,s){s===void 0&&(s={});const o=this._mapPosToBlock(this.displayValue.length),h=new tt;if(!o)return h;for(let f=o.index,v;v=this._blocks[f];++f){var c;const d=v._appendChar(i,{...s,_beforeTailState:(c=s._beforeTailState)==null||(c=c._blocks)==null?void 0:c[f]});if(h.aggregate(d),d.consumed)break}return h}extractTail(i,s){i===void 0&&(i=0),s===void 0&&(s=this.displayValue.length);const o=new be;return i===s||this._forEachBlocksInRange(i,s,(h,c,f,v)=>{const d=h.extractTail(f,v);d.stop=this._findStopBefore(c),d.from=this._blockStartPos(c),d instanceof be&&(d.blockIndex=c),o.extend(d)}),o}extractInput(i,s,o){if(i===void 0&&(i=0),s===void 0&&(s=this.displayValue.length),o===void 0&&(o={}),i===s)return"";let h="";return this._forEachBlocksInRange(i,s,(c,f,v,d)=>{h+=c.extractInput(v,d,o)}),h}_findStopBefore(i){let s;for(let o=0;o<this._stops.length;++o){const h=this._stops[o];if(h<=i)s=h;else break}return s}_appendPlaceholder(i){const s=new tt;if(this.lazy&&i==null)return s;const o=this._mapPosToBlock(this.displayValue.length);if(!o)return s;const h=o.index,c=i??this._blocks.length;return this._blocks.slice(h,c).forEach(f=>{if(!f.lazy||i!=null){var v;s.aggregate(f._appendPlaceholder((v=f._blocks)==null?void 0:v.length))}}),s}_mapPosToBlock(i){let s="";for(let o=0;o<this._blocks.length;++o){const h=this._blocks[o],c=s.length;if(s+=h.displayValue,i<=s.length)return{index:o,offset:i-c}}}_blockStartPos(i){return this._blocks.slice(0,i).reduce((s,o)=>s+=o.displayValue.length,0)}_forEachBlocksInRange(i,s,o){s===void 0&&(s=this.displayValue.length);const h=this._mapPosToBlock(i);if(h){const c=this._mapPosToBlock(s),f=c&&h.index===c.index,v=h.offset,d=c&&f?c.offset:this._blocks[h.index].displayValue.length;if(o(this._blocks[h.index],h.index,v,d),c&&!f){for(let p=h.index+1;p<c.index;++p)o(this._blocks[p],p,0,this._blocks[p].displayValue.length);o(this._blocks[c.index],c.index,0,c.offset)}}}remove(i,s){i===void 0&&(i=0),s===void 0&&(s=this.displayValue.length);const o=super.remove(i,s);return this._forEachBlocksInRange(i,s,(h,c,f,v)=>{o.aggregate(h.remove(f,v))}),o}nearestInputPos(i,s){if(s===void 0&&(s=Z.NONE),!this._blocks.length)return 0;const o=new vu(this,i);if(s===Z.NONE)return o.pushRightBeforeInput()||(o.popState(),o.pushLeftBeforeInput())?o.pos:this.displayValue.length;if(s===Z.LEFT||s===Z.FORCE_LEFT){if(s===Z.LEFT){if(o.pushRightBeforeFilled(),o.ok&&o.pos===i)return i;o.popState()}if(o.pushLeftBeforeInput(),o.pushLeftBeforeRequired(),o.pushLeftBeforeFilled(),s===Z.LEFT){if(o.pushRightBeforeInput(),o.pushRightBeforeRequired(),o.ok&&o.pos<=i||(o.popState(),o.ok&&o.pos<=i))return o.pos;o.popState()}return o.ok?o.pos:s===Z.FORCE_LEFT?0:(o.popState(),o.ok||(o.popState(),o.ok)?o.pos:0)}return s===Z.RIGHT||s===Z.FORCE_RIGHT?(o.pushRightBeforeInput(),o.pushRightBeforeRequired(),o.pushRightBeforeFilled()?o.pos:s===Z.FORCE_RIGHT?this.displayValue.length:(o.popState(),o.ok||(o.popState(),o.ok)?o.pos:this.nearestInputPos(i,Z.LEFT))):i}totalInputPositions(i,s){i===void 0&&(i=0),s===void 0&&(s=this.displayValue.length);let o=0;return this._forEachBlocksInRange(i,s,(h,c,f,v)=>{o+=h.totalInputPositions(f,v)}),o}maskedBlock(i){return this.maskedBlocks(i)[0]}maskedBlocks(i){const s=this._maskedBlocks[i];return s?s.map(o=>this._blocks[o]):[]}pad(i){const s=new tt;return this._forEachBlocksInRange(0,this.displayValue.length,o=>s.aggregate(o.pad(i))),s}}Dt.DEFAULTS={...Ft.DEFAULTS,lazy:!0,placeholderChar:"_"};Dt.STOP_CHAR="`";Dt.ESCAPE_CHAR="\\";Dt.InputDefinition=Si;Dt.FixedDefinition=yr;K.MaskedPattern=Dt;class ki extends Dt{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(i){super(i)}updateOptions(i){super.updateOptions(i)}_update(i){const{to:s=this.to||0,from:o=this.from||0,maxLength:h=this.maxLength||0,autofix:c=this.autofix,...f}=i;this.to=s,this.from=o,this.maxLength=Math.max(String(s).length,h),this.autofix=c;const v=String(this.from).padStart(this.maxLength,"0"),d=String(this.to).padStart(this.maxLength,"0");let p=0;for(;p<d.length&&d[p]===v[p];)++p;f.mask=d.slice(0,p).replace(/0/g,"\\0")+"0".repeat(this.maxLength-p),super._update(f)}get isComplete(){return super.isComplete&&!!this.value}boundaries(i){let s="",o="";const[,h,c]=i.match(/^(\D*)(\d*)(\D*)/)||[];return c&&(s="0".repeat(h.length)+c,o="9".repeat(h.length)+c),s=s.padEnd(this.maxLength,"0"),o=o.padEnd(this.maxLength,"9"),[s,o]}doPrepareChar(i,s){s===void 0&&(s={});let o;return[i,o]=super.doPrepareChar(i.replace(/\D/g,""),s),i||(o.skip=!this.isComplete),[i,o]}_appendCharRaw(i,s){if(s===void 0&&(s={}),!this.autofix||this.value.length+1>this.maxLength)return super._appendCharRaw(i,s);const o=String(this.from).padStart(this.maxLength,"0"),h=String(this.to).padStart(this.maxLength,"0"),[c,f]=this.boundaries(this.value+i);return Number(f)<this.from?super._appendCharRaw(o[this.value.length],s):Number(c)>this.to?!s.tail&&this.autofix==="pad"&&this.value.length+1<this.maxLength?super._appendCharRaw(o[this.value.length],s).aggregate(this._appendCharRaw(i,s)):super._appendCharRaw(h[this.value.length],s):super._appendCharRaw(i,s)}doValidate(i){const s=this.value;if(s.search(/[^0]/)===-1&&s.length<=this._matchFrom)return!0;const[h,c]=this.boundaries(s);return this.from<=Number(c)&&Number(h)<=this.to&&super.doValidate(i)}pad(i){const s=new tt;if(this.value.length===this.maxLength)return s;const o=this.value,h=this.maxLength-this.value.length;if(h){this.reset();for(let c=0;c<h;++c)s.aggregate(super._appendCharRaw("0",i));o.split("").forEach(c=>this._appendCharRaw(c))}return s}}K.MaskedRange=ki;const wu="d{.}`m{.}`Y";class ce extends Dt{static extractPatternOptions(i){const{mask:s,pattern:o,...h}=i;return{...h,mask:ge(s)?s:o}}constructor(i){super(ce.extractPatternOptions({...ce.DEFAULTS,...i}))}updateOptions(i){super.updateOptions(i)}_update(i){const{mask:s,pattern:o,blocks:h,...c}={...ce.DEFAULTS,...i},f=Object.assign({},ce.GET_DEFAULT_BLOCKS());i.min&&(f.Y.from=i.min.getFullYear()),i.max&&(f.Y.to=i.max.getFullYear()),i.min&&i.max&&f.Y.from===f.Y.to&&(f.m.from=i.min.getMonth()+1,f.m.to=i.max.getMonth()+1,f.m.from===f.m.to&&(f.d.from=i.min.getDate(),f.d.to=i.max.getDate())),Object.assign(f,this.blocks,h),super._update({...c,mask:ge(s)?s:o,blocks:f})}doValidate(i){const s=this.date;return super.doValidate(i)&&(!this.isComplete||this.isDateExist(this.value)&&s!=null&&(this.min==null||this.min<=s)&&(this.max==null||s<=this.max))}isDateExist(i){return this.format(this.parse(i,this),this).indexOf(i)>=0}get date(){return this.typedValue}set date(i){this.typedValue=i}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(i){super.typedValue=i}maskEquals(i){return i===Date||super.maskEquals(i)}optionsIsChanged(i){return super.optionsIsChanged(ce.extractPatternOptions(i))}}ce.GET_DEFAULT_BLOCKS=()=>({d:{mask:ki,from:1,to:31,maxLength:2},m:{mask:ki,from:1,to:12,maxLength:2},Y:{mask:ki,from:1900,to:9999}});ce.DEFAULTS={...Dt.DEFAULTS,mask:Date,pattern:wu,format:(u,i)=>{if(!u)return"";const s=String(u.getDate()).padStart(2,"0"),o=String(u.getMonth()+1).padStart(2,"0"),h=u.getFullYear();return[s,o,h].join(".")},parse:(u,i)=>{const[s,o,h]=u.split(".").map(Number);return new Date(h,o-1,s)}};K.MaskedDate=ce;class Ri extends Ft{constructor(i){super({...Ri.DEFAULTS,...i}),this.currentMask=void 0}updateOptions(i){super.updateOptions(i)}_update(i){super._update(i),"mask"in i&&(this.exposeMask=void 0,this.compiledMasks=Array.isArray(i.mask)?i.mask.map(s=>{const{expose:o,...h}=ii(s),c=de({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid,...h});return o&&(this.exposeMask=c),c}):[])}_appendCharRaw(i,s){s===void 0&&(s={});const o=this._applyDispatch(i,s);return this.currentMask&&o.aggregate(this.currentMask._appendChar(i,this.currentMaskFlags(s))),o}_applyDispatch(i,s,o){i===void 0&&(i=""),s===void 0&&(s={}),o===void 0&&(o="");const h=s.tail&&s._beforeTailState!=null?s._beforeTailState._value:this.value,c=this.rawInputValue,f=s.tail&&s._beforeTailState!=null?s._beforeTailState._rawInputValue:c,v=c.slice(f.length),d=this.currentMask,p=new tt,m=d==null?void 0:d.state;return this.currentMask=this.doDispatch(i,{...s},o),this.currentMask&&(this.currentMask!==d?(this.currentMask.reset(),f&&(this.currentMask.append(f,{raw:!0}),p.tailShift=this.currentMask.value.length-h.length),v&&(p.tailShift+=this.currentMask.append(v,{raw:!0,tail:!0}).tailShift)):m&&(this.currentMask.state=m)),p}_appendPlaceholder(){const i=this._applyDispatch();return this.currentMask&&i.aggregate(this.currentMask._appendPlaceholder()),i}_appendEager(){const i=this._applyDispatch();return this.currentMask&&i.aggregate(this.currentMask._appendEager()),i}appendTail(i){const s=new tt;return i&&s.aggregate(this._applyDispatch("",{},i)),s.aggregate(this.currentMask?this.currentMask.appendTail(i):super.appendTail(i))}currentMaskFlags(i){var s,o;return{...i,_beforeTailState:((s=i._beforeTailState)==null?void 0:s.currentMaskRef)===this.currentMask&&((o=i._beforeTailState)==null?void 0:o.currentMask)||i._beforeTailState}}doDispatch(i,s,o){return s===void 0&&(s={}),o===void 0&&(o=""),this.dispatch(i,this,s,o)}doValidate(i){return super.doValidate(i)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(i)))}doPrepare(i,s){s===void 0&&(s={});let[o,h]=super.doPrepare(i,s);if(this.currentMask){let c;[o,c]=super.doPrepare(o,this.currentMaskFlags(s)),h=h.aggregate(c)}return[o,h]}doPrepareChar(i,s){s===void 0&&(s={});let[o,h]=super.doPrepareChar(i,s);if(this.currentMask){let c;[o,c]=super.doPrepareChar(o,this.currentMaskFlags(s)),h=h.aggregate(c)}return[o,h]}reset(){var i;(i=this.currentMask)==null||i.reset(),this.compiledMasks.forEach(s=>s.reset())}get value(){return this.exposeMask?this.exposeMask.value:this.currentMask?this.currentMask.value:""}set value(i){this.exposeMask?(this.exposeMask.value=i,this.currentMask=this.exposeMask,this._applyDispatch()):super.value=i}get unmaskedValue(){return this.exposeMask?this.exposeMask.unmaskedValue:this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(i){this.exposeMask?(this.exposeMask.unmaskedValue=i,this.currentMask=this.exposeMask,this._applyDispatch()):super.unmaskedValue=i}get typedValue(){return this.exposeMask?this.exposeMask.typedValue:this.currentMask?this.currentMask.typedValue:""}set typedValue(i){if(this.exposeMask){this.exposeMask.typedValue=i,this.currentMask=this.exposeMask,this._applyDispatch();return}let s=String(i);this.currentMask&&(this.currentMask.typedValue=i,s=this.currentMask.unmaskedValue),this.unmaskedValue=s}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var i;return!!((i=this.currentMask)!=null&&i.isComplete)}get isFilled(){var i;return!!((i=this.currentMask)!=null&&i.isFilled)}remove(i,s){const o=new tt;return this.currentMask&&o.aggregate(this.currentMask.remove(i,s)).aggregate(this._applyDispatch()),o}get state(){var i;return{...super.state,_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(s=>s.state),currentMaskRef:this.currentMask,currentMask:(i=this.currentMask)==null?void 0:i.state}}set state(i){const{compiledMasks:s,currentMaskRef:o,currentMask:h,...c}=i;s&&this.compiledMasks.forEach((f,v)=>f.state=s[v]),o!=null&&(this.currentMask=o,this.currentMask.state=h),super.state=c}extractInput(i,s,o){return this.currentMask?this.currentMask.extractInput(i,s,o):""}extractTail(i,s){return this.currentMask?this.currentMask.extractTail(i,s):super.extractTail(i,s)}doCommit(){this.currentMask&&this.currentMask.doCommit(),super.doCommit()}nearestInputPos(i,s){return this.currentMask?this.currentMask.nearestInputPos(i,s):super.nearestInputPos(i,s)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(i){this._overwrite=i}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(i){this._eager=i}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(i){this._skipInvalid=i}get autofix(){return this.currentMask?this.currentMask.autofix:this._autofix}set autofix(i){this._autofix=i}maskEquals(i){return Array.isArray(i)?this.compiledMasks.every((s,o)=>{if(!i[o])return;const{mask:h,...c}=i[o];return bi(s,c)&&s.maskEquals(h)}):super.maskEquals(i)}typedValueEquals(i){var s;return!!((s=this.currentMask)!=null&&s.typedValueEquals(i))}}Ri.DEFAULTS={...Ft.DEFAULTS,dispatch:(u,i,s,o)=>{if(!i.compiledMasks.length)return;const h=i.rawInputValue,c=i.compiledMasks.map((f,v)=>{const d=i.currentMask===f,p=d?f.displayValue.length:f.nearestInputPos(f.displayValue.length,Z.FORCE_LEFT);return f.rawInputValue!==h?(f.reset(),f.append(h,{raw:!0})):d||f.remove(p),f.append(u,i.currentMaskFlags(s)),f.appendTail(o),{index:v,weight:f.rawInputValue.length,totalInputPositions:f.totalInputPositions(0,Math.max(p,f.nearestInputPos(f.displayValue.length,Z.FORCE_LEFT)))}});return c.sort((f,v)=>v.weight-f.weight||v.totalInputPositions-f.totalInputPositions),i.compiledMasks[c[0].index]}};K.MaskedDynamic=Ri;class Fi extends Dt{constructor(i){super({...Fi.DEFAULTS,...i})}updateOptions(i){super.updateOptions(i)}_update(i){const{enum:s,...o}=i;if(s){const h=s.map(v=>v.length),c=Math.min(...h),f=Math.max(...h)-c;o.mask="*".repeat(c),f&&(o.mask+="["+"*".repeat(f)+"]"),this.enum=s}super._update(o)}_appendCharRaw(i,s){s===void 0&&(s={});const o=Math.min(this.nearestInputPos(0,Z.FORCE_RIGHT),this.value.length),h=this.enum.filter(c=>this.matchValue(c,this.unmaskedValue+i,o));if(h.length){h.length===1&&this._forEachBlocksInRange(0,this.value.length,(f,v)=>{const d=h[0][v];v>=this.value.length||d===f.value||(f.reset(),f._appendChar(d,s))});const c=super._appendCharRaw(h[0][this.value.length],s);return h.length===1&&h[0].slice(this.unmaskedValue.length).split("").forEach(f=>c.aggregate(super._appendCharRaw(f))),c}return new tt({skip:!this.isComplete})}extractTail(i,s){return i===void 0&&(i=0),s===void 0&&(s=this.displayValue.length),new se("",i)}remove(i,s){if(i===void 0&&(i=0),s===void 0&&(s=this.displayValue.length),i===s)return new tt;const o=Math.min(super.nearestInputPos(0,Z.FORCE_RIGHT),this.value.length);let h;for(h=i;h>=0&&!(this.enum.filter(v=>this.matchValue(v,this.value.slice(o,h),o)).length>1);--h);const c=super.remove(h,s);return c.tailShift+=h-i,c}get isComplete(){return this.enum.indexOf(this.value)>=0}}Fi.DEFAULTS={...Dt.DEFAULTS,matchValue:(u,i,s)=>u.indexOf(i,s)===s};K.MaskedEnum=Fi;class xu extends Ft{updateOptions(i){super.updateOptions(i)}_update(i){super._update({...i,validate:i.mask})}}K.MaskedFunction=xu;var wr;class Ut extends Ft{constructor(i){super({...Ut.DEFAULTS,...i})}updateOptions(i){super.updateOptions(i)}_update(i){super._update(i),this._updateRegExps()}_updateRegExps(){const i="^"+(this.allowNegative?"[+|\\-]?":""),s="\\d*",o=(this.scale?"("+pn(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=new RegExp(i+s+o),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(pn).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(pn(this.thousandsSeparator),"g")}_removeThousandsSeparators(i){return i.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(i){const s=i.split(this.radix);return s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),s.join(this.radix)}doPrepareChar(i,s){s===void 0&&(s={});const[o,h]=super.doPrepareChar(this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(s.input&&s.raw||!s.input&&!s.raw)?i.replace(this._mapToRadixRegExp,this.radix):i),s);return i&&!o&&(h.skip=!0),o&&!this.allowPositive&&!this.value&&o!=="-"&&h.aggregate(this._appendChar("-")),[o,h]}_separatorsCount(i,s){s===void 0&&(s=!1);let o=0;for(let h=0;h<i;++h)this._value.indexOf(this.thousandsSeparator,h)===h&&(++o,s&&(i+=this.thousandsSeparator.length));return o}_separatorsCountFromSlice(i){return i===void 0&&(i=this._value),this._separatorsCount(this._removeThousandsSeparators(i).length,!0)}extractInput(i,s,o){return i===void 0&&(i=0),s===void 0&&(s=this.displayValue.length),[i,s]=this._adjustRangeWithSeparators(i,s),this._removeThousandsSeparators(super.extractInput(i,s,o))}_appendCharRaw(i,s){s===void 0&&(s={});const o=s.tail&&s._beforeTailState?s._beforeTailState._value:this._value,h=this._separatorsCountFromSlice(o);this._value=this._removeThousandsSeparators(this.value);const c=this._value;this._value+=i;const f=this.number;let v=!isNaN(f),d=!1;if(v){let w;this.min!=null&&this.min<0&&this.number<this.min&&(w=this.min),this.max!=null&&this.max>0&&this.number>this.max&&(w=this.max),w!=null&&(this.autofix?(this._value=this.format(w,this).replace(Ut.UNMASKED_RADIX,this.radix),d||(d=c===this._value&&!s.tail)):v=!1),v&&(v=!!this._value.match(this._numberRegExp))}let p;v?p=new tt({inserted:this._value.slice(c.length),rawInserted:d?"":i,skip:d}):(this._value=c,p=new tt),this._value=this._insertThousandsSeparators(this._value);const m=s.tail&&s._beforeTailState?s._beforeTailState._value:this._value,g=this._separatorsCountFromSlice(m);return p.tailShift+=(g-h)*this.thousandsSeparator.length,p}_findSeparatorAround(i){if(this.thousandsSeparator){const s=i-this.thousandsSeparator.length+1,o=this.value.indexOf(this.thousandsSeparator,s);if(o<=i)return o}return-1}_adjustRangeWithSeparators(i,s){const o=this._findSeparatorAround(i);o>=0&&(i=o);const h=this._findSeparatorAround(s);return h>=0&&(s=h+this.thousandsSeparator.length),[i,s]}remove(i,s){i===void 0&&(i=0),s===void 0&&(s=this.displayValue.length),[i,s]=this._adjustRangeWithSeparators(i,s);const o=this.value.slice(0,i),h=this.value.slice(s),c=this._separatorsCount(o.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(o+h));const f=this._separatorsCountFromSlice(o);return new tt({tailShift:(f-c)*this.thousandsSeparator.length})}nearestInputPos(i,s){if(!this.thousandsSeparator)return i;switch(s){case Z.NONE:case Z.LEFT:case Z.FORCE_LEFT:{const o=this._findSeparatorAround(i-1);if(o>=0){const h=o+this.thousandsSeparator.length;if(i<h||this.value.length<=h||s===Z.FORCE_LEFT)return o}break}case Z.RIGHT:case Z.FORCE_RIGHT:{const o=this._findSeparatorAround(i);if(o>=0)return o+this.thousandsSeparator.length}}return i}doCommit(){if(this.value){const i=this.number;let s=i;this.min!=null&&(s=Math.max(s,this.min)),this.max!=null&&(s=Math.min(s,this.max)),s!==i&&(this.unmaskedValue=this.format(s,this));let o=this.value;this.normalizeZeros&&(o=this._normalizeZeros(o)),this.padFractionalZeros&&this.scale>0&&(o=this._padFractionalZeros(o)),this._value=o}super.doCommit()}_normalizeZeros(i){const s=this._removeThousandsSeparators(i).split(this.radix);return s[0]=s[0].replace(/^(\D*)(0*)(\d*)/,(o,h,c,f)=>h+f),i.length&&!/\d$/.test(s[0])&&(s[0]=s[0]+"0"),s.length>1&&(s[1]=s[1].replace(/0*$/,""),s[1].length||(s.length=1)),this._insertThousandsSeparators(s.join(this.radix))}_padFractionalZeros(i){if(!i)return i;const s=i.split(this.radix);return s.length<2&&s.push(""),s[1]=s[1].padEnd(this.scale,"0"),s.join(this.radix)}doSkipInvalid(i,s,o){s===void 0&&(s={});const h=this.scale===0&&i!==this.thousandsSeparator&&(i===this.radix||i===Ut.UNMASKED_RADIX||this.mapToRadix.includes(i));return super.doSkipInvalid(i,s,o)&&!h}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,Ut.UNMASKED_RADIX)}set unmaskedValue(i){super.unmaskedValue=i}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(i){this.rawInputValue=this.format(i,this).replace(Ut.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(i){this.typedValue=i}get allowNegative(){return this.min!=null&&this.min<0||this.max!=null&&this.max<0}get allowPositive(){return this.min!=null&&this.min>0||this.max!=null&&this.max>0}typedValueEquals(i){return(super.typedValueEquals(i)||Ut.EMPTY_VALUES.includes(i)&&Ut.EMPTY_VALUES.includes(this.typedValue))&&!(i===0&&this.value==="")}}wr=Ut;Ut.UNMASKED_RADIX=".";Ut.EMPTY_VALUES=[...Ft.EMPTY_VALUES,0];Ut.DEFAULTS={...Ft.DEFAULTS,mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[wr.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:!0,padFractionalZeros:!1,parse:Number,format:u=>u.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20})};K.MaskedNumber=Ut;const wn={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function xr(u,i,s){i===void 0&&(i=wn.MASKED),s===void 0&&(s=wn.MASKED);const o=de(u);return h=>o.runIsolated(c=>(c[i]=h,c[s]))}function ku(u,i,s,o){return xr(i,s,o)(u)}K.PIPE_TYPE=wn;K.createPipe=xr;K.pipe=ku;class Cu extends Dt{get repeatFrom(){var i;return(i=Array.isArray(this.repeat)?this.repeat[0]:this.repeat===1/0?0:this.repeat)!=null?i:0}get repeatTo(){var i;return(i=Array.isArray(this.repeat)?this.repeat[1]:this.repeat)!=null?i:1/0}constructor(i){super(i)}updateOptions(i){super.updateOptions(i)}_update(i){var s,o,h;const{repeat:c,...f}=ii(i);this._blockOpts=Object.assign({},this._blockOpts,f);const v=de(this._blockOpts);this.repeat=(s=(o=c??v.repeat)!=null?o:this.repeat)!=null?s:1/0,super._update({mask:"m".repeat(Math.max(this.repeatTo===1/0&&((h=this._blocks)==null?void 0:h.length)||0,this.repeatFrom)),blocks:{m:v},eager:v.eager,overwrite:v.overwrite,skipInvalid:v.skipInvalid,lazy:v.lazy,placeholderChar:v.placeholderChar,displayChar:v.displayChar})}_allocateBlock(i){if(i<this._blocks.length)return this._blocks[i];if(this.repeatTo===1/0||this._blocks.length<this.repeatTo)return this._blocks.push(de(this._blockOpts)),this.mask+="m",this._blocks[this._blocks.length-1]}_appendCharRaw(i,s){s===void 0&&(s={});const o=new tt;for(let d=(h=(c=this._mapPosToBlock(this.displayValue.length))==null?void 0:c.index)!=null?h:Math.max(this._blocks.length-1,0),p,m;p=(f=this._blocks[d])!=null?f:m=!m&&this._allocateBlock(d);++d){var h,c,f,v;const g=p._appendChar(i,{...s,_beforeTailState:(v=s._beforeTailState)==null||(v=v._blocks)==null?void 0:v[d]});if(g.skip&&m){this._blocks.pop(),this.mask=this.mask.slice(1);break}if(o.aggregate(g),g.consumed)break}return o}_trimEmptyTail(i,s){var o,h;i===void 0&&(i=0);const c=Math.max(((o=this._mapPosToBlock(i))==null?void 0:o.index)||0,this.repeatFrom,0);let f;s!=null&&(f=(h=this._mapPosToBlock(s))==null?void 0:h.index),f==null&&(f=this._blocks.length-1);let v=0;for(let d=f;c<=d&&!this._blocks[d].unmaskedValue;--d,++v);v&&(this._blocks.splice(f-v+1,v),this.mask=this.mask.slice(v))}reset(){super.reset(),this._trimEmptyTail()}remove(i,s){i===void 0&&(i=0),s===void 0&&(s=this.displayValue.length);const o=super.remove(i,s);return this._trimEmptyTail(i,s),o}totalInputPositions(i,s){return i===void 0&&(i=0),s==null&&this.repeatTo===1/0?1/0:super.totalInputPositions(i,s)}get state(){return super.state}set state(i){this._blocks.length=i._blocks.length,this.mask=this.mask.slice(0,this._blocks.length),super.state=i}}K.RepeatBlock=Cu;try{globalThis.IMask=K}catch{}const kr={mask:D.oneOfType([D.array,D.func,D.string,D.instanceOf(RegExp),D.oneOf([Date,Number,K.Masked]),D.instanceOf(K.Masked)]),value:D.any,unmask:D.oneOfType([D.bool,D.oneOf(["typed"])]),prepare:D.func,prepareChar:D.func,validate:D.func,commit:D.func,overwrite:D.oneOfType([D.bool,D.oneOf(["shift"])]),eager:D.oneOfType([D.bool,D.oneOf(["append","remove"])]),skipInvalid:D.bool,onAccept:D.func,onComplete:D.func,placeholderChar:D.string,displayChar:D.string,lazy:D.bool,definitions:D.object,blocks:D.object,enum:D.arrayOf(D.string),maxLength:D.number,from:D.number,to:D.number,pattern:D.string,format:D.func,parse:D.func,autofix:D.oneOfType([D.bool,D.oneOf(["pad"])]),radix:D.string,thousandsSeparator:D.string,mapToRadix:D.arrayOf(D.string),scale:D.number,normalizeZeros:D.bool,padFractionalZeros:D.bool,min:D.oneOfType([D.number,D.instanceOf(Date)]),max:D.oneOfType([D.number,D.instanceOf(Date)]),dispatch:D.func,inputRef:D.oneOfType([D.func,D.shape({current:D.object})])},Cr=Object.keys(kr).filter(u=>u!=="value"),Eu=["value","unmask","onAccept","onComplete","inputRef"],bu=Cr.filter(u=>Eu.indexOf(u)<0);function Su(u){var i;const s=(i=class extends ot.Component{constructor(c){super(c),this._inputRef=this._inputRef.bind(this)}componentDidMount(){this.props.mask&&this.initMask()}componentDidUpdate(){const c=this.props,f=this._extractMaskOptionsFromProps(c);if(f.mask)this.maskRef?(this.maskRef.updateOptions(f),"value"in c&&c.value!==void 0&&(this.maskValue=c.value)):this.initMask(f);else if(this.destroyMask(),"value"in c&&c.value!==void 0){var v;(v=this.element)!=null&&v.isContentEditable&&this.element.tagName!=="INPUT"&&this.element.tagName!=="TEXTAREA"?this.element.textContent=c.value:this.element.value=c.value}}componentWillUnmount(){this.destroyMask()}_inputRef(c){this.element=c,this.props.inputRef&&(Object.prototype.hasOwnProperty.call(this.props.inputRef,"current")?this.props.inputRef.current=c:this.props.inputRef(c))}initMask(c){c===void 0&&(c=this._extractMaskOptionsFromProps(this.props)),this.maskRef=K(this.element,c).on("accept",this._onAccept.bind(this)).on("complete",this._onComplete.bind(this)),"value"in this.props&&this.props.value!==void 0&&(this.maskValue=this.props.value)}destroyMask(){this.maskRef&&(this.maskRef.destroy(),delete this.maskRef)}_extractMaskOptionsFromProps(c){const{...f}=c;return Object.keys(f).filter(v=>bu.indexOf(v)<0).forEach(v=>{delete f[v]}),f}_extractNonMaskProps(c){const{...f}=c;return Cr.forEach(v=>{v!=="maxLength"&&delete f[v]}),"defaultValue"in f||(f.defaultValue=c.mask?"":f.value),delete f.value,f}get maskValue(){return this.maskRef?this.props.unmask==="typed"?this.maskRef.typedValue:this.props.unmask?this.maskRef.unmaskedValue:this.maskRef.value:""}set maskValue(c){this.maskRef&&(c=c==null&&this.props.unmask!=="typed"?"":c,this.props.unmask==="typed"?this.maskRef.typedValue=c:this.props.unmask?this.maskRef.unmaskedValue=c:this.maskRef.value=c)}_onAccept(c){this.props.onAccept&&this.maskRef&&this.props.onAccept(this.maskValue,this.maskRef,c)}_onComplete(c){this.props.onComplete&&this.maskRef&&this.props.onComplete(this.maskValue,this.maskRef,c)}render(){return ot.createElement(u,{...this._extractNonMaskProps(this.props),inputRef:this._inputRef})}},i.displayName=void 0,i.propTypes=void 0,i),o=u.displayName||u.name||"Component";return s.displayName="IMask("+o+")",s.propTypes=kr,ot.forwardRef((h,c)=>ot.createElement(s,{...h,ref:c}))}const Lu=Su(u=>{let{inputRef:i,...s}=u;return ot.createElement("input",{...s,ref:i})}),Tu=(u,i)=>ot.createElement(Lu,{...u,ref:i}),Pu=ot.forwardRef(Tu),Au={mask:Number,thousandsSeparator:" ",radix:".",normalizeZeros:!0},Mu=H.forwardRef(({name:u,placeholder:i,error:s,label:o,description:h,required:c,value:f,onChange:v,currency:d="USD",...p},m)=>{const[g,w]=Li({value:f,defaultValue:f,onChange:v}),C=b=>{const S=Math.round(Number(b)*100);w(S)},k=String(g?Number(g)/100:"");return vt.jsx(Ci.Wrapper,{ref:m,label:o,error:s,description:h,required:c,children:vt.jsx(Ci,{unmask:!0,autoComplete:"none",name:u,placeholder:i,component:Pu,rightSection:vt.jsx(ea,{mr:"md",children:d}),value:k,onAccept:C,...Au,...p})})});H.forwardRef(({name:u,...i},s)=>{const o=Le();return vt.jsx(Mu,{ref:s,...i,...o.getInputProps(u)},o.key(u))});const Gu=H.forwardRef(({name:u,...i},s)=>{const o=Le();return vt.jsx(En,{ref:s,...i,...o.getInputProps(u)},o.key(u))}),Ku=H.forwardRef(({name:u,...i},s)=>{const o=Le();return vt.jsx(aa,{ref:s,...i,...o.getInputProps(u)},o.key(u))}),qu=H.forwardRef(({name:u,...i},s)=>{const o=Le();return vt.jsx(Pi,{ref:s,...i,...o.getInputProps(u,{type:"checkbox"})},o.key(u))}),Yu=H.forwardRef(({name:u,...i},s)=>{const o=Le();return vt.jsx(ua,{ref:s,...i,...o.getInputProps(u)},o.key(u))});export{Wu as D,Fu as L,zu as M,Gu as N,cu as Q,Ku as S,Zu as T,Vu as a,Yu as b,qu as c,Du as d,ir as e,Nu as f,Ka as g,Ai as l,Ln as u};
